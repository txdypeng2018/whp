<ehcache xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:noNamespaceSchemaLocation="ehcache.xsd"
         name="pepCacheManager"
         updateCheck="false">

    <!-- View java.io.File.createTempFile(java.lang.String, java.lang.String, java.io.File)
    to see where 'java.io.tmpdir' is -->
    <diskStore path="java.io.tmpdir/pep-ehcache"/>

    <!-- The "defaultCache" does not provide "defaults" for every cache, but its just a way
    of specifying config for caches that can/are added dynamically - using
    cacheManager.addCache(String cacheName). -->
    <defaultCache maxElementsInMemory="10000"
                  timeToIdleSeconds="120"
                  timeToLiveSeconds="120"
                  maxElementsOnDisk="10000000"
                  diskExpiryThreadIntervalSeconds="120"
                  memoryStoreEvictionPolicy="LRU">
        <persistence strategy="localTempSwap"/>
    </defaultCache>

    <cache name="org.hibernate.cache.internal.StandardQueryCache"
           maxEntriesLocalHeap="500"
           timeToIdleSeconds="120"
           timeToLiveSeconds="120">
        <persistence strategy="localTempSwap"/>
    </cache>

    <cache name="org.hibernate.cache.spi.UpdateTimestampsCache"
           maxEntriesLocalHeap="5000"
           eternal="true">
        <persistence strategy="localTempSwap"/>
    </cache>

    <!-- Default cache for spring cache annotation using -->
    <!-- Persistent area -->
    <cache name="pep"
           maxElementsInMemory="10000"
           eternal="true"
           overflowToDisk="true"
           diskPersistent="true"
           memoryStoreEvictionPolicy="LFU">
    </cache>
    <!-- Memory area -->
    <cache name="pep-temp"
           maxEntriesLocalHeap="10000">
        <persistence strategy="localTempSwap"/>
    </cache>

    <!-- This cache is used by JWT secret -->
    <cache name="apiSecrets"
           maxElementsInMemory="10000"
           eternal="true"
           overflowToDisk="true"
           diskPersistent="true"
           memoryStoreEvictionPolicy="LFU">
    </cache>

    <!-- Cache region for platform users, eternal storage -->
    <cache name="users"
           maxElementsInMemory="10000"
           eternal="true"
           overflowToDisk="true"
           diskPersistent="true"
           memoryStoreEvictionPolicy="LFU">
    </cache>

    <!-- Memory area 带有特定的缓存失效时间,后缀为缓存的有效时间,单位为秒 -->
    <cache name="pep-temp_60"
           maxEntriesLocalHeap="10000"
           timeToIdleSeconds="60"
           timeToLiveSeconds="60">
        <persistence strategy="localTempSwap"/>
    </cache>
    <cache name="pep-temp_120"
           maxEntriesLocalHeap="10000"
           timeToIdleSeconds="120"
           timeToLiveSeconds="120">
        <persistence strategy="localTempSwap"/>
    </cache>
    <cache name="pep-temp_600"
           maxEntriesLocalHeap="10000"
           timeToIdleSeconds="600"
           timeToLiveSeconds="600">
        <persistence strategy="localTempSwap"/>
    </cache>
    <cache name="pep-temp_900"
           maxEntriesLocalHeap="10000"
           timeToIdleSeconds="900"
           timeToLiveSeconds="900">
        <persistence strategy="localTempSwap"/>
    </cache>
    <!-- 一个月 -->
    <cache name="pep-temp_2592000"
           maxEntriesLocalHeap="10000"
           timeToIdleSeconds="2592000"
           timeToLiveSeconds="2592000">
        <persistence strategy="localTempSwap"/>
    </cache>
</ehcache>
