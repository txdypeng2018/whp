<?xml version="1.0" encoding="UTF-8"?>
<configuration scan="true" scanPeriod="5 seconds">

    <appender name="console" class="ch.qos.logback.core.ConsoleAppender">
        <encoder>
            <pattern>%5p [%d{yy-MM-dd-HH:mm:ss}] %40.40c:%4L - %m%n</pattern>
        </encoder>
    </appender>

    <appender name="payLogApp" class="com.proper.enterprise.isj.payment.logger.logback.appender.PayLogAppender">
    </appender>

    <!-- 为了减少对实时业务的影响，日志记录采用异步方式调用。因为延时退款业务的延时时间很长，有足够的时间来记录业务。 -->
    <appender name="asyncPayLogApp" class="com.proper.enterprise.isj.payment.logger.logback.appender.PayLogAsyncAppender">  
            <!-- 不丢失日志.默认的,如果队列的80%已满,则会丢弃TRACT、DEBUG、INFO级别的日志 -->  
            <discardingThreshold>0</discardingThreshold>  
            <!-- 更改默认的队列的深度,该值会影响性能.默认值为256 -->  
            <queueSize>5120</queueSize>
            <!-- 添加附加的appender,最多只能添加一个 -->  
         <appender-ref ref ="payLogApp"/>  
     </appender>  

    <logger name="delayRefundLogger" level="trace">
      <appender-ref ref="asyncPayLogApp" />
    </logger>

    <logger name="com.proper" level="trace" />

    <root level="error">
        <appender-ref ref="console" />
    </root>

</configuration>
