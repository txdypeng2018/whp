"use strict";!function(){var a=["ionic","ionic-datepicker","angular-carousel","ngProgress","ngCordova","properNgCordova"];angular.module("isj",a).run(["$ionicPlatform","$window","$properProperpush","appConstants","$state","$ionicPopup","$http","$cordovaToast",function(a,b,c,d,e,f,g,h){a.ready(function(){function a(a){if(a.properAlert){if("messages"===a.properCustoms.pageUrl)var b=f.show({template:'<div style="padding: 3px;font-size:15px; text-align:center;">您有新的消息</div>',title:"掌上盛京医院",buttons:[{text:"我知道了",type:"positive",onTap:function(a){a.preventDefault(),b.close()}},{text:"前往查看",type:"positive",onTap:function(a){a.preventDefault(),b.close(),e.go("tab.message")}}]})}else"messages"===a.properCustoms.pageUrl&&e.go("tab.message")}function i(){c.getDeviceInfo().then(function(a){"android"===a.type&&g.get("/app/latest",{params:{}}).success(function(a){var b={};b.ver=a.ver||"0",b.url=a.url||"",b.note=a.note.replace(new RegExp(/(<br>)/g),"\n")||"有新版本需要更新！",window.plugins.UpdateVersion.checkVersion(b)}).error(function(a){h.showShortBottom(a)})},function(a){alert("error:"+a)})}b.cordova&&b.cordova.plugins&&b.cordova.plugins.Keyboard&&(b.cordova.plugins.Keyboard.hideKeyboardAccessoryBar(!0),b.cordova.plugins.Keyboard.disableScroll(!0)),b.StatusBar&&b.StatusBar.styleDefault();var j=d.properpush;c.init(j).then(function(){console.log("推送初始化成功")},function(a){alert("error:"+a)}),document.addEventListener("Properpush.openNotification",a,!1),document.addEventListener("resume",function(){i()},!1),i()})}]),"function"!=typeof String.prototype.startsWith&&(String.prototype.startsWith=function(a){return this.slice(0,a.length)===a}),"function"!=typeof String.prototype.endsWith&&(String.prototype.endsWith=function(a){return-1!==this.indexOf(a,this.length-a.length)})}(),angular.module("isj").directive("isjBackButton",function(){return{restrict:"E",replace:!0,scope:{goBack:"&?"},template:'<a class="icon-return positive" ng-click="goBack()"><i class="icon ion-ios-arrow-left"></i> <div>返回</div></a>',controller:["$scope","$ionicHistory",function(a,b){angular.isUndefined(a.goBack)&&(a.goBack=function(){b.goBack()})}]}}),angular.module("isj").directive("isjSpinner",function(){return{restrict:"E",replace:!1,scope:{isShow:"=isShow",isRefresh:"=isRefresh"},template:"",controller:["$scope","$element","ngProgressFactory",function(a,b,c){a.progressbar=c.createInstance(),a.progressbar.setParent(b[0]),a.progressbar.setColor("#387ef5"),a.$watch("isRefresh",function(b){a.isShow?1===b?a.progressbar.start():(a.progressbar.set(0),a.progressbar.start()):a.progressbar.complete()})}]}}),function(a){a.config(["$urlRouterProvider",function(a){a.otherwise("/tab/main")}]),a.config(["ionicDatePickerProvider",function(a){var b={setLabel:"选择",todayLabel:"今天",closeLabel:"关闭",weeksList:["日","一","二","三","四","五","六"],monthsList:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],templateType:"popup",showTodayButton:!0,closeOnSelect:!0,mondayFirst:!0,dateFormat:"yyyy年MM月dd日"};a.configDatePicker(b)}]);var b=function(a){var b=!0;return a.endsWith(".html")&&(b=!1),a.endsWith(".svg")&&!a.startsWith("/")&&(b=!1),b},c="https://server.propersoft.cn/isj/api",d=0;a.factory("authInterceptor",["$q","$window","$rootScope","userService",function(a,e,f,g){return f.refreshProcess=0,{request:function(a){return a.url.indexOf("modules")<0&&a.url.indexOf("/photo")<0&&(d++,f.inProcess=!0,f.refreshProcess++),a.headers=a.headers||{},g.hasToken()&&(a.headers.Authorization="Bearer "+g.getToken()),b(a.url)&&(a.url=c+a.url),a},requestError:function(b){return d=0,f.inProcess=!1,f.refreshProcess=0,console.debug("requestError %o",b),a.reject(b)},response:function(b){return b.config.url.indexOf("modules")<0&&b.config.url.indexOf("/photo")<0&&(d--,0>=d&&(f.inProcess=!1,f.refreshProcess=0)),401===b.status&&console.debug("handle the case where the user is not authenticated"),b||a.when(b)},responseError:function(b){return 404===b.status&&(b.data="资源未找到"),d=0,f.inProcess=!1,f.refreshProcess=0,console.debug("responseError %o",b),a.reject(b)}}}]),a.run(["$rootScope","$location","appConstants",function(a,b,c){a.location=b,a.$watch("location.url()",function(a){var b=b||[];b.push(["setDocumentTitle",document.domain+"/"+document.title]),b.push(["setDomains",["*."+c.piwikTrackTarget]]),b.push(["trackPageView"]),b.push(["enableLinkTracking"]);var d=Piwik.getTracker(c.piwikServer+"/piwik.php",3);d.setCustomUrl(a),d.trackPageView()})}]),a.config(["$httpProvider",function(a){a.interceptors.push("authInterceptor")}])}(angular.module("isj")),function(a){a.constant("appConstants",{piwikServer:"https://server.propersoft.cn:8082",piwikTrackTarget:"server.propersoft.cn/isj",properpush:{appId:"isj",pushUrl:"https://www.wideunique.top:5555/properpush",secretKey:"b2024e00064bc5d8db70fdee087eae4f",xiaomi:{theAppid:"2882303761517501901",theAppkey:"5591750110901"}}})}(angular.module("isj")),function(a){a.factory("userService",["$window",function(a){var b={};return b.setToken=function(b){a.localStorage.token=b},b.getToken=function(){return a.localStorage.token},b.hasToken=function(){return!angular.isUndefined(a.localStorage.token)&&""!==a.localStorage.token},b.clearToken=function(){a.localStorage.token=""},b}])}(angular.module("isj")),function(a){var b=function(a,b,c,d,e){a.title="收藏的医生",a.vm={moreData:!1,loadMore:function(){}};var f=function(c,d){b.get("/doctors/photo",{params:{doctorId:c,index:d}}).success(function(b,c,d,e){a.introductions[e.params.index].photo=b}).error(function(b,c,d,e){a.introductions[e.params.index].photo=""})},g=function(c){b.get("/user/collectionDoctors",{params:c}).success(function(b){a.introductions=b;for(var c=0;c<b.length;c++)f(b[c].id,c)}).error(function(a){e.showShortBottom(a)})};a.placeholderClk=function(){d(function(){document.getElementById("doctorIntroduction_search").focus()})},a.doSearch=function(){g({searchName:a.searchName})},a.$on("$ionicView.beforeEnter",function(){g({searchName:a.searchName})}),a.viewIntroduction=function(a){c.go("doctorIntroductionView",{doctorId:a,type:"1"})}};b.$inject=["$scope","$http","$state","$timeout","$cordovaToast"];var c=function(a){a.state("collectionDoctorList",{url:"/collectionDoctor/collectionDoctorList",templateUrl:"modules/doctorIntroduction/doctorIntroductionList.html",controller:b})};c.$inject=["$stateProvider"],a.config(c)}(angular.module("isj")),function(a){var b=function(a,b,c,d,e){a.title="医生介绍";var f=function(c,d){b.get("/doctors/photo",{params:{doctorId:c,index:d}}).success(function(b,c,d,e){a.introductions[e.params.index].photo=b}).error(function(b,c,d,f){404===c?a.introductions[f.params.index].photo="":e.showShortBottom(b)})},g=function(c,d){b.get("/doctors",{params:c}).success(function(b){0===b.length&&(a.vm.moreData=!1);var c=0;if(d)a.introductions=b;else{c=a.introductions.length;for(var e=0;e<b.length;e++)a.introductions.push(b[e])}for(var g=c;g<a.introductions.length;g++)f(a.introductions[g].id,g);a.$broadcast("scroll.infiniteScrollComplete")}).error(function(a){e.showShortBottom(a)})};a.placeholderClk=function(){d(function(){document.getElementById("doctorIntroduction_search").focus()})},a.doSearch=function(){a.vm.init()},a.viewIntroduction=function(a){c.go("doctorIntroductionView",{doctorId:a,type:"1"})},a.vm={moreData:!0,pageNo:1,init:function(){a.vm.pageNo=1,g({searchName:a.searchName,pageNo:a.vm.pageNo},!0)},loadMore:function(){a.vm.pageNo++,g({searchName:a.searchName,pageNo:a.vm.pageNo},!1)}},a.vm.init()};b.$inject=["$scope","$http","$state","$timeout","$cordovaToast"];var c=function(a){a.state("doctorIntroductionList",{url:"/doctorIntroductionList",templateUrl:"modules/doctorIntroduction/doctorIntroductionList.html",controller:b})};c.$inject=["$stateProvider"],a.config(c)}(angular.module("isj")),function(a){var b=function(a,b,c,d,e,f){a.type="1"===d.type,a.$on("$ionicView.beforeEnter",function(){a.isLogin=f.hasToken(),b.get("/user/tokenVal").error(function(b,c){401===c&&(f.clearToken(),a.isLogin=!1)})}),b.get("/doctors/"+d.doctorId).success(function(c){a.introduction=c,b.get("/doctors/photo",{params:{doctorId:d.doctorId}}).success(function(b){a.introduction.photo=b}).error(function(){a.introduction.photo=""})}).error(function(a){e.showShortBottom(a)}),b.get("/user/collectionDoctors/"+d.doctorId).success(function(b){angular.isUndefined(b.doctorId)||""===b.doctorId?a.isCollection=!1:a.isCollection=!0}).error(function(b,c){401===c?a.isCollection=!1:e.showShortBottom(b)}),a.collectionDoctor=function(){a.isLogin?a.isCollection?b["delete"]("/user/collectionDoctors/"+d.doctorId).success(function(){a.isCollection=!1}).error(function(a){e.showShortBottom(a)}):b.post("/user/collectionDoctors",{doctorId:d.doctorId}).success(function(){a.isCollection=!0}).error(function(a){e.showShortBottom(a)}):c.go("login")},a.register=function(){a.isLogin?c.go("registerDoctorTimeSelect",{doctorId:d.doctorId,date:"",type:"2"}):c.go("login")}};b.$inject=["$scope","$http","$state","$stateParams","$cordovaToast","userService"];var c=function(a){a.state("doctorIntroductionView",{url:"/doctorIntroductionList/doctorIntroductionView/:doctorId/:type",templateUrl:"modules/doctorIntroduction/doctorIntroductionView.html",controller:b})};c.$inject=["$stateProvider"],a.config(c)}(angular.module("isj")),function(a){var b=function(a,b,c,d){c.get("/dataBase/familyMenberTypes").success(function(b){a.memberTypes=[];for(var c in b)b[c].code=c,a.memberTypes.push(b[c]);a.memberTypes.sort(function(a,b){return a.code-b.code})}).error(function(a){d.showShortBottom(a)}),a.medicalCardEdit=function(a){b.go("familyMemberEdit",{memberCode:a})}};b.$inject=["$scope","$state","$http","$cordovaToast"];var c=function(a){a.state("familyMemberAdd",{url:"/familyMember/familyMemberAdd",templateUrl:"modules/familyMember/familyMemberAdd.html",controller:b})};c.$inject=["$stateProvider"],a.config(c)}(angular.module("isj")),function(a){var b=function(a,b,c,d){b.get("/dataBase/sexTypes").success(function(b){a.sexTypes=b,a.sexs=[];for(var c in a.sexTypes)a.sexTypes[c].code=c,a.sexs.push(a.sexTypes[c])}).error(function(a){d.showShortBottom(a)}),a.$on("$ionicView.beforeEnter",function(){a.isSubmit=!1,a.hasSex=!1,angular.isUndefined(c.memberId)||""===c.memberId?(a.isAdd=!0,b.get("/dataBase/familyMenberTypes/"+c.memberCode).success(function(b){a.member={memberCode:b.code,member:b.name,sexCode:b.sexCode,sex:"",name:"",img:b.img},""!==b.sexCode&&(a.member.sex=a.sexTypes[b.sexCode].name,a.hasSex=!0)}).error(function(a){d.showShortBottom(a)})):a.isAdd=!1})};b.$inject=["$scope","$http","$stateParams","$cordovaToast"];var c=function(a){a.state("familyMemberEdit",{url:"/familyMember/familyMemberEdit/:memberId/:memberCode",templateUrl:"modules/familyMember/familyMemberEdit.html",controller:b})};c.$inject=["$stateProvider"],a.config(c)}(angular.module("isj")),function(a){var b=function(a,b,c,d){b.get("/dataBase/familyMenberTypes").success(function(b){a.memberTypes=b}).error(function(a){d.showShortBottom(a)}),a.$on("$ionicView.beforeEnter",function(){b.get("/user/familyMembers").success(function(b){a.members=b;for(var c=0;c<a.members.length;c++)a.members[c].idCard=a.members[c].idCard.substring(0,6)+"********"+a.members[c].idCard.substring(14,18),a.members[c].phone=a.members[c].phone.substring(0,3)+"****"+a.members[c].phone.substring(7,11)}).error(function(a){d.showShortBottom(a)})}),a.familyMemberAdd=function(){c.go("familyMemberAdd")},a.medicalCardEdit=function(){c.go("familyMemberEdit")}};b.$inject=["$scope","$http","$state","$cordovaToast"];var c=function(a){a.state("familyMemberList",{url:"/familyMember/familyMemberList",templateUrl:"modules/familyMember/familyMemberList.html",controller:b})};c.$inject=["$stateProvider"],a.config(c)}(angular.module("isj")),function(a){var b=function(a,b,c,d,e){a.memberId=d.memberId,b.get("/dataBase/familyMenberTypes").success(function(b){a.memberTypes=b}),b.get("/user/familyMembers").success(function(b){a.members=b}),a.goBack=function(){e.goBack()},a.memberManage=function(){c.go("familyMemberList")},a.memberSelect=function(a){"registerConfirmToday"===d.skipId?c.go(d.skipId,{memberId:a,doctorId:d.doctorId}):"registerConfirmAppt"===d.skipId?c.go(d.skipId,{memberId:a,doctorId:d.doctorId,date:d.date}):c.go(d.skipId,{memberId:a})},a.addMember=function(){c.go("familyMemberAdd",{skipId:d.skipId,memberId:d.memberId,type:"2"})}};b.$inject=["$scope","$http","$state","$stateParams","$ionicHistory"];var c=function(a){a.state("familyMemberSelect",{url:"/familyMember/familyMemberSelect/:skipId/:memberId/:doctorId/:date",cache:"false",templateUrl:"modules/familyMember/familyMemberSelect.html",controller:b})};c.$inject=["$stateProvider"],a.config(c)}(angular.module("isj")),function(a){var b=function(a,b){a.myURL=b.trustAsResourceUrl("http://sj-hospital.org/")};b.$inject=["$scope","$sce"];var c=function(a){a.state("hospitalIntroduce",{url:"/hospitalIntroduce",cache:!1,templateUrl:"modules/hospitalIntroduce/hospitalIntroduce.html",controller:b})};c.$inject=["$stateProvider"],a.config(c)}(angular.module("isj")),function(a){var b=function(a,b,c,d){b.get("/hospitalNavigation/builds/floors",{params:{buildId:c.id}}).success(function(b){a.floorList=b}).error(function(a){d.showShortBottom(a)})};b.$inject=["$scope","$http","$stateParams","$cordovaToast"];var c=function(a){a.state("hospitalNavigationFloorList",{url:"/hospitalNavigation/floorList/:id",templateUrl:"modules/hospitalNavigation/floorList.html",controller:b})};c.$inject=["$stateProvider"],a.config(c)}(angular.module("isj")),function(a){var b=function(a,b,c,d,e){b.get("/hospitalNavigation/builds").success(function(b){a.districtBuilds=b}).error(function(a){e.showShortBottom(a)}),a.buildingClk=function(a){d.go("hospitalNavigationFloorList",{id:a})}};b.$inject=["$scope","$http","$timeout","$state","$cordovaToast"];var c=function(a){a.state("hospitalNavigation",{url:"/hospitalNavigation",templateUrl:"modules/hospitalNavigation/hospitalNavigation.html",controller:b})};c.$inject=["$stateProvider"],a.config(c)}(angular.module("isj")),function(a){var b=function(a,b,c,d,e){a.$on("$ionicView.beforeEnter",function(){a.isSubmit=!1,a.input={phone:""}}),a.getCode=function(){var c={category:"2",phone:a.input.phone.toString()};a.isSubmit=!0,d.get("/permission/verificationCode",{params:c}).success(function(){b.go("forgetPasswordSetting",{phone:c.phone})}).error(function(b){a.isSubmit=!1,e.showShortBottom(b)})}};b.$inject=["$scope","$state","$ionicHistory","$http","$cordovaToast"];var c=function(a){a.state("forgetPassword",{url:"/forgetPassword",templateUrl:"modules/login/forgetPassword.html",controller:b})};c.$inject=["$stateProvider"],a.config(c)}(angular.module("isj")),function(a){var b=function(a,b,c,d,e,f){a.$on("$ionicView.beforeEnter",function(){a.isResend=!1,a.isSubmit=!1,a.phone=b.phone.toString().substring(0,3)+"****"+b.phone.toString().substring(7,11),a.input={phone:b.phone,verificationCode:"",newPassword:""},a.time={second:60},a.secondString="("+a.time.second+")";var c=function(){0!==a.time.second&&(--a.time.second,0===a.time.second?(a.isResend=!0,a.secondString=""):a.secondString="("+a.time.second+")")};setInterval(function(){a.$apply(c)},1e3)}),a.goBack=function(){d.goBack(-2)},a.resendCode=function(){var c={category:"3",phone:b.phone};e.get("/permission/verificationCode",{params:c}).success(function(){a.time.second=60,a.secondString="("+a.time.second+")",a.isResend=!1}).error(function(a){f.showShortBottom(a)})};var g=function(){if(""===a.input.verificationCode)return f.showShortBottom("验证码不能为空"),!1;if(""===a.input.newPassword)return f.showShortBottom("密码不能为空"),!1;if(6!==a.input.verificationCode.toString().length)return f.showShortBottom("验证码必须6个数字"),!1;if(a.input.newPassword.length<6||a.input.newPassword.length>20)return f.showShortBottom("密码必须6-20个字符"),!1;var b=/^[0-9a-zA-Z_]+$/;return b.test(a.input.newPassword)?!0:(f.showShortBottom("密码必须由英文字母、数字、下划线组成"),!1)};a.changePassword=function(){a.isSubmit=!0,g()?(a.input.category="2",e.put("/permission/account",a.input).success(function(){d.goBack(-2),f.showShortBottom("密码修改成功")}).error(function(b){a.isSubmit=!1,f.showShortBottom(b)})):a.isSubmit=!1}};b.$inject=["$scope","$stateParams","$state","$ionicHistory","$http","$cordovaToast"];var c=function(a){a.state("forgetPasswordSetting",{url:"/forgetPasswordSetting/:phone",templateUrl:"modules/login/forgetPasswordSetting.html",controller:b})};c.$inject=["$stateProvider"],a.config(c)}(angular.module("isj")),function(a){var b=function(a,b,c,d,e,f,g,h,i){a.$on("$ionicView.beforeEnter",function(){a.input={phone:"",password:""}}),a.goBack=function(){angular.isUndefined(d.skipId)||""===d.skipId?f.goBack():c.go(d.skipId)},a.login=function(){var e={phone:a.input.phone.toString(),password:a.input.password};b.post("/permission/login",e).success(function(b){var e={userid:a.input.phone.toString(),otherInfo:""};i.bindUserid(e).then(function(){console.log("用户绑定成功")},function(a){alert("error:"+a)}),h.setToken(b),angular.isUndefined(d.skipId)||""===d.skipId?f.goBack():c.go(d.skipId)}).error(function(a){g.showShortBottom(a)})}};b.$inject=["$scope","$http","$state","$stateParams","$window","$ionicHistory","$cordovaToast","userService","$properProperpush"];var c=function(a){a.state("login",{url:"/login/:skipId",templateUrl:"modules/login/login.html",controller:b})};c.$inject=["$stateProvider"],a.config(c)}(angular.module("isj")),function(a){var b=function(a,b,c,d,e){a.$on("$ionicView.beforeEnter",function(){a.isSubmit=!1,a.input={phone:""}}),a.getCode=function(){var c={category:"1",phone:a.input.phone.toString()};a.isSubmit=!0,d.get("/permission/verificationCode",{params:c}).success(function(){b.go("registSetting",{phone:c.phone})}).error(function(b){a.isSubmit=!1,e.showShortBottom(b)})}};b.$inject=["$scope","$state","$ionicHistory","$http","$cordovaToast"];var c=function(a){a.state("regist",{url:"/regist",templateUrl:"modules/login/regist.html",controller:b})};c.$inject=["$stateProvider"],a.config(c)}(angular.module("isj")),function(a){var b=function(a,b,c,d,e,f,g){a.$on("$ionicView.beforeEnter",function(){a.isResend=!1,a.isSubmit=!1,a.phone=c.phone.toString().substring(0,3)+"****"+c.phone.toString().substring(7,11),a.input={phone:c.phone,verificationCode:"",password:"",name:"",idCard:""},a.time={second:60},a.secondString="("+a.time.second+")";var b=function(){0!==a.time.second&&(--a.time.second,0===a.time.second?(a.isResend=!0,a.secondString=""):a.secondString="("+a.time.second+")")};setInterval(function(){a.$apply(b)},1e3)}),a.goBack=function(){b.goBack(-2)},a.resendCode=function(){var b={category:"3",phone:c.phone};d.get("/permission/verificationCode",{params:b}).success(function(){a.time.second=60,a.secondString="("+a.time.second+")",a.isResend=!1}).error(function(a){e.showShortBottom(a)})};var h=function(a){var b=!1;return(15===a.length||18===a.length)&&(b=!0),b},i=function(){if(""===a.input.verificationCode)return e.showShortBottom("验证码不能为空"),!1;if(""===a.input.password)return e.showShortBottom("密码不能为空"),!1;if(""===a.input.name)return e.showShortBottom("姓名不能为空"),!1;if(""===a.input.idCard)return e.showShortBottom("身份证号不能为空"),!1;if(6!==a.input.verificationCode.toString().length)return e.showShortBottom("验证码必须6个数字"),!1;if(a.input.password.length<6||a.input.password.length>20)return e.showShortBottom("密码必须6-20个字符"),!1;var b=/^[0-9a-zA-Z_]+$/;return b.test(a.input.password)?h(a.input.idCard)?!0:(e.showShortBottom("身份证号输入错误"),!1):(e.showShortBottom("密码必须由英文字母、数字、下划线组成"),!1)};a.regist=function(){a.isSubmit=!0,i()?d.post("/permission/account",a.input).success(function(a){g.setToken(a),f.go("tab.personal"),e.showShortBottom("注册成功")}).error(function(b){a.isSubmit=!1,e.showShortBottom(b)}):a.isSubmit=!1}};b.$inject=["$scope","$ionicHistory","$stateParams","$http","$cordovaToast","$state","userService"];var c=function(a){a.state("registSetting",{url:"/registSetting/:phone",templateUrl:"modules/login/registSetting.html",controller:b})};c.$inject=["$stateProvider"],a.config(c)}(angular.module("isj")),function(a){var b=function(a,b,c,d,e){a.$on("$ionicView.beforeEnter",function(){a.isSubmit=!1,a.input={memberId:c.memberId,medicalNum:""},b.get("/user/familyMembers/familyMember",{params:{memberId:c.memberId}}).success(function(b){a.input.medicalNum=b.medicalNum}).error(function(a){e.showShortBottom(a)})}),a.changeNum=function(){a.isSubmit=!0,b.put("/user/medicalNum",a.input).success(function(){d.goBack()}).error(function(b){a.isSubmit=!1,e.showShortBottom(b)})},a.createNum=function(){a.isSubmit=!0,b.post("/user/medicalNum",a.input).success(function(){d.goBack()}).error(function(b){a.isSubmit=!1,e.showShortBottom(b)})}};b.$inject=["$scope","$http","$stateParams","$ionicHistory","$cordovaToast"];var c=function(a){a.state("medicalCardEdit",{url:"/medicalCard/medicalCardEdit/:memberId",templateUrl:"modules/medicalCard/medicalCardEdit.html",controller:b})};c.$inject=["$stateProvider"],a.config(c)}(angular.module("isj")),function(a){var b=function(a,b,c,d){b.get("/dataBase/familyMenberTypes").success(function(b){a.memberTypes=b}).error(function(a){d.showShortBottom(a)}),a.$on("$ionicView.beforeEnter",function(){b.get("/user/familyMembers").success(function(b){a.members=b;for(var c=0;c<a.members.length;c++)a.members[c].idCard=a.members[c].idCard.substring(0,6)+"********"+a.members[c].idCard.substring(14,18)}).error(function(a){d.showShortBottom(a)})}),a.medicalCardEdit=function(a){c.go("medicalCardEdit",{memberId:a})}};b.$inject=["$scope","$http","$state","$cordovaToast"];var c=function(a){a.state("medicalCardList",{url:"/medicalCard/medicalCardList",templateUrl:"modules/medicalCard/medicalCardList.html",controller:b})};c.$inject=["$stateProvider"],a.config(c)}(angular.module("isj")),function(a){var b=function(a,b,c){b.get("/medicalGuide").success(function(b){a.medicalGuide=b}).error(function(a){c.showShortBottom(a)})};b.$inject=["$scope","$http","$cordovaToast"];var c=function(a){a.state("medicalGuide",{url:"/medicalGuide",templateUrl:"modules/medicalGuide/medicalGuide.html",controller:b})};c.$inject=["$stateProvider"],a.config(c)}(angular.module("isj")),function(a){var b=function(a,b,c,d,e,f){a.memberId=e.memberId;var g=function(c){c.memberId=e.memberId,b.get("/medicalReports",{params:c}).success(function(b){a.reports=b}).error(function(a){f.showShortBottom(a)})};a.searchStr={searchTime:"",searchStatus:""},a.searchTimeTypes=[{code:"",name:"时间不限"},{code:"week",name:"一周内"},{code:"month",name:"一月内"},{code:"halfYear",name:"半年内"},{code:"year",name:"一年内"}],a.searchStatusTypes=[{code:"",name:"状态不限"},{code:"1",name:"已出"},{code:"0",name:"未出"}],a.searchReport=function(){g(a.searchStr)},a.$on("$ionicView.beforeEnter",function(){b.get("/user/familyMembers/familyMember",{params:{memberId:e.memberId}}).success(function(b){a.patient=b}).error(function(a){f.showShortBottom(a)}),g(a.searchStr)}),a.goBack=function(){d.go("tab.main")},a.selectMember=function(){d.go("familyMemberSelect",{skipId:"medicalReportList",memberId:a.patient.id})},a.viewReport=function(a,b,c){"1"===c&&"1"===b&&d.go("medicalReportView1",{id:a,category:b})}};b.$inject=["$scope","$http","$window","$state","$stateParams","$cordovaToast"];var c=function(a){a.state("medicalReportList",{url:"/medicalReportList/:memberId",templateUrl:"modules/medicalReport/medicalReportList.html",controller:b})};c.$inject=["$stateProvider"],a.config(c)}(angular.module("isj")),function(a){var b=function(a,b,c,d){b.get("/medicalReports/"+c.category+"/"+c.id).success(function(b){a.report=b}).error(function(a){d.showShortBottom(a)})};b.$inject=["$scope","$http","$stateParams","$cordovaToast"];var c=function(a){a.state("medicalReportView1",{url:"/medicalReportList/medicalReportView1/:category/:id",templateUrl:"modules/medicalReport/medicalReportView1.html",controller:b})};c.$inject=["$stateProvider"],a.config(c)}(angular.module("isj")),function(a){var b=function(a,b,c,d,e){var f=function(c){c.memberId=d.memberId,b.get("/recipes",{params:c}).success(function(b){a.recipes=b,a.amount="0.00",a.recipeNums=[];for(var c=0;c<a.recipes.length;c++){var d=a.recipes[c];d.canCheck=!1;for(var e=0;e<d.recipes.length;e++)"0"===d.recipes[e].statusCode&&(d.canCheck=!0,d.isCheck=!1);d.canCheck&&(d.isCheck=!1)}}).error(function(a){e.showShortBottom(a)})};a.searchStr={searchStatus:""},a.searchStatusTypes=[{code:"",name:"全部"},{code:"0",name:"未支付"},{code:"1",name:"已支付"}],a.searchPay=function(){f(a.searchStr)},a.$on("$ionicView.beforeEnter",function(){b.get("/user/familyMembers/familyMember",{params:{memberId:d.memberId}}).success(function(b){a.patient=b}),a.isSubmit=!1,f(a.searchStr)}),a.goBack=function(){c.go("tab.main")},a.selectMember=function(){c.go("familyMemberSelect",{skipId:"onlinePaymentList",memberId:a.patient.id})};var g=function(b,c){var d=a.recipeNums.indexOf(b);c?0>d&&a.recipeNums.push(b):d>=0&&a.recipeNums.splice(d,1)},h=function(b,c){c?(a.amount=(Number(a.amount)+Number(b)+1).toFixed(2),a.amount=Number(a.amount-1).toFixed(2)):(a.amount=(Number(a.amount)-Number(b)+1).toFixed(2),a.amount=Number(a.amount-1).toFixed(2))};a.checkClk=function(b,c,d){var e={};if("0"===b){for(var f=0;f<a.recipes.length;f++)if(e=a.recipes[f],e.outpatientNum===c)for(var i=0;i<e.recipes.length;i++)"0"===e.recipes[i].statusCode&&(e.isCheck!==e.recipes[i].isCheck&&h(e.recipes[i].total,e.isCheck),e.recipes[i].isCheck=e.isCheck,g(e.recipes[i].recipeNum,e.isCheck))}else for(var j=0;j<a.recipes.length;j++)if(e=a.recipes[j],e.outpatientNum===c){for(var k=!0,l=0;l<e.recipes.length;l++)"0"===e.recipes[l].statusCode&&(e.recipes[l].recipeNum===d&&(g(d,e.recipes[l].isCheck),h(e.recipes[l].total,e.recipes[l].isCheck)),e.recipes[l].isCheck||(k=!1));e.isCheck=k}},a.payClk=function(){if(a.recipeNums.length>0){for(var d={memberId:a.patient.id,outpatients:[]},f=0;f<a.recipes.length;f++){for(var g=a.recipes[f],h=[],i=0;i<g.recipes.length;i++)g.recipes[i].isCheck&&h.push(g.recipes[i].recipeNum);h.length>0&&d.outpatients.push({outpatientNum:g.outpatientNum,recipeNums:h})}a.isSubmit=!0,b.post("/orders",d).success(function(a){c.go("paymentSelect",{orderNum:a.orderNum})}).error(function(b){a.isSubmit=!1,e.showShortBottom(b)})}}};b.$inject=["$scope","$http","$state","$stateParams","$cordovaToast"];var c=function(a){a.state("onlinePaymentList",{url:"/onlinePayment/onlinePaymentList/:memberId",templateUrl:"modules/onlinePayment/onlinePaymentList.html",controller:b})};c.$inject=["$stateProvider"],a.config(c)}(angular.module("isj")),function(a){var b=function(a,b,c,d){a.resultImgSrc=d.resultImgSrc,a.resultText=d.resultText,a.goBack=function(){c.go("tab.main")}};b.$inject=["$scope","$http","$state","$stateParams"];var c=function(a){a.state("paymentResult",{url:"/onlinePayment/paymentResult/:resultImgSrc/:resultText",cache:"false",templateUrl:"modules/onlinePayment/paymentResult.html",controller:b})};c.$inject=["$stateProvider"],a.config(c)}(angular.module("isj")),function(a){var b=function(a,b,c,d,e,f,g){var h=d.orderNum,i=function(){angular.isUndefined(a.time.second)||(0===a.time.minute&&0===a.time.second&&c.go("tab.main"),0===a.time.second?(--a.time.minute,a.time.second=59):--a.time.second)};b.get("/orders/"+h).success(function(b){a.order=b,a.time={minute:a.order.closeTime[0],second:a.order.closeTime[1]},setInterval(function(){a.$apply(i)},1e3),a.amount=b.amount,a.subject=b.name,a.body=b.description}),a.paySelectValue="",a.paymentSelect=function(b){a.paySelectValue=b,angular.element(document.querySelectorAll(".select-yes")).addClass("select-none"),angular.element(document.querySelectorAll(".select-no")).removeClass("select-none"),angular.element(document.getElementById("select_yes_"+b)).removeClass("select-none"),angular.element(document.getElementById("select_no_"+b)).addClass("select-none")},a.pay=function(){if(angular.isUndefined(a.amount))f.showShortBottom("获取订单信息失败,请稍后重试!");else if("2"===a.paySelectValue){var d={outTradeNo:h,subject:a.subject,body:a.body,totalFee:a.amount};b.post("/pay/ali/prepayInfo",d).success(function(a){console.debug("data:",a),"0"===a.resultCode&&alipay.payment(a,function(a){var b=angular.fromJson(a),d="./assets/images/umeng_update_close_bg_tap.png";if("9000"===b.resultStatus)c.go("paymentResult",{resultImgSrc:"./assets/images/choosen.png",resultText:"支付成功!"});else if("8000"===b.resultStatus||"6004"===b.resultStatus)c.go("paymentResult",{resultImgSrc:d,resultText:"支付结果未知!请查看诊疗页!"});else if("6001"===b.resultStatus)var e=g.show({template:'<div style="padding: 3px;font-size:15px; text-align:center;">未能支付成功</div>',title:"温馨提示",buttons:[{text:"我知道了",type:"positive",onTap:function(a){a.preventDefault(),e.close()}}]});else"4000"===b.resultStatus?c.go("paymentResult",{resultImgSrc:d,resultText:"支付失败!"}):"6002"===b.resultStatus?c.go("paymentResult",{resultImgSrc:d,resultText:"支付失败!网络连接出错!"}):c.go("paymentResult",{resultImgSrc:d,resultText:"支付失败!未知错误!"})},function(a){console.debug("retData",a),f.showShortBottom("内部错误!请联系管理员!")})}).error(function(a){console.debug("data",a),f.showShortBottom("请求服务端数据错误!请联系管理员!")})}else if("3"===a.paySelectValue){var e=Number(a.amount.replace(".","")),i={outTradeNo:h,body:a.body,detail:a.subject,totalFee:e};b.post("/pay/weixin/prepayInfo",i).success(function(a){if(console.debug("data:",a),"0"===a.resultCode){var b={appid:a.appid,noncestr:a.noncestr,"package":a["package"],partnerid:a.partnerid,prepayid:a.prepayid,timestamp:a.timestamp,sign:a.sign};wxpay.payment(b,function(a){console.debug("retData",a);var b=angular.fromJson(a),d="./assets/images/umeng_update_close_bg_tap.png";if(0===b.code)c.go("paymentResult",{resultImgSrc:"./assets/images/choosen.png",resultText:"支付成功!"});else if(-4===b.code)c.go("paymentResult",{resultImgSrc:d,resultText:"支付失败!认证被否决!"});else if(-1===b.code)c.go("paymentResult",{resultImgSrc:d,resultText:"支付失败!一般错误!"});else if(-3===b.code)c.go("paymentResult",{resultImgSrc:d,resultText:"支付失败!发送失败!"});else if(-5===b.code)c.go("paymentResult",{resultImgSrc:d,resultText:"支付失败!不支持错误!"});else if(-2===b.code)var e=g.show({template:'<div style="padding: 3px;font-size:15px; text-align:center;">未能支付成功</div>',title:"温馨提示",buttons:[{text:"我知道了",type:"positive",onTap:function(a){a.preventDefault(),e.close()}}]})},function(a){console.debug("retData:",a),f.showShortBottom("内部错误!请联系管理员!")}).error(function(a){console.debug("data",a),f.showShortBottom("请求服务端数据错误!请联系管理员!")})}})}}};b.$inject=["$scope","$http","$state","$stateParams","appConstants","$cordovaToast","$ionicPopup"];var c=function(a){a.state("paymentSelect",{url:"/onlinePayment/paymentSelect/:orderNum",cache:"false",templateUrl:"modules/onlinePayment/paymentSelect.html",controller:b})};c.$inject=["$stateProvider"],a.config(c)}(angular.module("isj")),function(a){var b=function(a,b,c,d,e,f,g){var h=d.doctorId,i=d.date;a.dateDisplay=i.substring(0,4)+"年"+i.substring(5,7)+"月"+i.substring(8,10)+"日"+i.substring(10,16),b.get("/register/agreement").success(function(b){a.agreement=b}).error(function(a){g.showShortBottom(a)});var j=function(){b.get("/user/familyMembers/familyMember",{params:{memberId:d.memberId}}).success(function(b){a.patient=b}).error(function(a){g.showShortBottom(a)})};j(),a.isChecked=!0,b.get("/dataBase/familyMenberTypes").success(function(b){a.memberTypes=b}).error(function(a){g.showShortBottom(a)}),b.get("/register/doctor",{params:{id:h,date:i}}).success(function(b){a.doctor=b}).error(function(a){g.showShortBottom(a)}),b.get("/register/apptPrompt").success(function(b){a.prompt=b}).error(function(a){g.showShortBottom(a)}),a.goBack=function(){var a=0;for(var b in f.viewHistory().views){var c=f.viewHistory().views[b];if("registerDoctorTimeSelect"===c.stateName){a=c.index;break}}f.goBack(a-f.currentView().index)};var k=null;a.showAgreement=function(){k=e.show({template:'<div style="padding: 3px;font-size:15px">'+a.agreement+"</div>",title:"挂号须知",cssClass:"agreement-popup",buttons:[{text:"确定",type:"positive",onTap:function(a){a.preventDefault(),k.close()}}]})},a.selectMember=function(){c.go("familyMemberSelect",{skipId:"registerConfirmAppt",doctorId:h,date:i,memberId:a.patient.id})},a.registerConfirm=function(){var d={patientId:a.patient.id,isAppointment:1,registerDate:i,deptId:a.doctor.deptId,
doctorId:h,clinicCategoryCode:a.doctor.clinicCategoryCode,amount:a.doctor.amount,payStatus:"0"};b.post("/register/registrations/registration",d).success(function(a){c.go("paymentSelect",{orderNum:a.orderNum})}).error(function(a){g.showShortBottom(a)})},a.$on("$ionicView.beforeLeave",function(){null!==k&&k.close()})};b.$inject=["$scope","$http","$state","$stateParams","$ionicPopup","$ionicHistory","$cordovaToast"];var c=function(a){a.state("registerConfirmAppt",{url:"/register/registerConfirmAppt/:doctorId/:date/:memberId",templateUrl:"modules/register/registerConfirmAppt.html",controller:b})};c.$inject=["$stateProvider"],a.config(c)}(angular.module("isj")),function(a){var b=function(a,b,c,d,e,f,g,h){var i=d.doctorId,j=d.date;a.todayDisplay=j.substring(0,4)+"年"+j.substring(5,7)+"月"+j.substring(8,10)+"日"+j.substring(10,16),a.isChecked=!0,b.get("/register/agreement").success(function(b){a.agreement=b,angular.isUndefined(d.memberId)||""===d.memberId}).error(function(a){h.showShortBottom(a)});var k=function(){b.get("/user/familyMembers/familyMember",{params:{memberId:d.memberId}}).success(function(b){a.patient=b}).error(function(a){h.showShortBottom(a)})};k(),b.get("/dataBase/familyMenberTypes").success(function(b){a.memberTypes=b}).error(function(a){h.showShortBottom(a)}),b.get("/register/doctor",{params:{id:i,date:j}}).success(function(b){a.doctor=b}).error(function(a){h.showShortBottom(a)}),b.get("/register/todayPrompt").success(function(b){a.prompt=b}).error(function(a){h.showShortBottom(a)}),a.goBack=function(){var a=0;for(var b in g.viewHistory().views){var c=g.viewHistory().views[b];if("registerDoctorTimeSelect"===c.stateName){a=c.index;break}}g.goBack(a-g.currentView().index)};var l=null;a.showAgreement=function(){l=e.show({template:'<div style="padding: 3px;font-size:15px">'+a.agreement+"</div>",title:"挂号须知",cssClass:"agreement-popup",buttons:[{text:"确定",type:"positive",onTap:function(a){a.preventDefault(),l.close()}}]})},a.selectMember=function(){c.go("familyMemberSelect",{skipId:"registerConfirmToday",doctorId:i,memberId:a.patient.id})},a.registerConfirm=function(){var d={patientId:a.patient.id,isAppointment:0,registerDate:j,deptId:a.doctor.deptId,doctorId:i,clinicCategoryCode:a.doctor.clinicCategoryCode,amount:a.doctor.amount,payStatus:"0"};b.post("/register/registrations/registration",d).success(function(a){c.go("paymentSelect",{orderNum:a.orderNum})}).error(function(a){h.showShortBottom(a)})},a.$on("$ionicView.beforeLeave",function(){null!==l&&l.close()})};b.$inject=["$scope","$http","$state","$stateParams","$ionicPopup","$filter","$ionicHistory","$cordovaToast"];var c=function(a){a.state("registerConfirmToday",{url:"/register/registerConfirmToday/:doctorId/:date/:memberId",templateUrl:"modules/register/registerConfirmToday.html",controller:b})};c.$inject=["$stateProvider"],a.config(c)}(angular.module("isj")),function(a){var b=function(a,b,c,d,e,f,g,h,i){a.hideSearch=!0,a.daySelected="",a.districtId="1",a.dataPicker={isShow:!0},a.leftIconIsShow=!1,a.rightIconIsShow=!0,a.rightSlide=function(){i.scrollBy(357,0,!0)},a.leftSlide=function(){i.scrollBy(-357,0,!0)},a.scroll=function(){i.getScrollPosition().left>1?a.leftIconIsShow=!0:a.leftIconIsShow=!1,i.getScrollPosition().left>=1120?a.rightIconIsShow=!1:a.rightIconIsShow=!0,a.$apply(a.leftIconIsShow),a.$apply(a.rightIconIsShow),x()},a.districtColor=new Map;var j=["district-icon-positive","district-icon-balanced","district-icon-royal","district-icon-calm","district-icon-assertive"],k=0,l=30,m=["周日","周一","周二","周三","周四","周五","周六"],n=function(a,b){return a=+a+864e5*b,a=new Date(a)},o=function(c,d){b.get("/doctors/photo",{params:{doctorId:c,index:d}}).success(function(b,c,d,e){a.doctors[e.params.index].photo=b}).error(function(b,c,d,e){a.doctors[e.params.index].photo=""})};a.major=d.major;var p=function(){var c="",f="";""!==a.daySelected?(c=a.daySelected,f=a.daySelected):(c=e("date")(n(new Date,1),"yyyy-MM-dd"),f=e("date")(n(new Date,60),"yyyy-MM-dd"));var g={districtId:d.districtId,subjectId:d.subjectId,major:a.major,startDate:c,endDate:f};b.get("/schedule/doctors",{params:g}).success(function(b){a.doctors=b;for(var c,d=0;d<b.length;d++)a.doctors[d].district=a.doctors[d].district.substring(0,2),c=b[d].districtId,d>0?b[d].districtId!==b[d-1].districtId&&(k++,a.districtColor.set(c,j[k-1])):(k=1,a.districtColor.set(c,j[k-1])),o(b[d].id,d)}).error(function(a){h.showShortBottom(a)})};a.districtClk=function(b){a.districtId=b,"1"===b&&(a.dataPicker.isShow=!0,a.daySelected=e("date")(n(new Date,1),"yyyy-MM-dd")),"2"===b&&(a.dataPicker.isShow=!1,a.daySelected="")};var q=function(a){return{date:e("date")(a,"yyyy-MM-dd"),month:a.getMonth()+1,day:a.getDate(),week:m[a.getDay()]}},r=function(a){for(var b=[],c=0;l>c;c++)if(0===c)b[c]=q(a);else{if(a.getTime()>n(new Date,29).getTime())break;a=n(new Date(b[c-1].date),1),b[c]=q(a)}if(b.length<l){for(var d=[],e=0;e<l-b.length;e++)d[e]=q(n(new Date(b[0].date),b.length-l+e));for(var f=0,g=l-b.length;l>g;g++)d[g]=b[f],f++;b=d}return b};a.selectDays=r(n(new Date,1)),a.$on("$ionicView.beforeEnter",function(){p(),a.leftIconIsShow=!1,a.rightIconIsShow=!0,a.daySelected=e("date")(n(new Date,1),"yyyy-MM-dd")});var s,t,u,v=a.selectDays[0].month,w=a.selectDays[0].day,x=function(){1===v||3===v||5===v||7===v||8===v||10===v||12===v?(s=31,t=s-w):2===w?(s=28,t=s-w):(s=30,t=s-w),u=51*t,i.getScrollPosition().left>u?a.selectDays[0].month===v&&(a.selectDays[0].month=v+1):a.selectDays[0].month=v};a.dayClk=function(b,c){a.daySelected=c,a.selectDays[0].month=parseInt(c.substring(5,7)),p()};var y={callback:function(b){a.selectDays=r(new Date(b)),a.daySelected=e("date")(b,"yyyy-MM-dd"),p()},from:n(new Date,1),to:n(new Date,30),inputDate:new Date,howTodayButton:!1};a.dayPicker=function(){""!==a.daySelected?y.inputDate=new Date(a.daySelected):y.inputDate=new Date,g.openDatePicker(y)},a.searchClk=function(){a.hideSearch=!a.hideSearch,a.hideSearch||f(function(){document.getElementById("registerDoctorDateSelect_search").focus()},50)},a.doSearch=function(){p()},a.photoClk=function(a,b){b.stopPropagation(),c.go("doctorIntroductionView",{doctorId:a,type:"0"})},a.doctorClk=function(b,d){d>0&&(a.dataPicker.isShow||(a.daySelected=""),c.go("registerDoctorTimeSelect",{doctorId:b,date:a.daySelected,type:"2"}))}};b.$inject=["$scope","$http","$state","$stateParams","$filter","$timeout","ionicDatePicker","$cordovaToast","$ionicScrollDelegate"];var c=function(a){a.state("registerDoctorDateSelect",{url:"/register/registerDoctorDateSelect/:districtId/:subjectId/:major",templateUrl:"modules/register/registerDoctorDateSelect.html",controller:b})};c.$inject=["$stateProvider"],a.config(c)}(angular.module("isj")),function(a){var b=function(a,b,c,d,e,f,g,h,i){var j=7,k=["周日","周一","周二","周三","周四","周五","周六"];a.selectDays=[],a.allDays=[];var l={},m=function(a,b){return a=+a+864e5*b,a=new Date(a)};a.timeTypes=[];var n=function(c){b.get("/schedule/times",{params:{doctorId:d.doctorId,date:c}}).success(function(b){if(b.length%3!==0)for(var c=3-b.length%3,d=0;c>d;d++)b.push({time:""});a.times=b}).error(function(a){h.showShortBottom(a)})};b.get("/doctors/"+d.doctorId).success(function(c){a.doctor=c,b.get("/doctors/photo",{params:{doctorId:a.doctor.id}}).success(function(b){a.photo=b}).error(function(){a.photo=""})}).error(function(a){h.showShortBottom(a)});var o=function(a,b){return{date:e("date")(a,"yyyy-MM-dd"),month:a.getMonth()+1,day:a.getDate(),week:k[a.getDay()],data:b}},p=function(){for(var b=a.selectDays.length;j>b;b++)a.selectDays[b]={date:"",month:"",day:"",week:""}};a.daySelected=d.date,a.dataSelected={};var q=null;null!==a.daySelected&&""!==a.daySelected?b.get("/schedule/dates",{params:{doctorId:d.doctorId,date:a.daySelected}}).success(function(b){q=new Date(a.daySelected),a.allDays=[{date:a.daySelected,data:b[0]}],a.selectDays[0]=o(q,b[0]),p(),a.dataSelected=a.allDays[0].data}).error(function(a){h.showShortBottom(a)}):b.get("/schedule/dates",{params:{doctorId:d.doctorId}}).success(function(b){a.allDays=b;for(var c=0;c<b.length&&c!==j;c++)q=new Date(b[c].date),a.selectDays[c]=o(q,b[c]);if(a.selectDays.length<7&&p(),a.selectDays.length>0&&(a.daySelected=b[0].date,a.dataSelected=b[0]),a.allDays.length>7){var d=[],f=0;for(q=new Date(a.allDays[0].date);;)if(q.getTime()!==new Date(a.allDays[f].date).getTime()?d.push(q):f++,q=m(q,1),f===a.allDays.length-1)break;l={callback:function(b){a.daySelected=e("date")(b,"yyyy-MM-dd"),a.selectDays=[];for(var c=0,d=0;d<a.allDays.length&&((0===c&&a.daySelected===a.allDays[d].date||c>0)&&(a.selectDays[c]=o(new Date(a.allDays[d].date),a.allDays[d]),c++),c!==j);d++);p(),a.dataSelected=a.selectDays[0].data},from:new Date(a.allDays[0].date),to:new Date(a.allDays[a.allDays.length-1].date),inputDate:new Date(a.daySelected),disabledDates:d,howTodayButton:!1}}}).error(function(a){h.showShortBottom(a)}),a.$on("$ionicView.afterEnter",function(){n(a.daySelected)}),a.photoClk=function(a){c.go("doctorIntroductionView",{doctorId:a,type:"0"})},a.dayClk=function(b,c){""!==c&&a.daySelected!==c&&(a.daySelected=c,n(a.daySelected),a.dataSelected=a.selectDays[b].data)},a.dayPicker=function(){l.inputDate=new Date(a.daySelected),g.openDatePicker(l)},a.timeClk=function(e,f){if(null!==a.daySelected&&""!==a.daySelected&&f>0){var g=i.hasToken();g?b.get("/user/tokenVal").success(function(){"1"===d.type?c.go("registerConfirmToday",{doctorId:d.doctorId,date:a.daySelected+" "+e}):c.go("registerConfirmAppt",{doctorId:d.doctorId,date:a.daySelected+" "+e})}).error(function(a,b){401!==b?h.showShortBottom(a):(i.clearToken(),c.go("login"))}):c.go("login")}}};b.$inject=["$scope","$http","$state","$stateParams","$filter","$timeout","ionicDatePicker","$cordovaToast","userService"];var c=function(a){a.state("registerDoctorTimeSelect",{url:"/register/registerDoctorTimeSelect/:doctorId/:date/:type",templateUrl:"modules/register/registerDoctorTimeSelect.html",controller:b})};c.$inject=["$stateProvider"],a.config(c)}(angular.module("isj")),function(a){var b=function(a,b,c,d,e,f,g){a.hideSearch=!0;var h=function(c,d){b.get("/doctors/photo",{params:{doctorId:c,index:d}}).success(function(b,c,d,e){a.doctors[e.params.index].photo=b}).error(function(b,c,d,e){a.doctors[e.params.index].photo=""})};a.districtColor=new Map;var i=["district-icon-positive","district-icon-balanced","district-icon-royal","district-icon-calm","district-icon-assertive"],j=0,k=e("date")(new Date,"yyyy-MM-dd");a.major=d.major;var l=function(){var c={districtId:d.districtId,subjectId:d.subjectId,major:a.major,startDate:k,endDate:k};b.get("/schedule/doctors",{params:c}).success(function(b){a.doctors=b;for(var c,d=0;d<b.length;d++)a.doctors[d].district=a.doctors[d].district.substring(0,2),c=b[d].districtId,d>0?b[d].districtId!==b[d-1].districtId&&(j++,a.districtColor.set(c,i[j-1])):(j=1,a.districtColor.set(c,i[j-1])),h(b[d].id,d)}).error(function(a){g.showShortBottom(a)})};a.$on("$ionicView.beforeEnter",function(){l()}),a.searchClk=function(){a.hideSearch=!a.hideSearch,a.hideSearch||f(function(){document.getElementById("registerTodayDoctorList_search").focus()},50)},a.doSearch=function(){l()},a.photoClk=function(a,b){b.stopPropagation(),c.go("doctorIntroductionView",{doctorId:a,type:"0"})},a.doctorClk=function(a,b){b>0&&c.go("registerDoctorTimeSelect",{doctorId:a,date:k,type:"1"})}};b.$inject=["$scope","$http","$state","$stateParams","$filter","$timeout","$cordovaToast"];var c=function(a){a.state("registerTodayDoctorList",{url:"/register/registerTodayDoctorList/:districtId/:subjectId/:major",templateUrl:"modules/register/registerTodayDoctorList.html",controller:b})};c.$inject=["$stateProvider"],a.config(c)}(angular.module("isj")),function(a){var b=function(a,b,c,d){cordova.getAppVersion.getVersionNumber(function(b){a.versionNumber=b}),cordova.getAppVersion.getVersionCode(function(b){a.versionCode=b}),a.$on("$ionicView.beforeEnter",function(){a.isLogin=d.hasToken(),a.isLogin&&b.get("/user/tokenVal").error(function(b,c){401===c&&(d.clearToken(),a.isLogin=!1)})}),b.get("/service/phone").success(function(b){a.servicePhone=b}),a.itemRouter=function(a){c.go(a)}};b.$inject=["$scope","$http","$state","userService"];var c=function(a){a.state("settingAppAbout",{url:"/setting/appAbout",templateUrl:"modules/setting/appAbout.html",controller:b})};c.$inject=["$stateProvider"],a.config(c)}(angular.module("isj")),function(a){var b=function(a,b,c,d,e){a.$on("$ionicView.beforeEnter",function(){a.isSubmit=!1,a.input={nowPassword:"",newPassword:"",confirmPassword:""}});var f=function(){if(""===a.input.nowPassword)return e.showShortBottom("当前密码不能为空"),!1;if(""===a.input.newPassword)return e.showShortBottom("新密码不能为空"),!1;if(""===a.input.confirmPassword)return e.showShortBottom("确认新密码不能为空"),!1;if(a.input.newPassword!==a.input.confirmPassword)return e.showShortBottom("新密码和确认新密码不一致"),!1;if(a.input.nowPassword.length<6||a.input.nowPassword.length>20)return e.showShortBottom("当前密码必须6-20个字符"),!1;if(a.input.newPassword.length<6||a.input.newPassword.length>20)return e.showShortBottom("新密码必须6-20个字符"),!1;if(a.input.confirmPassword.length<6||a.input.confirmPassword.length>20)return e.showShortBottom("确认新密码必须6-20个字符"),!1;var b=/^[0-9a-zA-Z_]+$/;return b.test(a.input.nowPassword)?b.test(a.input.newPassword)?b.test(a.input.confirmPassword)?!0:(e.showShortBottom("确认新密码必须由英文字母、数字、下划线组成"),!1):(e.showShortBottom("新密码必须由英文字母、数字、下划线组成"),!1):(e.showShortBottom("当前密码必须由英文字母、数字、下划线组成"),!1)};a.change=function(){a.isSubmit=!0,f()?(a.input.category="1",c.put("/permission/account",a.input).success(function(){d.goBack(),e.showShortBottom("密码修改成功")}).error(function(b){a.isSubmit=!1,e.showShortBottom(b)})):a.isSubmit=!1}};b.$inject=["$scope","$state","$http","$ionicHistory","$cordovaToast"];var c=function(a){a.state("settingChangePassword",{url:"/setting/changePassword",templateUrl:"modules/setting/changePassword.html",controller:b})};c.$inject=["$stateProvider"],a.config(c)}(angular.module("isj")),function(a){var b=function(a,b,c,d){a.$on("$ionicView.beforeEnter",function(){a.isSubmit=!1,a.input={opinion:""}}),a.opinionSubmit=function(){""===a.input.opinion?d.showShortBottom("请填写反馈内容"):(a.isSubmit=!0,b.post("/service/userOpinion",{opinion:a.input.opinion}).success(function(){c.goBack(),d.showShortBottom("意见提交成功，谢谢您的支持")}).error(function(b){a.isSubmit=!1,d.showShortBottom(b)}))}};b.$inject=["$scope","$http","$ionicHistory","$cordovaToast"];var c=function(a){a.state("settingFeedback",{url:"/setting/feedback",templateUrl:"modules/setting/feedback.html",controller:b})};c.$inject=["$stateProvider"],a.config(c)}(angular.module("isj")),function(a){var b=function(a,b,c,d,e){a.$on("$ionicView.beforeEnter",function(){a.isLogin=e.hasToken(),a.isLogin&&c.get("/user/tokenVal").error(function(b,c){401===c&&(e.clearToken(),a.isLogin=!1)})}),a.$on("$ionicView.beforeLeave",function(){null!==f&&f.close()}),a.itemRouter=function(a){b.go(a)};var f=null;a.quit=function(){f=d.confirm({title:"提示",template:"您确定要退出当前账户?",cssClass:"confirm-popup",cancelText:"取消",okText:"确定"}),f.then(function(a){a&&(e.clearToken(),b.go("login",{skipId:"tab.personal"}))})}};b.$inject=["$scope","$state","$http","$ionicPopup","userService"];var c=function(a){a.state("settingIndex",{url:"/setting/settingIndex",templateUrl:"modules/setting/settingIndex.html",controller:b})};c.$inject=["$stateProvider"],a.config(c)}(angular.module("isj")),function(a){var b=function(a,b){cordova.getAppVersion.getVersionCode(function(c){b.get("/app/versions/"+c).success(function(b){a.description=b.note})})};b.$inject=["$scope","$http"];var c=function(a){a.state("settingVersionDescription",{url:"/setting/versionDescription",templateUrl:"modules/setting/versionDescription.html",controller:b})};c.$inject=["$stateProvider"],a.config(c)}(angular.module("isj")),function(a){var b=function(a,b,c,d,e,f,g,h){a.hideSearch=!0,a.type=d.type,a.subjectId="",a.$on("$ionicView.beforeEnter",function(){("1"===a.type||"2"===a.type)&&b.get("/register/agreement").success(function(b){a.agreement=b,a.showAgreement()}).error(function(a){f.showShortBottom(a)})}),a.$on("$ionicView.beforeLeave",function(){null!==j&&j.close()});var i=function(){b.get("/subjects",{params:{districtId:a.districtId}}).success(function(b){a.subjects=b,a.subjectId=b[0].id,angular.isUndefined(b[0].subjects)||0===b[0].subjects.length?a.subjectRights=[b[0]]:a.subjectRights=b[0].subjects}).error(function(a){f.showShortBottom(a)})};b.get("/organization/districts").success(function(b){a.districts=[];for(var c=0;c<b.length;c++)a.districts.push(b[c]);a.districtId=b[0].id,i()}).error(function(a){f.showShortBottom(a)}),a.searchClk=function(){a.hideSearch=!a.hideSearch,a.hideSearch||e(function(){document.getElementById("subjectSelect_search_"+a.type).focus()},50)},a.doSearch=function(){angular.isUndefined(a.major)||""===a.major||("1"===d.type?(c.go("registerTodayDoctorList",{districtId:a.districtId,major:a.major}),a.type="0"):"2"===d.type&&(c.go("registerDoctorDateSelect",{districtId:a.districtId,major:a.major}),a.type="0"))},a.districtClk=function(b){a.districtId!==b&&(a.districtId=b,a.subjectRights="",i())},a.subjectLeftClk=function(b){if(a.subjectId!==b){a.subjectId=b;for(var c=0;c<a.subjects.length;c++)if(a.subjects[c].id===b){angular.isUndefined(a.subjects[c].subjects)||0===a.subjects[c].subjects.length?a.subjectRights=[a.subjects[c]]:a.subjectRights=a.subjects[c].subjects;break}}};var j=null;a.showAgreement=function(){j=g.show({template:'<div style="padding: 3px;font-size:15px">'+a.agreement+"</div>",title:"挂号须知",cssClass:"agreement-popup",buttons:[{text:"不同意",onTap:function(a){a.preventDefault(),j.close(),h.goBack()}},{text:"同意",type:"button-positive",onTap:function(a){a.preventDefault(),j.close()}}]})},a.subjectRightClk=function(b){"1"===d.type?(c.go("registerTodayDoctorList",{districtId:a.districtId,subjectId:b}),a.type="0"):"2"===d.type&&(c.go("registerDoctorDateSelect",{districtId:a.districtId,subjectId:b}),a.type="0")}};b.$inject=["$scope","$http","$state","$stateParams","$timeout","$cordovaToast","$ionicPopup","$ionicHistory"];var c=function(a){a.state("subjectSelect",{url:"/subject/subjectSelect/:type",templateUrl:"modules/subject/subjectSelect.html",controller:b})};c.$inject=["$stateProvider"],a.config(c)}(angular.module("isj")),function(a){var b=function(a,b,c,d,e,f){a.$on("$ionicView.beforeEnter",function(){b.clearHistory()}),a.carouselImages=[{name:"预约挂号",url:"./assets/images/ad1.jpg"},{name:"在线缴费",url:"./assets/images/ad2.png"},{name:"查看报告",url:"./assets/images/ad3.png"}];var g=function(a,b){"subjectSelect"===a?c.go(a,{type:b}):c.go(a)};a.itemRouter=function(a,b){var h=!0;"medicalReportList"===a||"onlinePaymentList"===a?(h=e.hasToken(),h?d.get("/user/tokenVal").success(function(){g(a,b)}).error(function(a,b){401!==b?f.showShortBottom(a):(e.clearToken(),c.go("login"))}):c.go("login")):g(a,b)}};b.$inject=["$scope","$ionicHistory","$state","$http","userService","$cordovaToast"];var c=function(a){a.state("tab.main",{url:"/main",views:{"tab-main":{templateUrl:"modules/tab/main/main.html",controller:b}}})};c.$inject=["$stateProvider"],a.config(c)}(angular.module("isj")),function(a){var b=function(a,b,c){a.$on("$ionicView.beforeEnter",function(){b.get("/messages").success(function(b){a.messages=b}).error(function(a){c.showShortBottom(a)})})};b.$inject=["$scope","$http","$cordovaToast"];var c=function(a){a.state("tab.message",{url:"/message",views:{"tab-message":{templateUrl:"modules/tab/message/message.html",controller:b}}})};c.$inject=["$stateProvider"],a.config(c)}(angular.module("isj")),function(a){var b=function(a,b,c,d,e){a.$on("$ionicView.beforeEnter",function(){a.isLogin=e.hasToken(),b.get("/user/userInfo").success(function(b){a.isLogin=!0,a.user=b,null!==a.user.phone&&""!==a.user.phone&&(a.user.phone=a.user.phone.substring(0,3)+"****"+a.user.phone.substring(7,11))}).error(function(b,c){401!==c?d.showShortBottom(b):a.isLogin=!1}),b.get("/user/familyMembers/count").success(function(b){a.memberCount=b}).error(function(a){401!==status&&d.showShortBottom(a)}),b.get("/user/collectionDoctors/count").success(function(b){a.doctorCount=b}).error(function(a){401!==status&&d.showShortBottom(a)})}),a.itemRouter=function(a){var f=!0;"settingIndex"!==a?(f=e.hasToken(),f?b.get("/user/tokenVal").success(function(){c.go(a)}).error(function(a,b){401!==b?d.showShortBottom(a):(e.clearToken(),c.go("login"))}):c.go("login")):c.go(a)},a.login=function(){c.go("login")}};b.$inject=["$scope","$http","$state","$cordovaToast","userService"];var c=function(a){a.state("tab.personal",{url:"/personal",views:{"tab-personal":{templateUrl:"modules/tab/personal/personal.html",controller:b}}})};c.$inject=["$stateProvider"],a.config(c)}(angular.module("isj")),function(a){var b=function(a,b,c,d,e){d.get("/dataBase/familyMenberTypes").success(function(b){a.memberTypes=b}).error(function(a){e.showShortBottom(a)});var f=function(){d.get("/register/registrations",{params:{memberId:c.memberId}}).success(function(b){a.registrations=b}).error(function(a){e.showShortBottom(a)})};a.$on("$ionicView.beforeEnter",function(){d.get("/user/familyMembers/familyMember",{params:{memberId:c.memberId}}).success(function(b){a.patient=b}).error(function(a){e.showShortBottom(a)}),f()}),a.selectMember=function(){b.go("familyMemberSelect",{skipId:"tab.registration",memberId:a.patient.id})},a.registrationClk=function(c){b.go("registrationView",{registrationId:c,memberId:a.patient.id})}};b.$inject=["$scope","$state","$stateParams","$http","$cordovaToast"];var c=function(a){a.state("tab.registration",{url:"/registration/:memberId",views:{"tab-registration":{templateUrl:"modules/tab/registration/registration.html",controller:b}}})};c.$inject=["$stateProvider"],a.config(c)}(angular.module("isj")),function(a){var b=function(a,b,c,d){c.get("/register/visitAndBacknumDesc").success(function(b){a.description=b}).error(function(a){d.showShortBottom(a)}),a.medicalGuideClk=function(){b.go("medicalGuide")}};b.$inject=["$scope","$state","$http","$cordovaToast"];var c=function(a){a.state("registrationIllustration",{url:"/registration/registrationIllustration",templateUrl:"modules/tab/registration/registrationIllustration.html",controller:b})};c.$inject=["$stateProvider"],a.config(c)}(angular.module("isj")),function(a){var b=function(a,b,c,d,e,f,g){b.get("/dataBase/familyMenberTypes").success(function(b){a.memberTypes=b}).error(function(a){g.showShortBottom(a)}),a.$on("$ionicView.beforeEnter",function(){b.get("/register/registrations/registration",{params:{id:d.registrationId}}).success(function(b){a.registration=b,a.registration.registerDate.length<=11?a.visitTime="请到分诊台咨询":a.visitTime=a.registration.registerDate}).error(function(a){g.showShortBottom(a)}),b.get("/user/familyMembers/familyMember",{params:{memberId:d.memberId}}).success(function(b){a.patient=b}).error(function(a){g.showShortBottom(a)})}),a.$on("$ionicView.beforeLeave",function(){null!==h&&h.close()}),a.illustrationClk=function(){c.go("registrationIllustration")},a.registrationPay=function(){c.go("paymentSelect",{orderNum:a.registration.orderNum})};var h=null;a.registrationBack=function(){h=e.confirm({title:"提示",template:"您确定要退号吗?",cssClass:"confirm-popup",cancelText:"取消",okText:"确定"}),h.then(function(c){c&&b.put("/register/registrations/registration/back",{registrationId:a.registration.id}).success(function(){f.goBack(),g.showShortBottom("退号成功")}).error(function(a){g.showShortBottom(a)})})}};b.$inject=["$scope","$http","$state","$stateParams","$ionicPopup","$ionicHistory","$cordovaToast"];var c=function(a){a.state("registrationView",{url:"/registration/registrationView/:registrationId/:memberId",templateUrl:"modules/tab/registration/registrationView.html",controller:b})};c.$inject=["$stateProvider"],a.config(c)}(angular.module("isj")),function(a){a.config(["$ionicConfigProvider",function(a){a.platform.ios.tabs.style("standard"),a.platform.ios.tabs.position("bottom"),a.platform.android.tabs.style("standard"),a.platform.android.tabs.position("bottom"),a.platform.ios.navBar.alignTitle("center"),a.platform.android.navBar.alignTitle("center"),a.platform.ios.backButton.previousTitleText("").icon("ion-ios-arrow-thin-left"),a.platform.android.backButton.previousTitleText("").icon("ion-android-arrow-back"),a.platform.ios.views.transition("ios"),a.platform.android.views.transition("android"),a.form.checkbox("circle")}]);var b=function(a,b,c,d,e){a.tabRouter=function(a){var f=!0;"tab.message"===a||"tab.registration"===a?(f=e.hasToken(),f?b.get("/user/tokenVal").success(function(){c.go(a)}).error(function(a,b){401!==b?d.showShortBottom(a):(e.clearToken(),c.go("login"))}):c.go("login")):c.go(a)}};b.$inject=["$scope","$http","$state","$cordovaToast","userService"];var c=function(a){a.state("tab",{url:"/tab","abstract":!0,templateUrl:"modules/tab/tabs.html",controller:b})};c.$inject=["$stateProvider"],a.config(c)}(angular.module("isj")),angular.module("isj").run(["$templateCache",function(a){a.put("modules/doctorIntroduction/doctorIntroductionList.html",'<ion-view> <isj-spinner is-show="$root.inProcess" is-refresh="$root.refreshProcess"></isj-spinner> <ion-header-bar class="bar-light"> <isj-back-button></isj-back-button> <div class="title">{{title}}</div> </ion-header-bar> <ion-header-bar class="bar-subheader bar-light doctorIntroductionList-subheader"> <div ng-if="searchName == null || searchName == \'\'" ng-click="placeholderClk()" class="search-placeholder"> <i class="icon ion-ios-search-strong positive"></i> <span>搜索医生</span> </div> <form ng-submit="doSearch()"> <label class="item-input-wrapper"> <input type="search" id="doctorIntroduction_search" ng-model="searchName"> </label> </form> </ion-header-bar> <ion-content class="has-header has-subheader doctorIntroductionList-content"> <ul class="list"> <li class="item item-avatar-left" collection-repeat="introduction in introductions" ng-click="viewIntroduction(introduction.id)"> <img ng-if="(introduction.photo == null || introduction.photo == \'\') && introduction.sexCode == \'1\'" src="./assets/images/doctor_man.png" class="photo"> <img ng-if="(introduction.photo == null || introduction.photo == \'\') && introduction.sexCode == \'0\'" src="./assets/images/doctor_woman.png" class="photo"> <img ng-if="introduction.photo != null && introduction.photo != \'\'" ng-src="{{introduction.photo}}" class="photo"> <div class="authenticate"> <img src="./assets/images/isapprove.png"> </div> <div> <h2 class="name">{{introduction.name}}</h2> <p class="professional">{{introduction.title}}</p> </div> <p>出诊地点：{{introduction.dept}}（{{introduction.district}}）</p> <p class="dept">擅长：{{introduction.skill===\'\'?\'暂无\':introduction.skill}}</p> </li> </ul> <ion-infinite-scroll ng-if="vm.moreData" on-infinite="vm.loadMore()" distance="2%"></ion-infinite-scroll> </ion-content> </ion-view>'),a.put("modules/doctorIntroduction/doctorIntroductionView.html",'<ion-view> <isj-spinner is-show="$root.inProcess" is-refresh="$root.refreshProcess"></isj-spinner> <ion-header-bar class="bar-light doctorIntroductionView-title"> <isj-back-button></isj-back-button> <div class="title"> 医生主页 </div> <a ng-class="{false:\'ion-ios-star-outline\',true:\'ion-ios-star\'}[isCollection]" class="button button-clear icon positive" ng-click="collectionDoctor()"></a> </ion-header-bar> <ion-content ng-class="{false: \'no-footer\'}[type]" class="has-header has-footer doctorIntroductionView-content"> <ul class="list"> <li class="item item-avatar-left"> <img ng-if="(introduction.photo == null || introduction.photo == \'\') && introduction.sexCode == \'1\'" src="./assets/images/doctor_man.png" class="photo"> <img ng-if="(introduction.photo == null || introduction.photo == \'\') && introduction.sexCode == \'0\'" src="./assets/images/doctor_woman.png" class="photo"> <img ng-if="introduction.photo != null && introduction.photo != \'\'" ng-src="{{introduction.photo}}" class="photo"> <div> <h2 class="name">{{introduction.name}}</h2> <p class="professional">{{introduction.title}}</p> </div> <p>{{introduction.hospital}}</p> <p class="dept">{{introduction.dept}}（{{introduction.district}}）</p> </li> <li class="item introduction-content item-splitLine"> <h2> <i class="icon ion-ios-medkit-outline positive"></i> 擅长 </h2> <p>{{introduction.skill}}</p> </li> <li class="item introduction-content"> <h2> <i class="icon ion-ios-chatboxes-outline positive"></i> 简介 </h2> <p>{{introduction.summary}}</p> </li> </ul> </ion-content> <ion-footer-bar ng-class="{false: \'no-operation\'}[type]" class="doctorIntroductionView-footer"> <button class="button positive-bg doctorIntroduction-register" ng-click="register()">挂号</button> </ion-footer-bar> </ion-view>'),a.put("modules/familyMember/familyMemberAdd.html",'<ion-view> <isj-spinner is-show="$root.inProcess" is-refresh="$root.refreshProcess"></isj-spinner> <ion-header-bar class="bar-light"> <isj-back-button></isj-back-button> <div class="title">选择关系</div> </ion-header-bar> <ion-content class="has-header content-gray familyMemberAdd-content"> <ul> <li ng-repeat="memberType in memberTypes"> <div ng-click="medicalCardEdit(memberType.code)"> <span><img ng-src="{{memberType.img}}"></span> <span class="name">{{memberType.name}}</span> </div> </li> </ul> </ion-content> </ion-view>'),a.put("modules/familyMember/familyMemberEdit.html",'<ion-view> <isj-spinner is-show="$root.inProcess" is-refresh="$root.refreshProcess"></isj-spinner> <ion-header-bar class="bar-light"> <isj-back-button></isj-back-button> <div class="title">健康卡</div> <button class="button button-clear button-positive">保存</button> </ion-header-bar> <ion-content class="has-header content-gray familyMemberEdit-content"> <div class="list"> <label class="item item-input"> <span class="input-label photo-label"> <img ng-src="{{member.img}}" class="photo"> </span> {{member.member}} </label> <label class="item item-input"> <span class="input-label">姓名</span> <input type="text" placeholder="必填" ng-model="member.name"> </label> <label class="item item-input"> <span class="input-label">性别</span> <span ng-if="hasSex">{{member.sex}}</span> <select ng-if="!hasSex" ng-model="member.sexCode" ng-options="node.code as node.name for node in sexs"></select> </label> <label class="item item-input"> <span class="input-label">身份证号</span> <input type="text" placeholder="必填" ng-model="member.idCard"> </label> <label class="item item-input"> <span class="input-label">手机号</span> <input type="number" placeholder="必填" ng-model="member.phone"> </label> </div> <div ng-if="!isAdd" class="operation"> <button class="button button-assertive" ng-disabled="isSubmit">删除该成员</button> </div> <div class="visits"> <ion-checkbox class="positive" ng-model="member.patientVisits">设为默认就诊人</ion-checkbox> </div> </ion-content> </ion-view>'),a.put("modules/familyMember/familyMemberList.html",'<ion-view> <isj-spinner is-show="$root.inProcess" is-refresh="$root.refreshProcess"></isj-spinner> <ion-header-bar class="bar-light"> <isj-back-button></isj-back-button> <div class="title">家庭成员</div> <button class="button button-clear button-positive" ng-click="familyMemberAdd()">添加</button> </ion-header-bar> <ion-header-bar class="bar-subheader bar-light familyMemberList-subheader"> <div class="title">已添加{{members.length}}位家庭成员，还可以添加{{9-members.length}}位</div> </ion-header-bar> <ion-content class="has-header has-subheader content-gray familyMemberList-content"> <ul class="list"> <li ng-repeat="member in members" class="item item-avatar-left" ng-click="medicalCardEdit()"> <img ng-if="member.memberCode == \'00\' && member.sexCode == \'1\'" src="./assets/images/pic_man.png" class="photo"> <img ng-if="member.memberCode == \'00\' && member.sexCode == \'0\'" src="./assets/images/pic_woman.png" class="photo"> <img ng-if="member.memberCode != \'00\'" ng-src="{{memberTypes[member.memberCode].img}}" class="photo"> <div class="relationship-name"> <span ng-if="member.memberCode == \'00\'">我</span> <span ng-if="member.memberCode != \'00\'">{{memberTypes[member.memberCode].name}}</span> </div> <div class="name-sex-age"> <h2 class="name">{{member.name}}</h2> <img ng-if="member.sexCode == \'1\'" src="./assets/images/man.png" class="sex"> <img ng-if="member.sexCode == \'0\'" src="./assets/images/woman.png" class="sex"> <p class="age">{{member.age}}</p> </div> <p> <img ng-if="member.patientVisits == \'1\'" src="./assets/images/id_s.png" class="photo-card"> <img ng-if="member.patientVisits == \'0\'" src="./assets/images/id_d.png" class="photo-card"> <span>{{member.idCard}}</span> </p> <p> <img ng-if="member.patientVisits == \'1\'" src="./assets/images/telephone_s.png" class="photo-tel"> <img ng-if="member.patientVisits == \'0\'" src="./assets/images/telephone_d.png" class="photo-tel"> <span>{{member.phone}}</span> </p> <img ng-if="member.patientVisits == \'1\'" src="./assets/images/client.png" class="patient-visits"> </li> </ul> </ion-content> </ion-view>'),
a.put("modules/familyMember/familyMemberSelect.html",'<ion-view> <isj-spinner is-show="$root.inProcess" is-refresh="$root.refreshProcess"></isj-spinner> <ion-header-bar class="bar-light"> <isj-back-button></isj-back-button> <div class="title">选择就诊人</div> <a class="button button-clear positive" ng-click="memberManage()">管理</a> </ion-header-bar> <ion-content class="has-header content-gray familyMemberSelect-content"> <ul> <li ng-repeat="member in members" ng-click="memberSelect(member.id)"> <div> <span> <img ng-if="member.memberCode == \'00\' && member.sexCode == \'1\'" src="./assets/images/pic_man.png"> <img ng-if="member.memberCode == \'00\' && member.sexCode == \'0\'" src="./assets/images/pic_woman.png"> <img ng-if="member.memberCode != \'00\'" ng-src="{{memberTypes[member.memberCode].img}}"> </span> <span class="name"> {{member.member}}-{{member.name}} </span> <i ng-if="memberId == member.id" class="icon ion-checkmark-circled positive selected"></i> </div> </li> <li ng-click="addMember()"> <div><i class="icon ion-android-add add-member"></i></div> </li> </ul> </ion-content> </ion-view>'),a.put("modules/hospitalIntroduce/hospitalIntroduce.html",'<ion-view> <isj-spinner is-show="$root.inProcess" is-refresh="$root.refreshProcess"></isj-spinner> <ion-header-bar class="bar-light"> <isj-back-button></isj-back-button> <div class="title">医院简介</div> </ion-header-bar> <ion-content class="content-fill has-header no-padding" scroll="true" overflow-scroll="true"> <iframe ng-src="{{myURL}}" frameborder="1" style="width:100%; height:100%"></iframe> </ion-content> </ion-view>'),a.put("modules/hospitalNavigation/floorList.html",'<ion-view> <isj-spinner is-show="$root.inProcess" is-refresh="$root.refreshProcess"></isj-spinner> <ion-header-bar class="bar-light"> <isj-back-button></isj-back-button> <div class="title">楼层索引</div> </ion-header-bar> <ion-content class="has-header content-gray floorList-content"> <ul class="list list-inset"> <li ng-repeat="floor in floorList" class="item"> <div class="floor positive-bg">{{floor.name}}</div> <div class="floor-introduce"> <span ng-repeat="dept in floor.depts">{{dept}}</span> </div> </li> </ul> </ion-content> </ion-view>'),a.put("modules/hospitalNavigation/hospitalNavigation.html",'<ion-view> <isj-spinner is-show="$root.inProcess" is-refresh="$root.refreshProcess"></isj-spinner> <ion-header-bar class="bar-light"> <isj-back-button></isj-back-button> <div class="title">医院导航</div> </ion-header-bar> <ion-content class="has-header content-gray hospitalNavigation-content"> <ul ng-repeat="district in districtBuilds" class="list list-inset"> <li class="item item-positive">{{district.name}}院区</li> <li ng-repeat="build in district.builds" class="item" ng-click="buildingClk(\'{{build.id}}\')"> {{build.name}} <span ng-if="build.function != \'\'">（{{build.function}}）</span> </li> </ul> </ion-content> </ion-view>'),a.put("modules/login/forgetPassword.html",'<ion-view> <isj-spinner is-show="$root.inProcess" is-refresh="$root.refreshProcess"></isj-spinner> <ion-header-bar class="bar-light"> <isj-back-button></isj-back-button> <div class="title">忘记密码</div> </ion-header-bar> <ion-content class="has-header content-gray forget-password-content" scroll="false" has-bouncing="false"> <div class="list"> <label class="item item-input"> 手机号 <input class="forget-password-input" type="number" placeholder="11位数字" ng-model="input.phone"> </label> </div> <div class="div-button"> <button class="button button-positive" ng-click="getCode()" ng-disabled="!(input.phone.toString().length == 11) && !isSubmit">获取验证码</button> </div> </ion-content> </ion-view>'),a.put("modules/login/forgetPasswordSetting.html",'<ion-view> <isj-spinner is-show="$root.inProcess" is-refresh="$root.refreshProcess"></isj-spinner> <ion-header-bar class="bar-light"> <isj-back-button go-back="goBack()"></isj-back-button> <div class="title">忘记密码</div> </ion-header-bar> <ion-content class="has-header content-gray forgetPasswordSetting-content" scroll="false" has-bouncing="false"> <div class="prompt"> <p ng-bind="\'验证码已发送到\'+phone"></p> </div> <div class="list"> <div class="item item-input"> 验证码 <input id="registSetting-code" class="code-input" type="number" placeholder="6位数字" ng-model="input.verificationCode"> <button class="button button-positive button-resend" ng-disabled="!isResend" ng-click="resendCode()">重新发送{{secondString}}</button> </div> </div> <div class="prompt"> 密码需要填写6-20个字符，可由英文字母、数字、下划线组成 </div> <div class="list"> <label class="item item-input"> 密码 <input id="registSetting-password" class="password-input" type="password" placeholder="6-20个字符" ng-model="input.newPassword"> </label> </div> <div class="div-button"> <button class="button button-positive" ng-click="changePassword()" ng-disabled="isSubmit">修改密码</button> </div> </ion-content> </ion-view>'),a.put("modules/login/login.html",'<ion-view> <isj-spinner is-show="$root.inProcess" is-refresh="$root.refreshProcess"></isj-spinner> <ion-header-bar class="bar-light"> <isj-back-button go-back="goBack()"></isj-back-button> <div class="title">登录</div> </ion-header-bar> <ion-content class="has-header content-gray login-content" scroll="false" has-bouncing="false"> <div class="warm-prompt"> <i class="ion-ios-information-outline"></i> 温馨提示：已注册老版本的用户密码默认是身份证后6位，如果登录失败可以尝试找回密码或者重新注册使用 </div> <div class="list"> <label class="item item-input item-icon-left"> <i class="icon ion-ios-person-outline list-icon-left"></i> <input id="login-phone" class="login-input" type="number" placeholder="请输入手机号" ng-model="input.phone"> </label> <label class="item item-input item-icon-left"> <i class="icon ion-ios-unlocked-outline list-icon-left"></i> <input id="login-password" class="login-input" type="password" placeholder="请输入密码" ng-model="input.password"> </label> </div> <div class="div-button"> <button class="button button-positive" ng-click="login()">登录</button> </div> <div class="div-a"> <a href="#/regist" class="positive">注册</a> <a href="#/forgetPassword" class="positive forget-password">忘记密码</a> </div> </ion-content> </ion-view>'),a.put("modules/login/regist.html",'<ion-view> <isj-spinner is-show="$root.inProcess" is-refresh="$root.refreshProcess"></isj-spinner> <ion-header-bar class="bar-light"> <isj-back-button></isj-back-button> <div class="title">注册</div> </ion-header-bar> <ion-content class="has-header content-gray regist-content" scroll="false" has-bouncing="false"> <div class="list"> <label class="item item-input"> 手机号 <input id="regist-phone" class="regist-input" type="number" placeholder="11位数字" ng-model="input.phone"> </label> </div> <div class="div-button"> <button ng-disabled="!(input.phone.toString().length == 11) && !isSubmit" class="button button-positive" ng-click="getCode()">获取验证码</button> </div> </ion-content> </ion-view>'),a.put("modules/login/registSetting.html",'<ion-view> <isj-spinner is-show="$root.inProcess" is-refresh="$root.refreshProcess"></isj-spinner> <ion-header-bar class="bar-light"> <isj-back-button go-back="goBack()"></isj-back-button> <div class="title">注册</div> </ion-header-bar> <ion-content class="has-header content-gray registSetting-content"> <div class="prompt"> <p ng-bind="\'验证码已发送到\'+phone"></p> </div> <div class="list"> <div class="item item-input"> 验证码 <input id="registSetting-code" class="code-input" type="number" placeholder="6位数字" ng-model="input.verificationCode"> <button class="button button-resend button-positive" ng-disabled="!isResend" ng-click="resendCode()">重新发送{{secondString}}</button> </div> </div> <div class="prompt"> 密码需要填写6-20个字符，可由英文字母、数字、下划线组成 </div> <div class="list"> <label class="item item-input"> 密码 <input id="registSetting-password" class="password-input" type="password" placeholder="6-20个字符" ng-model="input.password"> </label> </div> <div class="prompt"> 体验快速预约挂号，请填写您的信息 </div> <div class="list"> <label class="item item-input"> 姓名 <input class="name-input" type="text" placeholder="必填" ng-model="input.name"> </label> <label class="item item-input"> 身份证号 <input class="idCard-input" type="text" placeholder="必填" ng-model="input.idCard"> </label> </div> <div class="div-button"> <button class="button button-positive" ng-click="regist()" ng-disabled="isSubmit">注册</button> </div> </ion-content> </ion-view>'),a.put("modules/medicalCard/medicalCardEdit.html",'<ion-view> <isj-spinner is-show="$root.inProcess" is-refresh="$root.refreshProcess"></isj-spinner> <ion-header-bar class="bar-light"> <isj-back-button></isj-back-button> <div class="title">绑卡</div> </ion-header-bar> <ion-content scroll="false" class="has-header content-gray medicalCardEdit-content"> <div class="list list-inset"> <label class="item item-input"> <span class="input-label"> <img src="./assets/images/card_picture.png"> </span> 病历号 </label> </div> <div class="list list-inset"> <label class="item item-input"> <span class="input-label"> <img src="./assets/images/show_complete.png"> </span> <input type="text" ng-model="input.medicalNum"> </label> </div> <div class="operation"> <button class="button button-positive" ng-click="changeNum()" ng-disabled="isSubmit">更新</button> </div> <div class="create"> <button class="button button-clear button-positive" ng-click="createNum()" ng-disabled="isSubmit">在线建档</button> </div> </ion-content> </ion-view>'),a.put("modules/medicalCard/medicalCardList.html",'<ion-view> <isj-spinner is-show="$root.inProcess" is-refresh="$root.refreshProcess"></isj-spinner> <ion-header-bar class="bar-light"> <isj-back-button></isj-back-button> <div class="title">就诊卡管理</div> </ion-header-bar> <ion-content class="has-header medicalCardList-content"> <ul class="list"> <li ng-repeat="member in members" class="item item-avatar-left" ng-click="medicalCardEdit(member.id)"> <img ng-if="member.memberCode == \'00\' && member.sexCode == \'1\'" src="./assets/images/pic_man.png" class="photo"> <img ng-if="member.memberCode == \'00\' && member.sexCode == \'0\'" src="./assets/images/pic_woman.png" class="photo"> <img ng-if="member.memberCode != \'00\'" ng-src="{{memberTypes[member.memberCode].img}}" class="photo"> <div class="relationship-name"> <span ng-if="member.memberCode == \'00\'">我</span> <span ng-if="member.memberCode != \'00\'">{{memberTypes[member.memberCode].name}}</span> </div> <div class="name-sex-age"> <h2 class="name">{{member.name}}</h2> <img ng-if="member.sexCode == \'1\'" src="./assets/images/man.png" class="sex"> <img ng-if="member.sexCode == \'0\'" src="./assets/images/woman.png" class="sex"> <p class="age">{{member.age}}</p> </div> <p class="idCard"> <img ng-if="member.patientVisits == \'1\'" src="./assets/images/id_s.png"> <img ng-if="member.patientVisits == \'0\'" src="./assets/images/id_d.png"> {{member.idCard}} </p> <p class="medicalNum"> 病历号：{{member.medicalNum}} </p> <img ng-if="member.patientVisits == \'1\'" src="./assets/images/client.png" class="patient-visits"> </li> </ul> </ion-content> </ion-view>'),a.put("modules/medicalGuide/medicalGuide.html",'<ion-view> <isj-spinner is-show="$root.inProcess" is-refresh="$root.refreshProcess"></isj-spinner> <ion-header-bar class="bar-light"> <isj-back-button></isj-back-button> <div class="title">就医指南</div> </ion-header-bar> <ion-content class="has-header content-introduce content-gray"> <div ng-bind-html="medicalGuide"></div> </ion-content> </ion-view>'),a.put("modules/medicalReport/medicalReportList.html",'<ion-view> <isj-spinner is-show="$root.inProcess" is-refresh="$root.refreshProcess"></isj-spinner> <ion-header-bar class="bar-light"> <isj-back-button go-back="goBack()"></isj-back-button> <div class="title" ng-click="selectMember()"> <span ng-if="patient.memberCode==\'00\'">我</span><span ng-if="patient.memberCode!=\'00\'">{{patient.name}}</span>的报告单 <i class="icon ion-ios-arrow-down positive operation-down"></i> </div> </ion-header-bar> <div class="medicalReportList_select has-header"> <div class="prompt"> <div class="prompt-icon"> <i class="icon ion-ios-information-outline"></i> </div> <div> 温馨提示：无法查看到结果的患者请确认病历号是否绑定正确，部分结果无法在手机上查看。 </div> </div> <div class="reportSearch-form"> <div> <label class="item-input item-select"> <select ng-model="searchStr.searchTime" ng-change="searchReport()" ng-options="node.code as node.name for node in searchTimeTypes"></select> <i class="icon ion-ios-arrow-down positive"></i> </label> </div> <div> <label class="item-input item-select"> <select ng-model="searchStr.searchStatus" ng-change="searchReport()" ng-options="node.code as node.name for node in searchStatusTypes"></select> <i class="icon ion-ios-arrow-down positive"></i> </label> </div> </div> </div> <ion-content class="has-header medicalReportList-content"> <ul ng-if="reports.length > 0" class="list"> <li class="item item-icon-right" ng-repeat="report in reports" ng-click="viewReport(report.id, report.reportCategory, report.status)"> <h2>{{report.name}}</h2> <p>检查时间：{{report.examinationDate}}</p> <i ng-if="report.status == \'0\'" class="badge assertive">未出</i> <i ng-if="report.status == \'1\'" class="badge positive">已出</i> <i class="icon ion-ios-arrow-right icon-right"></i> </li> </ul> <div ng-if="reports.length == 0" class="no-content-padding">暂时没有报告</div> </ion-content> </ion-view>'),a.put("modules/medicalReport/medicalReportView1.html",'<ion-view> <isj-spinner is-show="$root.inProcess" is-refresh="$root.refreshProcess"></isj-spinner> <ion-header-bar class="bar-light"> <isj-back-button></isj-back-button> <div class="title"> 检验报告单 </div> </ion-header-bar> <ion-content class="has-header medicalReportView1-content"> <div class="report-content"> <table class="report-table"> <tr> <td class="form-label">检验项目</td> <td>{{report.name}}</td> </tr> <tr> <td class="form-label">就诊人</td> <td>{{report.patient}}</td> </tr> <tr> <td class="form-label">检验时间</td> <td>{{report.examinationDate}}</td> </tr> <tr> <td colspan="2"> <table class="report-item-table"> <tr> <th><div>项目</div></th> <th><div>结果</div></th> <th><div>参考值</div></th> </tr> <tr ng-repeat="item in report.items"> <td>{{item.name}}</td> <td align="center">{{item.result}}</td> <td align="center" align="center">{{item.reference}}</td> </tr> </table> </td> </tr> <tr> <td class="form-label">检验医生</td> <td>{{report.inspectionDoctor}}</td> </tr> <tr> <td class="form-label">审核医生</td> <td>{{report.examineDoctor}}</td> </tr> </table> </div> <div class="report-prompt"> 指标仅供参考，请以医院纸质报告为准 </div> </ion-content> </ion-view>'),a.put("modules/onlinePayment/onlinePaymentList.html",'<ion-view> <isj-spinner is-show="$root.inProcess" is-refresh="$root.refreshProcess"></isj-spinner> <ion-header-bar class="bar-light"> <isj-back-button go-back="goBack()"></isj-back-button> <div class="title" ng-click="selectMember()"> <span ng-if="patient.memberCode==\'00\'">我</span><span ng-if="patient.memberCode!=\'00\'">{{patient.name}}</span>的缴费 <i class="icon ion-ios-arrow-down positive operation-down"></i> </div> </ion-header-bar> <ion-header-bar class="bar-subheader onlinePaymentList-subheader"> <label class="item-input item-select payStatus-select"> <select ng-model="searchStr.searchStatus" ng-change="searchPay()" ng-options="node.code as node.name for node in searchStatusTypes"></select> <i class="icon ion-ios-arrow-down positive"></i> </label> </ion-header-bar> <ion-content class="has-header has-subheader has-footer content-fill onlinePaymentList-content"> <div ng-if="recipes.length > 0" class="recipes"> <div ng-repeat="recipe in recipes"> <div class="recipes-flex-row recipes-border-bottom recipe-title"> <span class="column-check"> <ion-checkbox ng-if="recipe.canCheck" ng-model="recipe.isCheck" ng-change="checkClk(\'0\', recipe.outpatientNum)"></ion-checkbox> <img ng-if="!recipe.canCheck" class="checkbox-disable" src="./assets/images/btn_check_off_disable.png"> </span> <span class="column-content font-major">门诊流水号：{{recipe.outpatientNum}}</span> <span class="column-other font-default">{{recipe.outpatientDate.substring(5,11)}}</span> </div> <div ng-repeat="recipeOne in recipe.recipes"> <div class="recipes-flex-row-stretch recipes-border-bottom"> <span class="column-check recipe-check"> <ion-checkbox ng-if="recipeOne.statusCode == \'0\'" ng-model="recipeOne.isCheck" ng-disabled="true" ng-change="checkClk(\'1\', recipe.outpatientNum, recipeOne.recipeNum)"></ion-checkbox> <img ng-if="recipeOne.statusCode != \'0\'" class="checkbox-disable" src="./assets/images/btn_check_off_disable.png"> </span> <span class="column-content recipe"> <div class="recipes-flex-row"> <span class="column-content font-default">处方号：{{recipeOne.recipeNum}}</span> <span class="column-other font-default positive">{{recipeOne.status}}</span></div> <div class="items"> <div ng-repeat="item in recipeOne.items" class="recipes-flex-row column-margin-top"> <span class="column-content font-major">{{item.name}}</span> <span class="column-other font-money">{{item.amount}}×{{item.number}}</span> </div> </div> <div class="font-default column-margin-top">执行科室：{{recipeOne.dept}}</div> <div class="recipes-flex-row column-margin-top"> <span class="column-content font-default">执行地点：{{recipeOne.location==\'\'?\'请在院内咨询\':recipeOne.location}}</span> <span class="column-other font-major">￥{{recipeOne.total}}</span> </div> </span> </div> </div> </div> </div> <div ng-if="recipes.length == 0" class="no-content-center">暂时没有缴费信息</div> </ion-content> <ion-footer-bar align-title="left" class="bar-light onlinePaymentList-footer"> <h1 class="title">合计：&nbsp;<span class="positive">￥{{amount}}元</span></h1> <button class="button button-positive pay-button" ng-disabled="isSubmit || recipeNums.length == 0" ng-click="payClk()">支付</button> </ion-footer-bar> </ion-view>'),a.put("modules/onlinePayment/paymentResult.html",'<ion-view> <isj-spinner is-show="$root.inProcess" is-refresh="$root.refreshProcess"></isj-spinner> <ion-header-bar class="bar-light"> <isj-back-button go-back="goBack()"></isj-back-button> <div class="title">支付成功</div> </ion-header-bar> <ion-content class="has-header paymentResult-content"> <div class="resultDetail"> <img ng-src="{{resultImgSrc}}"> <span>{{resultText}}</span> <a href="#/tab/registration/" class="hrefStyle">查看诊疗页</a> </div> </ion-content> </ion-view>'),a.put("modules/onlinePayment/paymentSelect.html",'<ion-view> <isj-spinner is-show="$root.inProcess" is-refresh="$root.refreshProcess"></isj-spinner> <ion-header-bar class="bar-light"> <isj-back-button></isj-back-button> <div class="title"> 支付 </div> </ion-header-bar> <ion-content class="has-header paymentSelect-content"> <ul class="list"> <li class="item item-divider"> 请选择支付方式 </li> <li class="item item-avatar-left item-icon-right" ng-click="paymentSelect(\'1\')"> <img src="./assets/images/CMB_icon.jpg"> 一网通银行卡支付 <i id="select_no_1" class="icon ion-ios-circle-outline positive select-no"></i> <i id="select_yes_1" class="icon ion-ios-checkmark positive select-yes select-none"></i> </li> <li class="item item-avatar-left item-icon-right" ng-click="paymentSelect(\'2\')"> <img src="./assets/images/alipay_icon.png"> 支付宝移动支付 <i id="select_no_2" class="icon ion-ios-circle-outline positive select-no"></i> <i id="select_yes_2" class="icon ion-ios-checkmark positive select-yes select-none"></i> </li> <li class="item item-avatar-left item-icon-right" ng-click="paymentSelect(\'3\')"> <img src="./assets/images/weixin_icon.jpg"> 微信移动支付 <i id="select_no_3" class="icon ion-ios-circle-outline positive select-no"></i> <i id="select_yes_3" class="icon ion-ios-checkmark positive select-yes select-none"></i> </li> <li class="item"> 总额 <span class="money">￥{{order.amount}}元</span> </li> </ul> <div class="countDown"> 请在<span id="payment_countDown"><span ng-bind="time.minute"></span>分<span ng-bind="time.second"></span>秒</span>内完成支付 </div> <div class="confirm"> <button class="button button-positive" ng-click="pay()">支付</button> </div> </ion-content> </ion-view>'),a.put("modules/register/registerConfirmAppt.html",'<ion-view> <isj-spinner is-show="$root.inProcess" is-refresh="$root.refreshProcess"></isj-spinner> <ion-header-bar class="bar-light"> <isj-back-button go-back="goBack()"></isj-back-button> <div class="title"></div> </ion-header-bar> <ion-content class="has-header registerConfirmAppt-content"> <div class="patient"> <img ng-if="patient.memberCode == \'00\' && patient.sexCode == \'1\'" src="./assets/images/pic_man.png" class="photo"> <img ng-if="patient.memberCode == \'00\' && patient.sexCode == \'0\'" src="./assets/images/pic_woman.png" class="photo"> <img ng-if="patient.memberCode != \'00\'" ng-src="{{memberTypes[patient.memberCode].img}}" class="photo"> <span>就诊人：{{patient.name}}</span> <span> <a class="positive" ng-click="selectMember()"> 换人 <i class="icon ion-ios-loop-strong"></i> </a> </span> <p>身份证号：{{patient.idCard}}</p> </div> <div class="register-info"> <table> <tr> <td class="label">就诊时间：</td> <td width="100%">{{dateDisplay}}</td> </tr> <tr> <td class="label">就诊地点：</td> <td width="100%">{{doctor.dept}}（{{doctor.district}}）</td> </tr> <tr> <td class="label">看诊医生：</td> <td width="100%">{{doctor.name}}</td> </tr> <tr> <td class="label positive">温馨提示：</td> <td width="100%" class="positive"> <div ng-bind-html="prompt"></div> </td> </tr> </table> </div> <div class="visits"> <h4 class="agreement" ng-click="showAgreement()"> 我已了解并同意挂号规则（点击查看详细） </h4> <ion-checkbox class="item-checkbox" ng-model="isChecked"> </ion-checkbox> </div> <div class="amount"> 合计：{{doctor.amount}}元 </div> <div class="confirm"> <button class="button button-positive" ng-click="registerConfirm()" ng-disabled="!isChecked">确定</button> </div> </ion-content> </ion-view>'),a.put("modules/register/registerConfirmToday.html",'<ion-view> <isj-spinner is-show="$root.inProcess" is-refresh="$root.refreshProcess"></isj-spinner> <ion-header-bar class="bar-light"> <isj-back-button go-back="goBack()"></isj-back-button> <div class="title"></div> </ion-header-bar> <ion-content class="has-header registerConfirmToday-content"> <div class="patient"> <img ng-if="patient.memberCode == \'00\' && patient.sexCode == \'1\'" src="./assets/images/pic_man.png" class="photo"> <img ng-if="patient.memberCode == \'00\' && patient.sexCode == \'0\'" src="./assets/images/pic_woman.png" class="photo"> <img ng-if="patient.memberCode != \'00\'" ng-src="{{memberTypes[patient.memberCode].img}}" class="photo"> <span>就诊人：{{patient.name}}</span> <span> <a class="positive" ng-click="selectMember()"> 换人 <i class="icon ion-ios-loop-strong"></i> </a> </span> </div> <div class="register-info"> <table> <tr> <td class="label">就诊时间：</td> <td width="100%">{{todayDisplay}}</td> </tr> <tr> <td class="label">就诊地点：</td> <td width="100%">{{doctor.dept}}（{{doctor.district}}）</td> </tr> <tr> <td class="label">看诊医生：</td> <td width="100%">{{doctor.name}}</td> </tr> <tr> <td class="label positive">温馨提示：</td> <td width="100%" class="positive"> <div ng-bind-html="prompt"></div> </td> </tr> </table> </div> <div class="visits"> <ion-checkbox class="item-checkbox" ng-model="isChecked"> </ion-checkbox> <h4 class="agreement" ng-click="showAgreement()"> 我已了解并同意挂号规则（点击查看详细） </h4> </div> <div class="amount"> 合计：{{doctor.amount}}元 </div> <div class="confirm"> <button class="button button-positive" ng-click="registerConfirm()" ng-disabled="!isChecked">确定</button> </div> </ion-content> </ion-view>'),a.put("modules/register/registerDoctorDateSelect.html",'<ion-view> <isj-spinner is-show="$root.inProcess" is-refresh="$root.refreshProcess"></isj-spinner> <ion-header-bar class="bar-light registerDoctorDateSelect-title"> <isj-back-button></isj-back-button> <div class="title"></div> <a class="button button-clear icon ion-ios-search-strong positive" ng-click="searchClk()"></a> </ion-header-bar> <ion-header-bar ng-class="{true: \'search-none\'}[hideSearch]" class="head-search"> <form ng-submit="doSearch()"> <input id="registerDoctorDateSelect_search" type="search" ng-model="major" placeholder="专业/专长"> </form> <div class="search-icon"> <a class="button button-clear icon ion-ios-close-empty positive" ng-click="searchClk()"></a> </div> </ion-header-bar> <div class="district-select has-header"> <div class="button-bar"> <button ng-class="{false: \'button-outline\'}[districtId == \'1\']" class="button button-positive district-button" ng-click="districtClk(\'1\')"> 预约时间 </button> <button ng-class="{false: \'button-outline\'}[districtId == \'2\']" class="button button-positive district-button" ng-click="districtClk(\'2\')"> 预约医生 </button> </div> </div> <div class="registerDoctorDateSelect-date has-header-district has-header" ng-show="dataPicker.isShow"> <div class="positive month">{{selectDays[0].month}}月</div> <i class="icon ion-ios-arrow-left positive" style="width: 7%;margin-left: 5px" ng-style="{\'visibility\': leftIconIsShow ? \'visible\' : \'hidden\'}" ng-click="leftSlide()"></i> <ion-scroll class="date-scroll" direction="x" scrollbar-y="false" on-scroll="scroll()"> <table> <tr> <td ng-repeat="oneDay in selectDays" class="week" width="51px" ng-click="dayClk($index, \'{{oneDay.date}}\')">{{oneDay.week}}</td> </tr> <tr> <td ng-repeat="oneDay in selectDays" class="day" ng-click="dayClk($index, \'{{oneDay.date}}\')"> <div class="day-select" ng-class="{true: \'positive day-selected\'}[oneDay.date==daySelected]">{{oneDay.day}}</div> </td> </tr> </table> </ion-scroll> <i class="icon ion-ios-arrow-right positive" style="width: 5%;margin-left: 8px" ng-style="{\'visibility\': rightIconIsShow ? \'visible\' : \'hidden\'}" ng-click="rightSlide()"></i> </div> <ion-content ng-class="{false: \'registerDoctorSelect-content\'}[dataPicker.isShow]" class="has-header content-fill registerDoctorDateSelect-content"> <ul ng-if="doctors.length > 0" class="list"> <li ng-repeat="doctor in doctors" class="item item-avatar-left" ng-click="doctorClk(doctor.id, doctor.overCount)"> <img ng-if="(doctor.photo == null || doctor.photo == \'\') && doctor.sexCode == \'1\'" src="./assets/images/doctor_man.png" onerror="this.src=\'./assets/images/doctor_man.png\'" class="photo" ng-click="photoClk(doctor.id, $event)"> <img ng-if="(doctor.photo == null || doctor.photo == \'\') && doctor.sexCode == \'0\'" src="./assets/images/doctor_woman.png" onerror="this.src=\'./assets/images/doctor_man.png\'" class="photo" ng-click="photoClk(doctor.id, $event)"> <img ng-if="doctor.photo != null && doctor.photo != \'\'" ng-src="{{doctor.photo}}" class="photo" ng-click="photoClk(doctor.id, $event)"> <div class="name"> <h2>{{doctor.name}}</h2> <p>{{doctor.title}}</p> <div ng-if="doctor.overCount > 0" class="positive-bg can-register">有号</div> <div ng-if="doctor.overCount == 0" class="dark-bg can-register">无号</div> </div> <p>出诊地点：{{doctor.dept}}</p> <p>擅长：{{doctor.skill===\'\'?\'暂无\':doctor.skill}}</p> <div class="positive-border district-icon" ng-class="districtColor.get(doctor.districtId)"></div> <div class="district-icon-font balanced">{{doctor.district}}</div> </li> </ul> <div ng-if="doctors.length == 0" class="no-content-center">暂无医生排班信息</div> </ion-content> </ion-view>'),a.put("modules/register/registerDoctorTimeSelect.html",'<ion-view> <isj-spinner is-show="$root.inProcess" is-refresh="$root.refreshProcess"></isj-spinner> <ion-header-bar class="bar-light"> <isj-back-button></isj-back-button> <div class="title">{{doctor.name}}</div> </ion-header-bar> <div ng-class="{true: \'no-dates\'}[allDays.length == 0]" class="registerDoctorTimeSelect-date has-header"> <div class="positive month">{{selectDays[0].month}}月</div> <table> <tr> <td ng-repeat="oneDay in selectDays" class="week" width="13%" ng-click="dayClk($index, \'{{oneDay.date}}\')"> {{oneDay.week}} </td> <td ng-if="allDays.length > 7" rowspan="3" width="9%" ng-click="dayPicker()"> <i class="icon ion-ios-arrow-down positive"></i> </td> <td ng-if="allDays.length <= 7" rowspan="3" width="9%"> &nbsp; </td> </tr> <tr> <td ng-repeat="oneDay in selectDays" class="day" ng-class="{\'\': \'border-none\'}[oneDay.date]" ng-click="dayClk($index, \'{{oneDay.date}}\')"> <div class="day-select" ng-class="{true: \'positive day-selected\'}[oneDay.date==daySelected]"> {{oneDay.day}} </div> </td> </tr> <tr> <td ng-repeat="oneDay in selectDays" class="week"> <div> <span ng-if="oneDay.data.overCount != null">{{oneDay.data.total-oneDay.data.overCount}}/</span>{{oneDay.data.total}} </div> </td> </tr> </table> <ul class="list"> <li class="item item-avatar-left"> <img ng-if="(photo == null || photo == \'\') && doctor.sexCode == \'1\'" src="./assets/images/doctor_man.png" class="photo" ng-click="photoClk(doctor.id)"> <img ng-if="(photo == null || photo == \'\') && doctor.sexCode == \'0\'" src="./assets/images/doctor_woman.png" class="photo" ng-click="photoClk(doctor.id)"> <img ng-if="photo != null && photo != \'\'" ng-src="{{photo}}" class="photo" ng-click="photoClk(doctor.id)"> <div class="name"> <h2>{{doctor.name}}</h2> <p>{{doctor.title}}</p> </div> <p>出诊地点：{{dataSelected.dept}}（{{dataSelected.district}}）</p> <p>挂号费：￥{{dataSelected.amount}}</p> </li> <li class="item item-divider"> 预约时间 </li> </ul> </div> <ion-content ng-class="{true: \'no-dates\'}[allDays.length == 0]" class="has-header content-fill registerDoctorTimeSelect-content"> <div ng-if="allDays.length > 0" class="time-select"> <div ng-repeat="time in times" ng-class="{true: \'time-disable\'}[time.overCount==0]" ng-click="timeClk(time.time, time.overCount)"> <i ng-if="time.time != \'\'" class="icon ion-ios-clock-outline"></i> <span>{{time.time}}</span> </div> </div> <div ng-if="allDays.length == 0 && !$root.inProcess" class="no-content-center">暂无医生号点信息</div> </ion-content> </ion-view>'),a.put("modules/register/registerTodayDoctorList.html",'<ion-view> <isj-spinner is-show="$root.inProcess" is-refresh="$root.refreshProcess"></isj-spinner> <ion-header-bar class="bar-light registerTodayDoctorList-title"> <isj-back-button></isj-back-button> <div class="title"></div> <a class="button button-clear icon ion-ios-search-strong positive" ng-click="searchClk()"></a> </ion-header-bar> <ion-header-bar ng-class="{true: \'search-none\'}[hideSearch]" class="head-search"> <form ng-submit="doSearch()"> <input id="registerTodayDoctorList_search" type="search" ng-model="major" placeholder="专业/专长"> </form> <div class="search-icon"> <a class="button button-clear icon ion-ios-close-empty positive" ng-click="searchClk()"></a> </div> </ion-header-bar> <ion-content class="has-header content-fill registerTodayDoctorList-content"> <ul ng-if="doctors.length > 0" class="list"> <li class="item item-avatar-left" collection-repeat="doctor in doctors" ng-click="doctorClk(doctor.id, doctor.overCount)"> <img ng-if="(doctor.photo == null || doctor.photo == \'\') && doctor.sexCode == \'1\'" src="./assets/images/doctor_man.png" class="photo" ng-click="photoClk(doctor.id, $event)"> <img ng-if="(doctor.photo == null || doctor.photo == \'\') && doctor.sexCode == \'0\'" src="./assets/images/doctor_woman.png" class="photo" ng-click="photoClk(doctor.id, $event)"> <img ng-if="doctor.photo != null && doctor.photo != \'\'" ng-src="{{doctor.photo}}" class="photo" ng-click="photoClk(doctor.id, $event)"> <div class="name"> <h2>{{doctor.name}}</h2> <p>{{doctor.title}}</p> <div ng-if="doctor.overCount > 0" class="positive-bg can-register">有号</div> <div ng-if="doctor.overCount == 0" class="dark-bg can-register">无号</div> </div> <p>出诊地点：{{doctor.dept}}</p> <p>擅长：{{doctor.skill===\'\'?\'暂无\':doctor.skill}}</p> <div class="positive-border district-icon" ng-class="districtColor.get(doctor.districtId)"></div> <div class="district-icon-font balanced">{{doctor.district}}</div> </li> </ul> <div ng-if="doctors.length == 0" class="no-content-center">暂无医生排班信息</div> </ion-content> </ion-view>'),a.put("modules/setting/appAbout.html",'<ion-view> <ion-header-bar class="bar-light"> <isj-back-button></isj-back-button> <div class="title">关于掌上盛京</div> </ion-header-bar> <ion-content class="has-header appAbout-content"> <div class="logo"> <img src="./assets/images/logo.png"> </div> <div class="version"> V{{ versionNumber }}({{ versionCode }}) </div> <ul class="list"> <li ng-if="isLogin" class="item item-icon-right" ng-click="itemRouter(\'settingFeedback\')"> 意见反馈 <i class="icon ion-ios-arrow-right icon-right"></i> </li> <li class="item item-icon-right" ng-click="itemRouter(\'settingVersionDescription\')"> 版本说明 <i class="icon ion-ios-arrow-right icon-right"></i> </li> </ul> <div class="service-phone"> 客服电话：<span class="positive">{{servicePhone}}</span> </div> </ion-content> </ion-view>'),
a.put("modules/setting/changePassword.html",'<ion-view> <isj-spinner is-show="$root.inProcess" is-refresh="$root.refreshProcess"></isj-spinner> <ion-header-bar class="bar-light"> <isj-back-button></isj-back-button> <div class="title">修改密码</div> </ion-header-bar> <ion-content class="has-header content-gray changePassword-content"> <form> <div class="prompt"> 密码需要填写6-20个字符，可由英文字母、数字、下划线组成 </div> <div class="list"> <label class="item item-input"> <span class="input-label">当前密码</span> <input type="password" placeholder="6-20个字符" ng-model="input.nowPassword" maxlength="20"> </label> </div> <div class="list interval"> <label class="item item-input"> <span class="input-label">新密码</span> <input type="password" placeholder="6-20个字符" ng-model="input.newPassword" maxlength="20"> </label> <label class="item item-input"> <span class="input-label">确认新密码</span> <input type="password" placeholder="6-20个字符" ng-model="input.confirmPassword" maxlength="20"> </label> </div> <div class="operation"> <button class="button button-positive" ng-click="change()" ng-disabled="isSubmit">确认修改</button> </div> </form> </ion-content> </ion-view>'),a.put("modules/setting/feedback.html",'<ion-view> <isj-spinner is-show="$root.inProcess" is-refresh="$root.refreshProcess"></isj-spinner> <ion-header-bar class="bar-light"> <isj-back-button></isj-back-button> <div class="title">用户反馈</div> </ion-header-bar> <ion-content class="has-header content-gray feedback-content"> <div class="inputs"> <div> <textarea placeholder="对掌上盛京有什么意见，请告诉我们" ng-model="input.opinion"></textarea> </div> </div> <div class="operation"> <button class="button button-positive" ng-click="opinionSubmit()" ng-disabled="isSubmit">提交</button> </div> </ion-content> </ion-view>'),a.put("modules/setting/settingIndex.html",'<ion-view> <ion-header-bar class="bar-light"> <isj-back-button></isj-back-button> <div class="title">设置</div> </ion-header-bar> <ion-content class="has-header content-gray settingIndex-content"> <ul class="list list-inset"> <li ng-if="isLogin" class="item item-icon-left item-icon-right" ng-click="itemRouter(\'settingChangePassword\')"> <i class="icon ion-ios-unlocked-outline icon-left"></i> 修改登录密码 <i class="icon ion-ios-arrow-right icon-right"></i> </li> <li class="item item-icon-left item-icon-right" ng-click="itemRouter(\'settingAppAbout\')"> <i class="icon ion-ios-information-outline icon-left"></i> 关于 <i class="icon ion-ios-arrow-right icon-right"></i> </li> </ul> <div ng-if="isLogin" class="operation"> <button class="button button-assertive" ng-click="quit()">退出登录</button> </div> </ion-content> </ion-view>'),a.put("modules/setting/versionDescription.html",'<ion-view> <ion-header-bar class="bar-light"> <isj-back-button></isj-back-button> <div class="title">更新内容</div> </ion-header-bar> <ion-content class="has-header content-introduce content-gray"> <div ng-bind-html="description"></div> </ion-content> </ion-view>'),a.put("modules/subject/subjectSelect.html",'<ion-view> <isj-spinner is-show="$root.inProcess" is-refresh="$root.refreshProcess"></isj-spinner> <ion-header-bar class="bar-light subjectSelect-title"> <isj-back-button></isj-back-button> <div class="title">科室列表</div> <a class="button button-clear icon ion-ios-search-strong positive" ng-click="searchClk()"></a> </ion-header-bar> <ion-header-bar ng-class="{true: \'search-none\'}[hideSearch]" class="head-search"> <form ng-submit="doSearch()"> <input id="subjectSelect_search_{{type}}" type="search" ng-model="major" placeholder="专业/专长"> </form> <div class="search-icon"> <a class="button button-clear icon ion-ios-close-empty positive" ng-click="searchClk()"></a> </div> </ion-header-bar> <div class="district-select has-header"> <div class="button-bar"> <button ng-repeat="district in districts" ng-class="{false: \'button-outline\'}[districtId == district.id]" class="button button-positive district-button" ng-click="districtClk(district.id)"> {{district.name}} </button> </div> </div> <ion-content class="has-header has-header-district content-fill subjectSelect-content"> <div class="subject-select"> <ion-scroll class="subject-scroll subject-scroll-left"> <div ng-repeat="subject in subjects" ng-class="{true: \'left-activated\'}[subjectId == subject.id]" class="subject-div subject-div-left" ng-click="subjectLeftClk(subject.id)"> <i class="icon ion-ios-play positive left-activated-icon"></i> {{subject.name}} </div> </ion-scroll> <ion-scroll class="subject-scroll subject-scroll-right"> <div ng-repeat="subjectRight in subjectRights" class="subject-div subject-div-right" ng-click="subjectRightClk(subjectRight.id)"> {{subjectRight.name}} </div> </ion-scroll> </div> </ion-content> </ion-view>'),a.put("modules/tab/main/main.html",'<ion-view> <ion-header-bar class="bar-light main-header"> <div class="title positive">掌上盛京医院</div> </ion-header-bar> <ion-content scroll="false" has-bouncing="false" class="has-header content-fill main-content"> <div class="row" style="height: 43%"> <div class="col grid-carousel"> <div class="carousel-footer"> <div>{{carouselImages[carouselIndex].name}}</div> <div rn-carousel-indicators ng-if="carouselImages.length > 1" slides="carouselImages" rn-carousel-index="carouselIndex"></div> </div> <ul rn-carousel rn-carousel-index="carouselIndex"> <li ng-repeat="carouselImage in carouselImages"> <div class="carousel-img" style="background-image: url({{carouselImage.url}})"></div> </li> </ul> </div> </div> <div class="row" style="height: 19%"> <div class="col grid-col grid-flex-column"> <a class="grid-flex-row" ng-click="itemRouter(\'subjectSelect\', \'2\')"> <span class="grid-icon assertive-border"> <i class="icon ion-ios-paper-outline assertive"></i> </span> <span class="grid-space"></span> <span class="grid-font">预约挂号</span> </a> </div> <div class="col grid-col grid-flex-column"> <a class="grid-flex-row" ng-click="itemRouter(\'subjectSelect\', \'1\')"> <span class="grid-icon assertive-border"> <i class="icon ion-ios-paper-outline assertive"></i> </span> <span class="grid-space"></span> <span class="grid-font">当日挂号</span> </a> </div> </div> <div class="row" style="height: 19%"> <div class="col grid-col grid-flex-column"> <a class="grid-flex-column" ng-click="itemRouter(\'medicalReportList\')"> <span class="grid-icon positive-border"> <i class="icon ion-ios-copy-outline positive"></i> </span> <span class="grid-space"></span> <span class="grid-font">查看报告</span> </a> </div> <div class="col grid-col grid-flex-column"> <a class="grid-flex-column" ng-click="itemRouter(\'onlinePaymentList\')"> <span class="grid-icon positive-border"> <i class="icon ion-ios-cart-outline positive"></i> </span> <span class="grid-space"></span> <span class="grid-font">缴费</span> </a> </div> <div class="col grid-col grid-flex-column"> <a class="grid-flex-column" ng-click="itemRouter(\'doctorIntroductionList\')"> <span class="grid-icon positive-border"> <i class="icon ion-ios-personadd-outline positive"></i> </span> <span class="grid-space"></span> <span class="grid-font">医生介绍</span> </a> </div> </div> <div class="row" style="height: 19%"> <div class="col grid-col grid-flex-column"> <a class="grid-flex-column" ng-click="itemRouter(\'hospitalNavigation\')"> <span class="grid-icon balanced-border"> <i class="icon ion-ios-location-outline balanced"></i> </span> <span class="grid-space"></span> <span class="grid-font">医院导航</span> </a> </div> <div class="col grid-col grid-flex-column"> <a class="grid-flex-column" ng-click="itemRouter(\'hospitalIntroduce\')"> <span class="grid-icon balanced-border"> <i class="icon ion-ios-home-outline balanced"></i> </span> <span class="grid-space"></span> <span class="grid-font">医院简介</span> </a> </div> <div class="col grid-col grid-flex-column"> <a class="grid-flex-column" ng-click="itemRouter(\'medicalGuide\')"> <span class="grid-icon balanced-border"> <i class="icon ion-ios-help-empty balanced"></i> </span> <span class="grid-space"></span> <span class="grid-font">就医指南</span> </a> </div> </div> </ion-content> </ion-view>'),a.put("modules/tab/message/message.html",'<ion-view> <isj-spinner is-show="$root.inProcess" is-refresh="$root.refreshProcess"></isj-spinner> <ion-header-bar class="bar-light"> <div class="title">消息</div> </ion-header-bar> <ion-content class="has-header content-gray message-content"> <ul class="list"> <li ng-repeat="message in messages" class="item"> <div class="time">{{message.createTime}}</div> <div class="message"><span ng-bind-html="message.content"></span></div> </li> </ul> </ion-content> </ion-view>'),a.put("modules/tab/personal/personal.html",'<ion-view> <ion-content scroll="false" has-bouncing="false" class="content-gray"> <div class="personal-title positive-bg"> <div> <img ng-if="!isLogin || user.sexCode == \'1\'" src="./assets/images/pic_man.png" class="photo"> <img ng-if="user.sexCode == \'0\'" src="./assets/images/pic_woman.png" class="photo"> </div> <div class="name" ng-if="isLogin">{{user.name}}</div> <div class="phone" ng-if="isLogin">{{user.phone}}</div> <div class="name" ng-if="!isLogin" ng-click="login()">登录</div> </div> <div> <ul class="list personal-list"> <li class="item item-icon-left item-icon-right" ng-click="itemRouter(\'familyMemberList\')"> <i class="icon ion-ios-people-outline positive icon-left"></i> 家庭成员 <i class="badge">{{memberCount}}</i> <i class="icon ion-ios-arrow-right icon-right"></i> </li> <li class="item item-icon-left item-icon-right" ng-click="itemRouter(\'collectionDoctorList\')"> <i class="icon ion-ios-personadd-outline positive icon-left"></i> 收藏的医生 <i class="badge">{{doctorCount}}</i> <i class="icon ion-ios-arrow-right icon-right"></i> </li> <!-- <li class="item item-icon-left item-icon-right" ng-click="itemRouter(\'medicalCardList\')">\n          <i class="icon ion-ios-list-outline positive icon-left"></i>\n          绑定就诊卡\n          <i class="icon ion-ios-arrow-right icon-right"></i>\n        </li> --> <li class="item item-icon-left item-icon-right" ng-click="itemRouter(\'settingIndex\')"> <i class="icon ion-ios-gear-outline positive list-icon-left"></i> 设置 <i class="icon ion-ios-arrow-right icon-right"></i> </li> </ul> </div> </ion-content> </ion-view>'),a.put("modules/tab/registration/registration.html",'<ion-view> <isj-spinner is-show="$root.inProcess" is-refresh="$root.refreshProcess"></isj-spinner> <ion-header-bar class="bar-light"> <div class="title" ng-click="selectMember()"> <img ng-if="patient.memberCode == \'00\' && patient.sexCode == \'1\'" src="./assets/images/pic_man.png" class="photo"> <img ng-if="patient.memberCode == \'00\' && patient.sexCode == \'0\'" src="./assets/images/pic_woman.png" class="photo"> <img ng-if="patient.memberCode != \'00\'" ng-src="{{memberTypes[patient.memberCode].img}}" class="photo"> {{patient.member}}-{{patient.name}} <i class="icon ion-ios-arrow-down positive operation-down"></i> </div> </ion-header-bar> <ion-content class="has-header content-gray content-fill registration-content"> <div ng-if="registrations.length > 0" ng-repeat="registration in registrations" class="time-line" ng-click="registrationClk(registration.id)"> <div class="time-line-left"> {{registration.apptDate.substring(5,11)}} <div class="time-line-mark positive-bg"></div> </div> <div class="time-line-right"> <div class="time-line-panel"> <div class="title"> 门诊号：<span class="positive">{{registration.clinicNum}}</span> </div> <div class="content content-hospital"> <span class="content-icon"><i class="icon ion-ios-home-outline"></i></span> <span class="content-name">{{registration.hospital}}</span> </div> <div class="content"> <span class="content-icon"><i class="icon ion-ios-location-outline"></i></span> <span class="content-name">{{registration.dept}}（{{registration.district}}）</span> </div> <div class="content"> <span class="content-icon"><i class="icon ion-ios-person-outline"></i></span> <span class="content-name">{{registration.doctor}}</span> </div> <div class="bottom"> 诊费:￥{{registration.amount}} </div> </div> <div class="time-line-bottom"> <span>{{registration.registerDate.substring(5,11)}}</span> <span class="pay-status">{{registration.status}}</span> </div> </div> </div> <div ng-if="registrations.length == 0" class="no-content-center">暂无挂号信息</div> </ion-content> </ion-view>'),a.put("modules/tab/registration/registrationIllustration.html",'<ion-view> <isj-spinner is-show="$root.inProcess" is-refresh="$root.refreshProcess"></isj-spinner> <ion-header-bar class="bar-light"> <isj-back-button></isj-back-button> <div class="title">就诊、退号说明</div> </ion-header-bar> <ion-content class="has-header content-gray registrationIllustration-content"> <div class="illustration"> <div class="head"><div class="title">就诊说明</div></div> <div class="content"> <table> <tr> <td class="label"><img src="./assets/images/registration_card.png"></td> <td> <span ng-bind-html="description.visit1"></span> </td> </tr> <tr> <td class="label"><img src="./assets/images/registration_hospital.png"></td> <td> <span ng-bind-html="description.visit2"></span> </td> </tr> <tr> <td colspan="2" class="medical-guide"> <a class="positive" ng-click="medicalGuideClk()">就医指南</a> </td> </tr> </table> </div> </div> <div class="illustration illustration-marge"> <div class="head"><div class="title">退号说明</div></div> <div class="content"> <span ng-bind-html="description.backnum"></span> </div> </div> </ion-content> </ion-view>'),a.put("modules/tab/registration/registrationView.html",'<ion-view> <isj-spinner is-show="$root.inProcess" is-refresh="$root.refreshProcess"></isj-spinner> <ion-header-bar class="bar-light registrationView-head"> <isj-back-button></isj-back-button> <div class="title">就诊单</div> <a class="button button-clear icon ion-ios-telephone-outline positive"></a> </ion-header-bar> <ion-content class="has-header content-gray registrationView-content"> <ul class="list registration-card"> <li class="item item-card-head"> <h2 class="odd-number">单号：<span class="positive">{{registration.num}}</span></h2> <span class="positive status">{{registration.status}}</span> </li> <li class="item item-card-content"> <table> <tr> <td class="label"> <img ng-if="patient.memberCode == \'00\' && patient.sexCode == \'1\'" src="./assets/images/pic_man.png"> <img ng-if="patient.memberCode == \'00\' && patient.sexCode == \'0\'" src="./assets/images/pic_woman.png"> <img ng-if="patient.memberCode != \'00\'" ng-src="{{memberTypes[patient.memberCode].img}}"> </td> <td> <span class="name">{{registration.patientName}}</span><br> <span class="number">门诊号：<span class="positive">{{registration.clinicNum}}</span></span> </td> </tr> <tr> <td class="label"><i class="icon ion-ios-location-outline"></i></td> <td>{{registration.dept}}（{{registration.district}}）</td> </tr> <tr> <td class="label"><i class="icon ion-ios-person-outline"></i></td> <td>{{registration.doctor}}</td> </tr> </table> </li> </ul> <ul class="list registration-other"> <li class="item item-other-head"> <h2>挂号</h2> </li> <li class="item item-other-content"> <table> <tr> <td class="label">就诊时间</td> <td>{{visitTime}}</td> </tr> <tr> <td class="label">排队序号</td> <td>看诊前查看就诊序号</td> </tr> <tr> <td class="label">就诊地点</td> <td>看诊前查看就诊地点</td> </tr> <tr> <td class="label">挂号费</td> <td>{{registration.amount}}</td> </tr> </table> </li> <li class="item item-icon-right" ng-click="illustrationClk()"> <h2 class="positive">就诊、退号说明</h2> <i class="icon ion-ios-arrow-right icon-right"></i> </li> </ul> <div class="operation"> <button ng-if="registration.statusCode == \'0\'" class="button button-positive" ng-click="registrationPay()">支付</button> <button ng-if="registration.statusCode == \'0\' || registration.statusCode == \'1\'" class="button button-outline button-positive" ng-click="registrationBack()">退号</button> </div> </ion-content> </ion-view>'),a.put("modules/tab/tabs.html",'<ion-tabs class="tabs-icon-top tabs-light tabs-color-active-positive"> <ion-tab title="首页" icon-on="ion-ios-medkit-outline" icon-off="ion-ios-medkit-outline" ng-click="tabRouter(\'tab.main\')"> <ion-nav-view name="tab-main"></ion-nav-view> </ion-tab> <ion-tab title="消息" icon-on="ion-ios-bell-outline" icon-off="ion-ios-bell-outline" ng-click="tabRouter(\'tab.message\')"> <ion-nav-view name="tab-message"></ion-nav-view> </ion-tab> <ion-tab title="挂号单" icon-on="ion-ios-paper-outline" icon-off="ion-ios-paper-outline" ng-click="tabRouter(\'tab.registration\')"> <ion-nav-view name="tab-registration"></ion-nav-view> </ion-tab> <ion-tab title="个人" icon-on="ion-ios-person-outline" icon-off="ion-ios-person-outline" ng-click="tabRouter(\'tab.personal\')"> <ion-nav-view name="tab-personal"></ion-nav-view> </ion-tab> </ion-tabs>')}]);