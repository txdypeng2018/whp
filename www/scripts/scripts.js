"use strict";!function(){var a=["ionic","iosDblclick","angular-carousel","ngCordova","properNgCordova"];angular.module("isj",a).run(["$ionicPlatform","$window","$properProperpush","appConstants","$state","$ionicPopup","$http","$location","$ionicHistory","$rootScope","toastService",function(a,b,c,d,e,f,g,h,i,j,k){a.ready(function(){function a(a){if(a.properAlert){if("messages"===a.properCustoms.pageUrl)var b=f.show({template:'<div style="padding: 3px;font-size:15px; text-align:center;">您有新的消息</div>',title:"掌上盛京医院",buttons:[{text:"我知道了",type:"positive",onTap:function(a){a.preventDefault(),b.close()}},{text:"前往查看",type:"positive",onTap:function(a){a.preventDefault(),b.close(),e.go("tab.message")}}]});else if("feedback"===a.properCustoms.pageUrl)var c=f.show({template:'<div style="padding: 3px;font-size:15px; text-align:center;">您有新的意见反馈消息</div>',title:"掌上盛京医院",buttons:[{text:"我知道了",type:"positive",onTap:function(a){a.preventDefault(),b.close()}},{text:"前往查看",type:"positive",onTap:function(b){b.preventDefault(),c.close(),e.go("settingFeedbackView",{opinionId:a.properCustoms.opinionId})}}]})}else"messages"===a.properCustoms.pageUrl?e.go("tab.message"):"feedback"===a.properCustoms.pageUrl&&e.go("settingFeedbackView",{opinionId:a.properCustoms.opinionId})}b.cordova&&b.cordova.plugins&&b.cordova.plugins.Keyboard&&(b.cordova.plugins.Keyboard.hideKeyboardAccessoryBar(!1),b.cordova.plugins.Keyboard.disableScroll(!0)),b.StatusBar&&b.StatusBar.styleDefault();var h=d.properpush;c.init(h).then(function(){console.log("推送初始化成功")},function(a){console.error("error:"+a)}),document.addEventListener("Properpush.openNotification",a,!1),c.getDeviceInfo().then(function(a){cordova.getAppVersion.getVersionCode(function(b){g.get("/app/latest",{params:{current:b,device:a.type}}).success(function(b){"android"===a.type&&window.plugins.UpdateVersion.isUpdating(function(a){if(!a.updating){var c={};c.ver=b.ver||"0",c.url=b.url||"",c.note=b.note.replace(new RegExp(/(<br>)/g),"\n")||"有新版本需要更新！",window.plugins.UpdateVersion.checkVersion(c)}},function(a){console.error(a)})})})},function(a){console.error("error:"+a)})});var l=function(){j.backButtonPressedOnceToExit=!0,k.show("再按一次退出系统"),setTimeout(function(){j.backButtonPressedOnceToExit=!1},2e3)};a.registerBackButtonAction(function(a){return a.preventDefault(),"/tab/main"===h.path()?j.backButtonPressedOnceToExit?navigator.app.exitApp():l():"/tab/personal"===h.path()||"/tab/registration/"===h.path()||"/tab/message"===h.path()?e.go("tab.main"):i.backView()?i.goBack():l(),!1},101)}]),"function"!=typeof String.prototype.startsWith&&(String.prototype.startsWith=function(a){return this.slice(0,a.length)===a}),"function"!=typeof String.prototype.endsWith&&(String.prototype.endsWith=function(a){return-1!==this.indexOf(a,this.length-a.length)}),"function"!=typeof String.prototype.replaceAll&&(String.prototype.replaceAll=function(a,b){return this.replace(new RegExp(a,"gm"),b)})}(),angular.module("isj").directive("isjBackButton",function(){return{restrict:"E",replace:!0,scope:{goBack:"&?",callback:"&"},template:'<a class="icon-return positive" ng-click="goBack()"><i class="icon ion-ios-arrow-left"></i> <div>返回</div></a>',controller:["$scope","$rootScope","$ionicHistory",function(a,b,c){angular.isUndefined(a.goBack)&&(a.goBack=function(){b.requestIndex=0,b.inProcess=!1,c.goBack(),a.callback()})}]}});var dateSelectCtrl=function(a,b){a.leftIconIsShow=!1,a.rightIconIsShow=!1,a.$watch("dateSelectParam.selectDays",function(b){b.length>7&&(a.rightIconIsShow=!0),a.month=a.dateSelectParam.selectDays[0].month}),a.width={};var c=(document.body.clientWidth-34)%7,d=document.body.clientWidth-34-c;a.width.scroll=d+1+"px";var e=d/7;a.width.td=e+"px",c-=1,0>c?(a.width.left="16px",a.width.right="17px"):c>0&&c%2===0?(a.width.left=17+c/2+"px",a.width.right=17+c/2+"px"):c>0?(a.width.left=17+(c-1)/2+"px",a.width.right=17+(c-1)/2+1+"px"):(a.width.left="17px",a.width.right="17px");var f=b.$getByHandle("dateScroll");a.leftSlide=function(){a.leftIconIsShow&&f.scrollBy(-(7*e),0,!0)},a.rightSlide=function(){a.rightIconIsShow&&f.scrollBy(7*e,0,!0)},a.scroll=function(){f.getScrollPosition().left>1?a.leftIconIsShow=!0:a.leftIconIsShow=!1;var b=e*(a.dateSelectParam.selectDays.length-7)-2;f.getScrollPosition().left>=b?a.rightIconIsShow=!1:a.rightIconIsShow=!0,a.$apply(a.leftIconIsShow),a.$apply(a.rightIconIsShow),g()};var g=function(){a.month=a.dateSelectParam.selectDays[parseInt((f.getScrollPosition().left+7)/e)].month};a.dateClk=function(b){a.dateSelectParam.daySelected!==b&&(a.dateSelectParam.daySelected=b,a.callback())}};dateSelectCtrl.$inject=["$scope","$ionicScrollDelegate"],angular.module("isj").directive("isjDateSelect",function(){return{restrict:"E",replace:!1,scope:{dateSelectParam:"=dateSelectParam",callback:"&"},templateUrl:"app/components/date-select.html",controller:dateSelectCtrl}}),function(){angular.module("iosDblclick",[]).directive("iosDblclick",function(){var a,b=300,c=!1;return{restrict:"A",link:function(d,e,f){e.bind("click",function(){if(c){c=!1;var e=(new Date).getTime();b>e-a&&d.$apply(f.iosDblclick)}else a=(new Date).getTime(),c=!0,setTimeout(function(){c=!1},b)})}}})}(),angular.module("isj").constant("msdElasticConfig",{append:""}).directive("msdElastic",["$timeout","$window","msdElasticConfig",function(a,b,c){return{require:"ngModel",restrict:"A, C",link:function(d,e,f,g){function h(){var a=r;n=k,u=getComputedStyle(k),angular.forEach(C,function(b){a+=b+":"+u.getPropertyValue(b)+";"}),t.setAttribute("style",a)}function i(){var b,c,e,f,g;n!==k&&h(),o||(o=!0,t.value=k.value+p,t.style.overflowY=k.style.overflowY,b=""===k.style.height?"auto":parseInt(k.style.height,10),c=getComputedStyle(k).getPropertyValue("width"),"px"===c.substr(c.length-2,2)&&(f=parseInt(c,10)-x.width,t.style.width=f+"px"),e=t.scrollHeight,e>B?(e=B,g="scroll"):A>e&&(e=A),e+=x.height,k.style.overflowY=g||"hidden",b!==e&&(d.$emit("elastic:resize",l,b,e),k.style.height=e+"px"),d.$emit("taResize",l),a(function(){o=!1},1,!1))}function j(){o=!1,i()}var k=e[0],l=e;if("TEXTAREA"===k.nodeName&&b.getComputedStyle){l.css({overflow:"hidden","overflow-y":"hidden","word-wrap":"break-word"});var m=k.value;k.value="",k.value=m;var n,o,p=f.msdElastic?f.msdElastic.replace(/\\n/g,"\n"):c.append,q=angular.element(b),r="position: absolute; top: -999px; right: auto; bottom: auto;left: 0; overflow: hidden; -webkit-box-sizing: content-box;-moz-box-sizing: content-box; box-sizing: content-box;min-height: 0 !important; height: 0 !important; padding: 0;word-wrap: break-word; border: 0;",s=angular.element('<textarea aria-hidden="true" tabindex="-1" style="'+r+'"/>').data("elastic",!0),t=s[0],u=getComputedStyle(k),v=u.getPropertyValue("resize"),w="border-box"===u.getPropertyValue("box-sizing")||"border-box"===u.getPropertyValue("-moz-box-sizing")||"border-box"===u.getPropertyValue("-webkit-box-sizing"),x=w?{width:parseInt(u.getPropertyValue("border-right-width"),10)+parseInt(u.getPropertyValue("padding-right"),10)+parseInt(u.getPropertyValue("padding-left"),10)+parseInt(u.getPropertyValue("border-left-width"),10),height:parseInt(u.getPropertyValue("border-top-width"),10)+parseInt(u.getPropertyValue("padding-top"),10)+parseInt(u.getPropertyValue("padding-bottom"),10)+parseInt(u.getPropertyValue("border-bottom-width"),10)}:{width:0,height:0},y=parseInt(u.getPropertyValue("min-height"),10),z=parseInt(u.getPropertyValue("height"),10),A=Math.max(y,z)-x.height,B=parseInt(u.getPropertyValue("max-height"),10),C=["font-family","font-size","font-weight","font-style","letter-spacing","line-height","text-transform","word-spacing","text-indent"];l.data("elastic")||(B=B&&B>0?B:9e4,t.parentNode!==document.body&&angular.element(document.body).append(t),l.css({resize:"none"===v||"vertical"===v?"none":"horizontal"}).data("elastic",!0),"onpropertychange"in k&&"oninput"in k?k.oninput=k.onkeyup=i:k.oninput=i,q.bind("resize",j),d.$watch(function(){return g.$modelValue}),d.$on("elastic:adjust",function(){h(),j()}),a(i,0,!1),d.$on("$destroy",function(){s.remove(),q.unbind("resize",j)}))}}}}]).directive("resizeFootBar",["$ionicScrollDelegate",function(a){return{replace:!1,link:function(b,c){b.$on("taResize",function(b,d){if(d){var e=document.body.querySelector("#message-detail-content"),f=a.$getByHandle("messageDetailsScroll"),g=d[0].offsetHeight,h=g+10;h>=44&&100>h?(c[0].style.height=h+"px",e.style.bottom=h+"px",f.scrollBottom()):(c[0].style.height="100px",e.style.bottom="100px",c[0].children[0].style.height="90px",f.scrollBottom())}})}}}]);var template='<div class="isj-spinner" ng-show="isShow" ios-dblclick="hideSpinner()">';template+='<div class="loading-div"><ion-spinner icon="ios" class="spinner-dark"></ion-spinner><span>请稍后...</span></div>',template+="</div>",angular.module("isj").directive("isjSpinner",function(){return{restrict:"E",replace:!1,scope:{isShow:"=isShow",callback:"&"},template:template,controller:["$scope",function(a){a.hideSpinner=function(){a.isShow=!1,a.callback()}}]}}),function(a){a.config(["$urlRouterProvider",function(a){a.otherwise("/tab/main")}]);var b=function(a){return!(a.endsWith(".html")||a.endsWith(".svg")&&!a.startsWith("/")||a.startsWith("http"))},c="https://server.propersoft.cn/ihos/api";a.factory("authInterceptor",["$q","$window","$rootScope","userService",function(a,d,e,f){e.requestIndex=0;var g=function(){e.requestIndex>=1&&e.requestIndex--,0===e.requestIndex&&(e.inProcess=!1)},h=function(a){return a.indexOf("modules")<0&&a.indexOf("/photo")<0};return{request:function(a){return h(a.url)&&(e.requestIndex++,e.inProcess=!0),a.headers=a.headers||{},f.hasToken()&&(a.headers.Authorization="Bearer "+f.getToken()),b(a.url)&&(a.url=c+a.url),a},requestError:function(b){return h(b.config.url)&&g(),console.debug("requestError %o",b),a.reject(b)},response:function(b){return h(b.config.url)&&g(),401===b.status&&console.debug("handle the case where the user is not authenticated"),b||a.when(b)},responseError:function(b){return-1===b.status&&(b.data="网络异常，请稍后再试"),401===b.status&&(b.data=null),404===b.status&&(b.data="资源未找到"),503===b.status&&(b.data="连接数过多，请稍后..."),502===b.status&&(b.data="网络异常"),!angular.isUndefined(b.data)&&null!==b.data&&/\w+[\s\.]\w+/.test(b.data)&&(b.data="系统异常"),h(b.config.url)&&g(),console.debug("responseError %o",b),a.reject(b)}}}]),a.run(["$rootScope","$location","appConstants",function(a,b,c){a.location=b,a.$watch("location.url()",function(a){var b=b||[];b.push(["setDocumentTitle",document.domain+"/"+document.title]),b.push(["setDomains",["*."+c.piwikTrackTarget]]),b.push(["trackPageView"]),b.push(["enableLinkTracking"]);var d=Piwik.getTracker(c.piwikServer+"/piwik.php",3);d.setRequestMethod("POST"),d.setCustomUrl(a),d.trackPageView()})}]),a.config(["$httpProvider",function(a){a.interceptors.push("authInterceptor")}])}(angular.module("isj")),function(a){a.constant("appConstants",{piwikServer:"https://server.propersoft.cn:8082",piwikTrackTarget:"server.propersoft.cn/ihos",properpush:{appId:"isj",pushUrl:"https://www.wideunique.top:5555/properpush",secretKey:"b2024e00064bc5d8db70fdee087eae4f",xiaomi:{theAppid:"2882303761517501901",theAppkey:"5591750110901"}}})}(angular.module("isj")),function(a){a.factory("doctorPhotoService",function(){var a={};return a.setPhoto=function(){},a.getPhoto=function(){return""},a})}(angular.module("isj")),function(a){a.factory("toastService",["$cordovaToast","$cordovaDevice",function(a,b){var c={};return c.show=function(c,d,e){if((angular.isUndefined(d)||""===d)&&(d="long"),(angular.isUndefined(e)||""===e)&&(e="bottom"),"bottom"===e){var f=b.getPlatform(),g=-40;"Android"===f&&(g=-120),a.showWithOptions({message:c,duration:d,position:e,addPixelsY:g})}else a.show(c,d,e)},c}])}(angular.module("isj")),function(a){a.factory("userService",["$window",function(a){var b={};return b.setToken=function(b){a.localStorage.token=b},b.getToken=function(){return a.localStorage.token},b.hasToken=function(){return!angular.isUndefined(a.localStorage.token)&&""!==a.localStorage.token},b.clearToken=function(){a.localStorage.token=""},b}])}(angular.module("isj")),function(a){a.factory("utilsService",function(){var a={};return a.getDistrictColor=function(a){for(var b={},c=["district-icon-positive","district-icon-balanced","district-icon-royal","district-icon-calm","district-icon-assertive"],d=0;d<a.length;d++){var e=a[d];b[e.id]=c[d]}return b},a.specialCodeReplace=function(a){var b=/[^\u4e00-\u9fbf\u002E\u00B7\d\w]/g;return a=a.replace(b,"")},a})}(angular.module("isj")),function(a){var b=function(a,b,c,d,e,f,g,h){a.title="收藏的医生",a.vm={moreData:!1,loadMore:function(){}};var i=function(c,d){var e=f.getPhoto(c);angular.isUndefined(e)||""===e?b.get("/doctors/photo",{params:{doctorId:c,index:d}}).success(function(b,d,e,g){a.introductions[g.params.index].photo=b,f.setPhoto(c,b)}).error(function(b,c,d,e){a.introductions[e.params.index].photo=""}):a.introductions[d].photo=e},j=function(c){a.introductions=null,c.index=a.httpIndex.index,b.get("/user/collectionDoctors",{params:c}).success(function(b,c,d,e){if(angular.isUndefined(a.httpIndex[e.params.index])){a.spinnerShow=!1,a.introductions=b;for(var f=0;f<b.length;f++)i(b[f].id,f)}}).error(function(b,c,d,e){angular.isUndefined(a.httpIndex[e.params.index])&&(a.spinnerShow=!1,a.introductions=[],g.show(b))})["finally"](function(){a.$broadcast("scroll.refreshComplete")})};a.doSearch=function(){a.spinnerShow=!0,a.searchNameTmp=a.searchName,a.httpIndex.index++,h.scrollTop(),j({searchName:a.searchName})},a.$on("$ionicView.beforeEnter",function(){var b=e.currentView().forwardViewId;(angular.isUndefined(b)||null===b||""===b)&&(a.searchName="",a.searchNameTmp=""),a.spinnerShow=!0,a.searchName=a.searchNameTmp,a.httpIndex={index:1},j({searchName:a.searchName})}),a.viewIntroduction=function(a){c.go("doctorIntroductionView",{doctorId:a,type:"1"})},a.spinnerCancel=function(){a.httpIndex[a.httpIndex.index]="CANCEL",a.$broadcast("scroll.refreshComplete")},a.doRefresh=function(){a.spinnerShow=!0,a.httpIndex.index++,j({searchName:a.searchName})}};b.$inject=["$scope","$http","$state","$timeout","$ionicHistory","doctorPhotoService","toastService","$ionicScrollDelegate"];var c=function(a){a.state("collectionDoctorList",{url:"/collectionDoctor/collectionDoctorList",templateUrl:"modules/doctorIntroduction/doctorIntroductionList.html",controller:b})};c.$inject=["$stateProvider"],a.config(c)}(angular.module("isj")),function(a){var b=function(a,b,c,d,e,f,g,h){a.title="医生介绍",a.searchNameTmp="";var i=function(c,d){var e=f.getPhoto(c);angular.isUndefined(e)||""===e?b.get("/doctors/photo",{params:{doctorId:c,index:d}}).success(function(b,d,e,g){a.introductions[g.params.index].photo=b,f.setPhoto(c,b)}).error(function(b,c,d,e){a.introductions[e.params.index].photo=""}):a.introductions[d].photo=e},j=function(c,d){c.index=a.httpIndex.index,b.get("/doctors",{params:c}).success(function(b,c,e,f){if(angular.isUndefined(a.httpIndex[f.params.index])){a.refreshFlg=!1,a.spinnerShow=!1,b.length<10&&(a.vm.moreData=!1);var g=0;if(d)a.introductions=b;else{g=a.introductions.length;for(var h=0;h<b.length;h++)a.introductions.push(b[h])}for(var j=g;j<a.introductions.length;j++)i(a.introductions[j].id,j)}else a.vm.moreData=!1;a.$broadcast("scroll.infiniteScrollComplete")}).error(function(b,c,d,e){angular.isUndefined(a.httpIndex[e.params.index])&&(a.spinnerShow=!1,a.introductions=[],g.show(b))})["finally"](function(){a.$broadcast("scroll.refreshComplete")})};a.doSearch=function(){a.httpIndex.index++,a.searchNameTmp=a.searchName,h.scrollTop(),a.vm.init()},a.viewIntroduction=function(b){a.vm.moreData=!1,c.go("doctorIntroductionView",{doctorId:b,type:"1"})},a.vm={moreData:!0,pageNo:1,init:function(){a.spinnerShow=!0,a.introductions=null,a.vm.pageNo=1,a.vm.moreData=!0,j({searchName:a.searchName,pageNo:a.vm.pageNo},!0)},loadMore:function(){a.vm.pageNo++,j({searchName:a.searchName,pageNo:a.vm.pageNo},!1)}},a.$on("$ionicView.beforeEnter",function(){var b=e.currentView().forwardViewId;a.searchName=a.searchNameTmp,a.vm.moreData=!0,(angular.isUndefined(b)||null===b||""===b)&&(angular.isUndefined(a.introductions)||0===a.introductions.length||!angular.isUndefined(a.searchNameTmp)&&""!==a.searchNameTmp)&&(a.httpIndex={index:1},a.searchNameTmp="",a.searchName="",a.vm.init())}),a.spinnerCancel=function(){a.httpIndex[a.httpIndex.index]="CANCEL",a.$broadcast("scroll.refreshComplete")},a.doRefresh=function(){a.httpIndex.index++,a.vm.init()}};b.$inject=["$scope","$http","$state","$timeout","$ionicHistory","doctorPhotoService","toastService","$ionicScrollDelegate"];var c=function(a){a.state("doctorIntroductionList",{url:"/doctorIntroductionList",templateUrl:"modules/doctorIntroduction/doctorIntroductionList.html",controller:b})};c.$inject=["$stateProvider"],a.config(c)}(angular.module("isj")),function(a){var b=function(a,b,c,d,e,f,g){a.type="1"===d.type,a.$on("$ionicView.beforeEnter",function(){a.isLogin=e.hasToken(),a.isCollection=!1,b.get("/user/collectionDoctors/"+d.doctorId).success(function(b){a.isCollection=!(angular.isUndefined(b.doctorId)||""===b.doctorId)}).error(function(b,c){401!==c?g.show(b):(e.clearToken(),a.isLogin=!1)})}),b.get("/doctors/"+d.doctorId).success(function(c){a.introduction=c;var e=f.getPhoto(d.doctorId);angular.isUndefined(e)||""===e?b.get("/doctors/photo",{params:{doctorId:d.doctorId}}).success(function(b){a.introduction.photo=b,f.setPhoto(d.doctorId,b)}).error(function(){a.introduction.photo=""}):a.introduction.photo=e}).error(function(a){g.show(a)}),a.collectionDoctor=function(){a.isLogin?a.isCollection?b["delete"]("/user/collectionDoctors/"+d.doctorId).success(function(){a.isCollection=!1,g.show("取消收藏成功","short")}).error(function(a){g.show(a)}):b.post("/user/collectionDoctors",{doctorId:d.doctorId}).success(function(){a.isCollection=!0,g.show("收藏成功","short")}).error(function(a){g.show(a)}):c.go("login")},a.register=function(){a.isLogin?c.go("registerDoctorTimeSelect",{doctorId:d.doctorId,date:"",districtId:"",type:"2"}):c.go("login")}};b.$inject=["$scope","$http","$state","$stateParams","userService","doctorPhotoService","toastService"];var c=function(a){a.state("doctorIntroductionView",{url:"/doctorIntroductionList/doctorIntroductionView/:doctorId/:type",templateUrl:"modules/doctorIntroduction/doctorIntroductionView.html",controller:b})};c.$inject=["$stateProvider"],a.config(c)}(angular.module("isj")),function(a){var b=function(a,b,c,d,e){a.$on("$ionicView.beforeEnter",function(){d.get("/dataBase/familyMenberTypes").success(function(b){a.memberTypes=[];for(var c in b)b[c].code=c,a.memberTypes.push(b[c]);a.memberTypes.sort(function(a,b){return a.code-b.code})}).error(function(a){e.show(a)})}),a.medicalCardEdit=function(a){b.go("familyMemberEdit",{memberCode:a,skipId:c.skipId})}};b.$inject=["$scope","$state","$stateParams","$http","toastService"];var c=function(a){a.state("familyMemberAdd",{url:"/familyMember/familyMemberAdd/:skipId",templateUrl:"modules/familyMember/familyMemberAdd.html",controller:b})};c.$inject=["$stateProvider"],a.config(c)}(angular.module("isj")),function(a){var b=function(a,b,c,d,e,f,g){b.get("/dataBase/sexTypes").success(function(b){a.sexTypes=b,a.sexs=[];for(var c in a.sexTypes)a.sexTypes[c].code=c,a.sexs.push(a.sexTypes[c])}).error(function(a){f.show(a)});var h=function(){b.get("/user/familyMembers/familyMember",{params:{memberId:c.memberId}}).success(function(b){var c="";c="00"===b.memberCode&&"1"===b.sexCode?"./assets/images/pic_man.png":"00"===b.memberCode&&"0"===b.sexCode?"./assets/images/pic_woman.png":a.memberTypes[b.memberCode].img,a.member={memberCode:b.memberCode,member:b.member,sexCode:b.sexCode,sex:b.sex,name:b.name,img:c,idCard:b.idCard,phone:b.phone,patientVisits:"1"===b.patientVisits,patientVisitsInit:"1"===b.patientVisits}}).error(function(a){f.show(a)})};a.$on("$ionicView.beforeEnter",function(){a.isSubmit=!1,a.hasSex=!1,a.member={},angular.isUndefined(c.memberId)||""===c.memberId?(a.isAdd=!0,b.get("/dataBase/familyMenberTypes/"+c.memberCode).success(function(b){a.member={memberCode:b.code,member:b.name,sexCode:b.sexCode,sex:"",name:"",img:b.img,idCard:"",phone:"",patientVisits:!1},""!==b.sexCode&&(a.member.sex=a.sexTypes[b.sexCode].name,a.hasSex=!0)}).error(function(a){f.show(a)})):(a.isAdd=!1,a.hasSex=!0,b.get("/dataBase/familyMenberTypes").success(function(b){a.memberTypes=b,h()}).error(function(a){f.show(a)}))});var i=function(){var a=0,b="familyMemberList";angular.isUndefined(c.skipId)||""===c.skipId||(b=c.skipId);for(var d in e.viewHistory().views){var f=e.viewHistory().views[d];if(f.stateName===b){a=f.index;break}}e.goBack(a-e.currentView().index)},j=function(a){var b=!1;return(15===a.length||18===a.length)&&(b=!0),b},k=function(){if(a.member.name=g.specialCodeReplace(a.member.name),""===a.member.name)return f.show("姓名不能为空"),!1;if(""===a.member.sexCode)return f.show("性别不能为空"),!1;if(""===a.member.idCard)return f.show("身份证号不能为空"),!1;if(""===a.member.phone)return f.show("手机号不能为空"),!1;var b=/^[0-9]+$/;return b.test(a.member.phone)?11!==a.member.phone.length?(f.show("手机号输入错误"),!1):j(a.member.idCard)?!0:(f.show("身份证号输入错误"),!1):(f.show("手机号输入错误"),!1)};a.saveMember=function(){if(a.isSubmit=!0,k())if(a.isAdd){var d={name:a.member.name,sexCode:a.member.sexCode,sex:a.sexTypes[a.member.sexCode].name,idCard:a.member.idCard,phone:a.member.phone,memberCode:a.member.memberCode,member:a.member.member,patientVisits:a.member.patientVisits?"1":"0"};b.post("/user/familyMembers/familyMember",d).success(function(){i(),f.show("保存成功")}).error(function(b){a.isSubmit=!1,f.show(b)})}else{var e={id:c.memberId,name:a.member.name,phone:a.member.phone,patientVisits:a.member.patientVisits?"1":"0"};b.put("/user/familyMembers/familyMember",e).success(function(){i(),f.show("保存成功")}).error(function(b){a.isSubmit=!1,f.show(b)})}else a.isSubmit=!1};var l=null;a.deleteMember=function(){l=d.confirm({title:"提示",template:'<span style="font-size: 16px">是否删除该家庭成员?</span>',cancelText:"取消",okText:"确定"}),l.then(function(d){d&&(a.isSubmit=!0,b["delete"]("/user/familyMembers/familyMember",{params:{memberId:c.memberId}}).success(function(){i(),f.show("删除成功")}).error(function(b){a.isSubmit=!1,f.show(b)}))})},a.$on("$ionicView.beforeLeave",function(){null!==l&&l.close()})};b.$inject=["$scope","$http","$stateParams","$ionicPopup","$ionicHistory","toastService","utilsService"];var c=function(a){a.state("familyMemberEdit",{url:"/familyMember/familyMemberEdit/:memberId/:memberCode/:skipId",templateUrl:"modules/familyMember/familyMemberEdit.html",controller:b})};c.$inject=["$stateProvider"],a.config(c)}(angular.module("isj")),function(a){var b=function(a,b,c,d){var e=function(){a.members=null,b.get("/user/familyMembers",{params:{index:a.httpIndex.index}}).success(function(b,c,d,e){if(angular.isUndefined(a.httpIndex[e.params.index])){a.members=b,9-a.members.length>0?a.canAdd=!0:a.canAdd=!1;for(var f=0;f<a.members.length;f++)a.members[f].idCard=a.members[f].idCard.substring(0,6)+"********"+a.members[f].idCard.substring(14,18),a.members[f].phone=a.members[f].phone.substring(0,3)+"****"+a.members[f].phone.substring(7,11)}}).error(function(b,c,e,f){angular.isUndefined(a.httpIndex[f.params.index])&&(a.members=[],d.show(b))})["finally"](function(){a.$broadcast("scroll.refreshComplete")})};a.$on("$ionicView.beforeEnter",function(){a.canAdd=!1,b.get("/dataBase/familyMenberTypes").success(function(b){a.memberTypes=b}).error(function(a){d.show(a)}),a.httpIndex={index:1},e()}),a.familyMemberAdd=function(){c.go("familyMemberAdd")},a.medicalCardEdit=function(a){c.go("familyMemberEdit",{memberId:a})},a.spinnerCancel=function(){a.httpIndex[a.httpIndex.index]="CANCEL",a.$broadcast("scroll.refreshComplete")},a.doRefresh=function(){a.httpIndex.index++,e()}};b.$inject=["$scope","$http","$state","toastService"];var c=function(a){a.state("familyMemberList",{url:"/familyMember/familyMemberList",templateUrl:"modules/familyMember/familyMemberList.html",controller:b})};c.$inject=["$stateProvider"],a.config(c)}(angular.module("isj")),function(a){var b=function(a,b,c,d,e){a.memberId=d.memberId,a.$on("$ionicView.beforeEnter",function(){a.canAdd=!1,a.members=null,b.get("/dataBase/familyMenberTypes").success(function(b){a.memberTypes=b}).error(function(a){e.show(a)}),b.get("/user/familyMembers").success(function(b){a.members=b,9-a.members.length>0?a.canAdd=!0:a.canAdd=!1}).error(function(b){a.members=[],e.show(b)})}),a.memberManage=function(){c.go("familyMemberList")},a.memberSelect=function(a){"registerConfirmToday"===d.skipId?c.go(d.skipId,{memberId:a,doctorId:d.doctorId,date:d.date}):"registerConfirmAppt"===d.skipId?c.go(d.skipId,{memberId:a,doctorId:d.doctorId,date:d.date}):c.go(d.skipId,{memberId:a})},a.addMember=function(){c.go("familyMemberAdd",{skipId:"familyMemberSelect"})}};b.$inject=["$scope","$http","$state","$stateParams","toastService"];var c=function(a){a.state("familyMemberSelect",{url:"/familyMember/familyMemberSelect/:skipId/:memberId/:doctorId/:date",templateUrl:"modules/familyMember/familyMemberSelect.html",controller:b})};c.$inject=["$stateProvider"],a.config(c)}(angular.module("isj")),function(a){var b=function(a,b){a.myURL=b.trustAsResourceUrl("http://sj-hospital.org/yygk/jianjie/")};b.$inject=["$scope","$sce"];var c=function(a){a.state("hospitalIntroduce",{url:"/hospitalIntroduce",cache:!1,templateUrl:"modules/hospitalIntroduce/hospitalIntroduce.html",controller:b})};c.$inject=["$stateProvider"],a.config(c)}(angular.module("isj")),function(a){var b=function(a,b,c,d){var e=function(){b.get("/hospitalNavigation/builds/floors",{params:{buildId:c.id}}).success(function(b){a.floorList=b}).error(function(a){d.show(a)})};a.$on("$ionicView.beforeEnter",function(){(angular.isUndefined(a.floorList)||0===a.floorList.length)&&e()})};b.$inject=["$scope","$http","$stateParams","toastService"];var c=function(a){a.state("hospitalNavigationFloorList",{url:"/hospitalNavigation/floorList/:id",templateUrl:"modules/hospitalNavigation/floorList.html",controller:b})};c.$inject=["$stateProvider"],a.config(c)}(angular.module("isj")),function(a){var b=function(a,b,c,d,e){var f=function(){b.get("/hospitalNavigation/builds").success(function(b){a.districtBuilds=b}).error(function(a){e.show(a)})};a.$on("$ionicView.beforeEnter",function(){(angular.isUndefined(a.districtBuilds)||0===a.districtBuilds.length)&&f()}),a.buildingClk=function(a){d.go("hospitalNavigationFloorList",{id:a})}};b.$inject=["$scope","$http","$timeout","$state","toastService"];var c=function(a){a.state("hospitalNavigation",{url:"/hospitalNavigation",templateUrl:"modules/hospitalNavigation/hospitalNavigation.html",controller:b})};c.$inject=["$stateProvider"],a.config(c)}(angular.module("isj")),function(a){var b=function(a,b,c,d,e){a.$on("$ionicView.beforeEnter",function(){a.isSubmit=!1,a.input={phone:""}}),a.getCode=function(){var c={category:"2",phone:a.input.phone.toString()};a.isSubmit=!0,d.get("/permission/verificationCode",{params:c}).success(function(){b.go("forgetPasswordSetting",{phone:c.phone})}).error(function(b){a.isSubmit=!1,e.show(b)})}};b.$inject=["$scope","$state","$ionicHistory","$http","toastService"];var c=function(a){a.state("forgetPassword",{url:"/forgetPassword",templateUrl:"modules/login/forgetPassword.html",controller:b})};c.$inject=["$stateProvider"],a.config(c)}(angular.module("isj")),function(a){var b=function(a,b,c,d,e,f){a.$on("$ionicView.beforeEnter",function(){a.isResend=!1,a.isSubmit=!1,a.phone=b.phone.toString().substring(0,3)+"****"+b.phone.toString().substring(7,11),a.input={phone:b.phone,verificationCode:"",newPassword:""},a.time={second:60},a.secondString="("+a.time.second+")";var c=function(){0!==a.time.second&&(--a.time.second,0===a.time.second?(a.isResend=!0,a.secondString=""):a.secondString="("+a.time.second+")")};setInterval(function(){a.$apply(c)},1e3)}),a.goBack=function(){d.goBack(-2)},a.resendCode=function(){var c={category:"3",phone:b.phone};e.get("/permission/verificationCode",{params:c}).success(function(){a.time.second=60,a.secondString="("+a.time.second+")",a.isResend=!1}).error(function(a){f.show(a)})};var g=function(){if(""===a.input.verificationCode)return f.show("验证码不能为空"),!1;if(""===a.input.newPassword)return f.show("密码不能为空"),!1;if(6!==a.input.verificationCode.length)return f.show("验证码必须6个数字"),!1;var b=/^[0-9]+$/;if(!b.test(a.input.verificationCode))return f.show("验证码必须为数字"),!1;if(a.input.newPassword.length<6||a.input.newPassword.length>20)return f.show("密码必须6-20个字符"),!1;var c=/^[0-9a-zA-Z_]+$/;return c.test(a.input.newPassword)?!0:(f.show("密码必须由英文字母、数字、下划线组成"),!1)};a.changePassword=function(){a.isSubmit=!0,g()?(a.input.category="2",e.put("/permission/account",a.input).success(function(){d.goBack(-2),f.show("密码修改成功")}).error(function(b){a.isSubmit=!1,f.show(b)})):a.isSubmit=!1}};b.$inject=["$scope","$stateParams","$state","$ionicHistory","$http","toastService"];var c=function(a){a.state("forgetPasswordSetting",{url:"/forgetPasswordSetting/:phone",templateUrl:"modules/login/forgetPasswordSetting.html",controller:b})};c.$inject=["$stateProvider"],a.config(c)}(angular.module("isj")),function(a){var b=function(a,b,c,d,e,f,g,h,i,j){a.$on("$ionicView.beforeEnter",function(){a.input={phone:"",password:""}}),b.get("/permission/loginPrompt").success(function(b){a.loginPrompt=j.trustAsHtml(b)}).error(function(a){g.show(a)}),a.goBack=function(){angular.isUndefined(d.skipId)||""===d.skipId?f.goBack():c.go(d.skipId)},a.login=function(){var e={phone:a.input.phone.toString(),password:a.input.password};b.post("/permission/login",e).success(function(b){var e={userid:a.input.phone.toString(),otherInfo:"",unbindOtherDevice:!0};i.bindUserid(e).then(function(){console.log("用户绑定成功")},function(a){alert("error:"+a)}),h.setToken(b),angular.isUndefined(d.skipId)||""===d.skipId?f.goBack():c.go(d.skipId)}).error(function(a){g.show(a)})}};b.$inject=["$scope","$http","$state","$stateParams","$window","$ionicHistory","toastService","userService","$properProperpush","$sce"];var c=function(a){a.state("login",{url:"/login/:skipId",templateUrl:"modules/login/login.html",controller:b})};c.$inject=["$stateProvider"],a.config(c)}(angular.module("isj")),function(a){var b=function(a,b,c,d,e){a.$on("$ionicView.beforeEnter",function(){a.isSubmit=!1,a.input={phone:""}}),a.getCode=function(){var c={category:"1",phone:a.input.phone.toString()};a.isSubmit=!0,d.get("/permission/verificationCode",{params:c}).success(function(){b.go("registSetting",{phone:c.phone})}).error(function(b){a.isSubmit=!1,e.show(b)})}};b.$inject=["$scope","$state","$ionicHistory","$http","toastService"];var c=function(a){a.state("regist",{url:"/regist",templateUrl:"modules/login/regist.html",controller:b})};c.$inject=["$stateProvider"],a.config(c)}(angular.module("isj")),function(a){var b=function(a,b,c,d,e,f,g,h){a.$on("$ionicView.beforeEnter",function(){a.isResend=!1,a.isSubmit=!1,a.phone=c.phone.toString().substring(0,3)+"****"+c.phone.toString().substring(7,11),a.input={phone:c.phone,verificationCode:"",password:"",name:"",idCard:""},a.time={second:60},a.secondString="("+a.time.second+")";var b=function(){0!==a.time.second&&(--a.time.second,0===a.time.second?(a.isResend=!0,a.secondString=""):a.secondString="("+a.time.second+")")};setInterval(function(){a.$apply(b)},1e3)}),a.goBack=function(){b.goBack(-2)},a.resendCode=function(){var b={category:"3",phone:c.phone};d.get("/permission/verificationCode",{params:b}).success(function(){a.time.second=60,a.secondString="("+a.time.second+")",a.isResend=!1}).error(function(a){e.show(a)})};var i=function(a){var b=!1;return(15===a.length||18===a.length)&&(b=!0),b},j=function(){if(""===a.input.verificationCode)return e.show("验证码不能为空"),!1;if(""===a.input.password)return e.show("密码不能为空"),!1;if(a.input.name=h.specialCodeReplace(a.input.name),""===a.input.name)return e.show("姓名不能为空"),!1;if(""===a.input.idCard)return e.show("身份证号不能为空"),!1;if(6!==a.input.verificationCode.length)return e.show("验证码必须6个数字"),!1;var b=/^[0-9]+$/;if(!b.test(a.input.verificationCode))return e.show("验证码必须为数字"),!1;if(a.input.password.length<6||a.input.password.length>20)return e.show("密码必须6-20个字符"),!1;var c=/^[0-9a-zA-Z_]+$/;return c.test(a.input.password)?i(a.input.idCard)?!0:(e.show("身份证号输入错误"),
!1):(e.show("密码必须由英文字母、数字、下划线组成"),!1)};a.regist=function(){a.isSubmit=!0,j()?d.post("/permission/account",a.input).success(function(a){g.setToken(a),f.go("tab.personal"),e.show("注册成功")}).error(function(b){a.isSubmit=!1,e.show(b)}):a.isSubmit=!1}};b.$inject=["$scope","$ionicHistory","$stateParams","$http","toastService","$state","userService","utilsService"];var c=function(a){a.state("registSetting",{url:"/registSetting/:phone",templateUrl:"modules/login/registSetting.html",controller:b})};c.$inject=["$stateProvider"],a.config(c)}(angular.module("isj")),function(a){var b=function(a,b,c,d,e){a.$on("$ionicView.beforeEnter",function(){a.isSubmit=!1,a.input={memberId:c.memberId,medicalNum:""},b.get("/user/familyMembers/familyMember",{params:{memberId:c.memberId}}).success(function(b){a.input.medicalNum=b.medicalNum}).error(function(a){e.show(a)})}),a.changeNum=function(){a.isSubmit=!0,b.put("/user/medicalNum",a.input).success(function(){d.goBack(),e.show("更新成功")}).error(function(b){a.isSubmit=!1,e.show(b)})},a.createNum=function(){a.isSubmit=!0,b.post("/user/medicalNum",{memberId:a.input.memberId}).success(function(){d.goBack(),e.show("建档成功")}).error(function(b){a.isSubmit=!1,e.show(b)})}};b.$inject=["$scope","$http","$stateParams","$ionicHistory","toastService"];var c=function(a){a.state("medicalCardEdit",{url:"/medicalCard/medicalCardEdit/:memberId",templateUrl:"modules/medicalCard/medicalCardEdit.html",controller:b})};c.$inject=["$stateProvider"],a.config(c)}(angular.module("isj")),function(a){var b=function(a,b,c,d){var e=function(){a.members=null,b.get("/user/familyMembers",{params:{index:a.httpIndex.index}}).success(function(b,c,d,e){if(angular.isUndefined(a.httpIndex[e.params.index])){a.members=b;for(var f=0;f<a.members.length;f++)a.members[f].idCard=a.members[f].idCard.substring(0,6)+"********"+a.members[f].idCard.substring(14,18)}}).error(function(b,c,e,f){angular.isUndefined(a.httpIndex[f.params.index])&&(a.members=[],d.show(b))})["finally"](function(){a.$broadcast("scroll.refreshComplete")})};a.$on("$ionicView.beforeEnter",function(){b.get("/dataBase/familyMenberTypes").success(function(b){a.memberTypes=b}).error(function(a){d.show(a)}),a.httpIndex={index:1},e()}),a.medicalCardEdit=function(a){c.go("medicalCardEdit",{memberId:a})},a.spinnerCancel=function(){a.httpIndex[a.httpIndex.index]="CANCEL",a.$broadcast("scroll.refreshComplete")},a.doRefresh=function(){a.httpIndex.index++,e()}};b.$inject=["$scope","$http","$state","toastService"];var c=function(a){a.state("medicalCardList",{url:"/medicalCard/medicalCardList",templateUrl:"modules/medicalCard/medicalCardList.html",controller:b})};c.$inject=["$stateProvider"],a.config(c)}(angular.module("isj")),function(a){var b=function(a,b,c){var d=function(){b.get("/medicalGuide").success(function(b){a.medicalGuide=b}).error(function(a){c.show(a)})};a.$on("$ionicView.beforeEnter",function(){(angular.isUndefined(a.medicalGuide)||""===a.medicalGuide)&&d()})};b.$inject=["$scope","$http","toastService"];var c=function(a){a.state("medicalGuide",{url:"/medicalGuide",templateUrl:"modules/medicalGuide/medicalGuide.html",controller:b})};c.$inject=["$stateProvider"],a.config(c)}(angular.module("isj")),function(a){var b=function(a,b,c,d,e,f,g,h,i){a.memberId=f.memberId,c.get("/medicalReports/prompt").success(function(a){(angular.isUndefined(b.reportPrompt)||""===b.reportPrompt||b.reportPrompt!==a)&&(b.reportPrompt=a,k())}).error(function(a){h.show(a)});var j=null,k=function(){j=g.show({template:'<div style="padding: 3px;font-size:15px">'+b.reportPrompt+"</div>",title:"温馨提示",cssClass:"agreement-popup",buttons:[{text:"我知道了",type:"button-positive",onTap:function(a){a.preventDefault(),j.close()}}]})};a.promptClk=function(){k()},a.$on("$ionicView.beforeLeave",function(){null!==j&&j.close()}),a.categoryClk=function(b){a.category=b,a.httpIndex.index++,l(a.searchStr)};var l=function(b){a.reports=null,b.memberId=f.memberId,b.category=a.category,b.index=a.httpIndex.index,c.get("/medicalReports",{params:b}).success(function(b,c,d,e){angular.isUndefined(a.httpIndex[e.params.index])&&(a.reports=b)}).error(function(b,c,d,e){angular.isUndefined(a.httpIndex[e.params.index])&&(a.reports=[],h.show(b))})["finally"](function(){a.$broadcast("scroll.refreshComplete")})};a.category="1",a.searchStr={searchTime:"",searchStatus:""},a.searchTimeTypes=[{code:"",name:"时间不限"},{code:"week",name:"一周内"},{code:"month",name:"一月内"},{code:"halfYear",name:"半年内"},{code:"year",name:"一年内"}],a.searchStatusTypes=[{code:"",name:"状态不限"},{code:"1",name:"已出"},{code:"0",name:"未出"}],a.searchReport=function(){a.httpIndex.index++,i.scrollTop(),l(a.searchStr)},a.$on("$ionicView.beforeEnter",function(){a.patient={},c.get("/user/familyMembers/familyMember",{params:{memberId:f.memberId}}).success(function(b){a.patient=b}).error(function(a){h.show(a)}),a.httpIndex={index:1},l(a.searchStr)}),a.goBack=function(){e.go("tab.main")},a.selectMember=function(){e.go("familyMemberSelect",{skipId:"medicalReportList",memberId:a.patient.id})},a.viewReport=function(b,c){"1"===c?"1"===a.category?e.go("medicalReportView1",{id:b,category:a.category}):e.go("medicalReportView2",{id:b,category:a.category}):h.show("报告未出，请稍后查看")},a.spinnerCancel=function(){a.httpIndex[a.httpIndex.index]="CANCEL",a.$broadcast("scroll.refreshComplete")},a.doRefresh=function(){a.httpIndex.index++,l(a.searchStr)}};b.$inject=["$scope","$rootScope","$http","$window","$state","$stateParams","$ionicPopup","toastService","$ionicScrollDelegate"];var c=function(a){a.state("medicalReportList",{url:"/medicalReportList/:memberId",templateUrl:"modules/medicalReport/medicalReportList.html",controller:b})};c.$inject=["$stateProvider"],a.config(c)}(angular.module("isj")),function(a){var b=function(a,b,c,d){b.get("/medicalReports/"+c.category+"/"+c.id).success(function(b){a.report=b}).error(function(a){d.show(a)})};b.$inject=["$scope","$http","$stateParams","toastService"];var c=function(a){a.state("medicalReportView1",{url:"/medicalReportList/medicalReportView1/:category/:id",templateUrl:"modules/medicalReport/medicalReportView1.html",controller:b})};c.$inject=["$stateProvider"],a.config(c)}(angular.module("isj")),function(a){var b=function(a,b,c,d){b.get("/medicalReports/"+c.category+"/"+c.id).success(function(b){a.image=b}).error(function(a){d.show(a)})};b.$inject=["$scope","$http","$stateParams","toastService"];var c=function(a){a.state("medicalReportView2",{url:"/medicalReportList/medicalReportView2/:category/:id",templateUrl:"modules/medicalReport/medicalReportView2.html",controller:b})};c.$inject=["$stateProvider"],a.config(c)}(angular.module("isj")),function(a){var b=function(a,b,c,d,e,f){var g=function(c){a.recipes=null,c.memberId=d.memberId,c.index=a.httpIndex.index,b.get("/recipes",{params:c}).success(function(b,c,d,e){if(angular.isUndefined(a.httpIndex[e.params.index])){a.recipes=b,a.amount="0.00",a.recipeNums=[];for(var f=0;f<a.recipes.length;f++){var g=a.recipes[f];g.canCheck=!1;for(var h=0;h<g.recipes.length;h++)"0"===g.recipes[h].statusCode&&(g.canCheck=!0,g.isCheck=!1);g.canCheck&&(g.isCheck=!1)}}}).error(function(b,c,d,f){angular.isUndefined(a.httpIndex[f.params.index])&&(a.recipes=[],e.show(b))})["finally"](function(){a.$broadcast("scroll.refreshComplete")})};a.searchStr={searchStatus:""},a.searchStatusTypes=[{code:"",name:"全部"},{code:"0",name:"未支付"},{code:"1",name:"已支付"}],a.searchPay=function(){a.httpIndex.index++,f.scrollTop(),g(a.searchStr)},a.$on("$ionicView.beforeEnter",function(){a.httpIndex={index:1},a.patient={},b.get("/user/familyMembers/familyMember",{params:{memberId:d.memberId}}).success(function(b){a.patient=b}).error(function(a){e.show(a)}),a.isSubmit=!1,g(a.searchStr)}),a.goBack=function(){c.go("tab.main")},a.selectMember=function(){c.go("familyMemberSelect",{skipId:"onlinePaymentList",memberId:a.patient.id})};var h=function(b,c){var d=a.recipeNums.indexOf(b);c?0>d&&a.recipeNums.push(b):d>=0&&a.recipeNums.splice(d,1)},i=function(b,c){c?(a.amount=(Number(a.amount)+Number(b)+1).toFixed(2),a.amount=Number(a.amount-1).toFixed(2)):(a.amount=(Number(a.amount)-Number(b)+1).toFixed(2),a.amount=Number(a.amount-1).toFixed(2))};a.checkClk=function(b){for(var c={},d=0;d<a.recipes.length;d++)if(c=a.recipes[d],c.outpatientNum===b)for(var e=0;e<c.recipes.length;e++)"0"===c.recipes[e].statusCode&&(c.isCheck!==c.recipes[e].isCheck&&i(c.recipes[e].total,c.isCheck),c.recipes[e].isCheck=c.isCheck,h(c.recipes[e].recipeNum,c.isCheck));else if(c.isCheck){c.isCheck=!1;for(var f=0;f<c.recipes.length;f++)"0"===c.recipes[f].statusCode&&(i(c.recipes[f].total,c.isCheck),c.recipes[f].isCheck=!1,h(c.recipes[f].recipeNum,c.isCheck))}},a.payClk=function(){if(a.recipeNums.length>0){for(var f={memberId:a.patient.id,outpatients:[]},g=0;g<a.recipes.length;g++){for(var h=a.recipes[g],i=[],j=0;j<h.recipes.length;j++)h.recipes[j].isCheck&&i.push(h.recipes[j].recipeNum);i.length>0&&f.outpatients.push({outpatientNum:h.outpatientNum,recipeNums:i})}a.isSubmit=!0,b.post("/orders",f).success(function(a){c.go("paymentSelect",{orderNum:a.orderNum,memberId:d.memberId})}).error(function(b){a.isSubmit=!1,e.show(b)})}},a.spinnerCancel=function(){a.httpIndex[a.httpIndex.index]="CANCEL",a.$broadcast("scroll.refreshComplete")},a.doRefresh=function(){a.httpIndex.index++,g(a.searchStr)}};b.$inject=["$scope","$http","$state","$stateParams","toastService","$ionicScrollDelegate"];var c=function(a){a.state("onlinePaymentList",{url:"/onlinePayment/onlinePaymentList/:memberId",templateUrl:"modules/onlinePayment/onlinePaymentList.html",controller:b})};c.$inject=["$stateProvider"],a.config(c)}(angular.module("isj")),function(a){var b=function(a,b,c,d,e){a.resultImgSrc=d.resultImgSrc,a.resultText=d.resultText;var f=function(){a.fromPage="register";for(var b in e.viewHistory().views){var c=e.viewHistory().views[b];"onlinePaymentList"===c.stateName&&(a.fromPage="pay")}};f(),a.goBack=function(){c.go("tab.main")},a.viewRegistration=function(){"pay"===a.fromPage?c.go("onlinePaymentList",{memberId:d.memberId}):c.go("tab.registration",{memberId:d.memberId})}};b.$inject=["$scope","$http","$state","$stateParams","$ionicHistory"];var c=function(a){a.state("paymentResult",{url:"/onlinePayment/paymentResult/:resultImgSrc/:resultText/:memberId",cache:"false",templateUrl:"modules/onlinePayment/paymentResult.html",controller:b})};c.$inject=["$stateProvider"],a.config(c)}(angular.module("isj")),function(a){var b=function(a,b,c,d,e,f,g,h){var i=d.orderNum;a.needTime=!0;var j=function(){for(var b in h.viewHistory().views){var c=h.viewHistory().views[b];"onlinePaymentList"===c.stateName&&(a.needTime=!1)}};j();var k=function(){angular.isUndefined(a.time.second)||(a.time.minute<=0&&a.time.second<=0&&a.needTime&&(c.go("tab.main"),f.show("交易超时")),0===a.time.second?(--a.time.minute,a.time.second=59):--a.time.second)};b.get("/orders/"+i).success(function(b){a.order=b,"0"===a.order.isAppointment&&(a.needTime=!1),a.time={minute:a.order.closeTime[0],second:a.order.closeTime[1]},setInterval(function(){a.$apply(k)},1e3),a.amount=b.amount,a.subject=b.name,a.body=b.description}),a.paySelectValue="",a.paymentSelect=function(b){a.paySelectValue=b,angular.element(document.querySelectorAll(".select-yes")).addClass("select-none"),angular.element(document.querySelectorAll(".select-no")).removeClass("select-none"),angular.element(document.getElementById("select_yes_"+b)).removeClass("select-none"),angular.element(document.getElementById("select_no_"+b)).addClass("select-none")},a.pay=function(){if(angular.isUndefined(a.amount))f.show("获取订单信息失败,请稍后重试!");else if("1"===a.paySelectValue){var e={billNo:i,amount:a.amount};b.post("/pay/cmb/prepayInfo",e).success(function(a){console.debug("data:",a);var e={billNo:a.cmbBillNo,date:a.cmbDate};"0"===a.resultCode?cmbpay.payment(a,function(h){console.debug("retData:"+h);var i=angular.fromJson(h);console.debug("converseRet:"+i),"0"===i.resultCode?b.post("/pay/cmb/querySinglePayInfo",e).success(function(a){if("0"===a.resultCode)c.go("paymentResult",{resultImgSrc:"./assets/images/choosen.png",resultText:"支付成功!",memberId:d.memberId});else var b=g.show({template:'<div style="padding: 3px;font-size:15px; text-align:center;">未能支付成功</div>',title:"温馨提示",buttons:[{text:"我知道了",type:"positive",onTap:function(a){a.preventDefault(),b.close()}}]})}).error(function(a){console.debug("data",a),f.show(a)}):"-1"===a.resultCode&&(console.debug("data",a),f.show(a.resultMsg))},function(a){console.debug("retData",a),f.show("内部错误!请联系管理员!")}):"-1"===a.resultCode&&(console.debug("data",a),f.show(a.resultMsg))}).error(function(a){console.debug("data",a),f.show(a)})}else if("2"===a.paySelectValue){var h={outTradeNo:i,subject:a.subject,body:a.body,totalFee:a.amount};b.post("/pay/ali/prepayInfo",h).success(function(a){console.debug("data:",a),"0"===a.resultCode?alipay.payment(a,function(a){var b=angular.fromJson(a),e="./assets/images/umeng_update_close_bg_tap.png";if("9000"===b.resultStatus)c.go("paymentResult",{resultImgSrc:"./assets/images/choosen.png",resultText:"支付成功!",memberId:d.memberId});else if("8000"===b.resultStatus||"6004"===b.resultStatus)c.go("paymentResult",{resultImgSrc:e,resultText:"支付结果未知!请查看挂号页!",memberId:d.memberId});else if("6001"===b.resultStatus)var f=g.show({template:'<div style="padding: 3px;font-size:15px; text-align:center;">未能支付成功</div>',title:"温馨提示",buttons:[{text:"我知道了",type:"positive",onTap:function(a){a.preventDefault(),f.close()}}]});else"4000"===b.resultStatus?c.go("paymentResult",{resultImgSrc:e,resultText:"支付失败!",memberId:d.memberId}):"6002"===b.resultStatus?c.go("paymentResult",{resultImgSrc:e,resultText:"支付失败!网络连接出错!",memberId:d.memberId}):c.go("paymentResult",{resultImgSrc:e,resultText:"支付失败!未知错误!",memberId:d.memberId})},function(a){console.debug("retData",a),f.show("内部错误!请联系管理员!")}):"-1"===a.resultCode&&(console.debug("data",a),f.show(a.resultMsg))}).error(function(a){console.debug("data",a),f.show(a)})}else if("3"===a.paySelectValue){var j=Number(a.amount.replace(".","")),k={outTradeNo:i,body:a.body,detail:a.subject,totalFee:j};b.post("/pay/weixin/prepayInfo",k).success(function(a){if(console.debug("data:",a),"0"===a.resultCode){var b={appid:a.appid,noncestr:a.noncestr,"package":a["package"],partnerid:a.partnerid,prepayid:a.prepayid,timestamp:a.timestamp,sign:a.sign};wxpay.payment(b,function(a){console.debug("retData",a);var b=angular.fromJson(a),e="./assets/images/umeng_update_close_bg_tap.png";if(0===b.code)c.go("paymentResult",{resultImgSrc:"./assets/images/choosen.png",resultText:"支付成功!",memberId:d.memberId});else if(-4===b.code)c.go("paymentResult",{resultImgSrc:e,resultText:"支付失败!认证被否决!",memberId:d.memberId});else if(-1===b.code)c.go("paymentResult",{resultImgSrc:e,resultText:"支付失败!一般错误!",memberId:d.memberId});else if(-3===b.code)c.go("paymentResult",{resultImgSrc:e,resultText:"支付失败!发送失败!",memberId:d.memberId});else if(-5===b.code)c.go("paymentResult",{resultImgSrc:e,resultText:"支付失败!不支持错误!",memberId:d.memberId});else if(-2===b.code)var f=g.show({template:'<div style="padding: 3px;font-size:15px; text-align:center;">未能支付成功</div>',title:"温馨提示",buttons:[{text:"我知道了",type:"positive",onTap:function(a){a.preventDefault(),f.close()}}]})},function(a){console.debug("retData:",a),f.show("内部错误!请联系管理员!")}).error(function(a){console.debug("data",a),f.show("请求服务端数据错误!请联系管理员!")})}else"-1"===a.resultCode&&(console.debug("data",a),f.show(a.resultMsg))}).error(function(a){console.debug("data",a),f.show(a)})}}};b.$inject=["$scope","$http","$state","$stateParams","appConstants","toastService","$ionicPopup","$ionicHistory"];var c=function(a){a.state("paymentSelect",{url:"/onlinePayment/paymentSelect/:orderNum/:memberId",cache:"false",templateUrl:"modules/onlinePayment/paymentSelect.html",controller:b})};c.$inject=["$stateProvider"],a.config(c)}(angular.module("isj")),function(a){var b=function(a,b,c,d,e,f,g){var h=d.doctorId,i=d.date;a.dateDisplay=i.substring(0,4)+"年"+i.substring(5,7)+"月"+i.substring(8,10)+"日"+i.substring(10,16),b.get("/register/agreement").success(function(b){a.agreement=b}).error(function(a){g.show(a)});var j=function(){b.get("/user/familyMembers/familyMember",{params:{memberId:d.memberId}}).success(function(b){a.patient=b}).error(function(a){g.show(a)})};j(),a.isChecked=!0,b.get("/dataBase/familyMenberTypes").success(function(b){a.memberTypes=b}).error(function(a){g.show(a)}),b.get("/register/doctor",{params:{id:h,date:i}}).success(function(b){a.doctor=b,a.doctor.district.length>2&&(a.doctor.district=a.doctor.district.substring(0,2))}).error(function(a){g.show(a)}),b.get("/register/apptPrompt").success(function(b){a.prompt=b}).error(function(a){g.show(a)}),a.goBack=function(){var a=0;for(var b in f.viewHistory().views){var c=f.viewHistory().views[b];if("registerDoctorTimeSelect"===c.stateName){a=c.index;break}}f.goBack(a-f.currentView().index)};var k=null;a.showAgreement=function(){k=e.show({template:'<div style="padding: 3px;font-size:15px">'+a.agreement+"</div>",title:"挂号须知",cssClass:"agreement-popup",buttons:[{text:"我知道了",type:"button-positive",onTap:function(a){a.preventDefault(),k.close()}}]})},a.selectMember=function(){c.go("familyMemberSelect",{skipId:"registerConfirmAppt",doctorId:h,date:i,memberId:a.patient.id})};var l=null;a.registerConfirm=function(){var f={patientId:a.patient.id,isAppointment:1,registerDate:i,deptId:a.doctor.deptId,doctorId:h,clinicCategoryCode:a.doctor.clinicCategoryCode,amount:a.doctor.amount,payStatus:"0"};b.post("/register/registrations/registration",f).success(function(a){c.go("paymentSelect",{orderNum:a.orderNum,memberId:d.memberId})}).error(function(a,b){409!==b?g.show(a):(l=e.confirm({title:"提示",template:a,cancelText:"我知道了",okText:"查看"}),l.then(function(a){a&&c.go("tab.registration",{memberId:d.memberId})}))})},a.$on("$ionicView.beforeLeave",function(){null!==k&&k.close(),null!==l&&l.close()}),a.goMainPage=function(){c.go("tab.main")}};b.$inject=["$scope","$http","$state","$stateParams","$ionicPopup","$ionicHistory","toastService"];var c=function(a){a.state("registerConfirmAppt",{url:"/register/registerConfirmAppt/:doctorId/:date/:memberId",templateUrl:"modules/register/registerConfirmAppt.html",controller:b})};c.$inject=["$stateProvider"],a.config(c)}(angular.module("isj")),function(a){var b=function(a,b,c,d,e,f,g,h){var i=d.doctorId,j=d.date;a.todayDisplay=j.substring(0,4)+"年"+j.substring(5,7)+"月"+j.substring(8,10)+"日"+j.substring(10,16),a.isChecked=!0,b.get("/register/agreement").success(function(b){a.agreement=b}).error(function(a){h.show(a)});var k=function(){b.get("/user/familyMembers/familyMember",{params:{memberId:d.memberId}}).success(function(b){a.patient=b}).error(function(a){h.show(a)})};k(),b.get("/dataBase/familyMenberTypes").success(function(b){a.memberTypes=b}).error(function(a){h.show(a)}),b.get("/register/doctor",{params:{id:i,date:j}}).success(function(b){a.doctor=b,a.doctor.district.length>2&&(a.doctor.district=a.doctor.district.substring(0,2))}).error(function(a){h.show(a)}),b.get("/register/todayPrompt").success(function(b){a.prompt=b}).error(function(a){h.show(a)}),a.goBack=function(){var a=0;for(var b in g.viewHistory().views){var c=g.viewHistory().views[b];if("registerDoctorTimeSelect"===c.stateName){a=c.index;break}}g.goBack(a-g.currentView().index)};var l=null;a.showAgreement=function(){l=e.show({template:'<div style="padding: 3px;font-size:15px">'+a.agreement+"</div>",title:"挂号须知",cssClass:"agreement-popup",buttons:[{text:"我知道了",type:"button-positive",onTap:function(a){a.preventDefault(),l.close()}}]})},a.selectMember=function(){c.go("familyMemberSelect",{skipId:"registerConfirmToday",doctorId:i,memberId:a.patient.id,date:d.date})},a.registerConfirm=function(){var e={patientId:a.patient.id,isAppointment:0,registerDate:j,deptId:a.doctor.deptId,doctorId:i,clinicCategoryCode:a.doctor.clinicCategoryCode,amount:a.doctor.amount,payStatus:"0"};b.post("/register/registrations/registration",e).success(function(a){c.go("paymentSelect",{orderNum:a.orderNum,memberId:d.memberId})}).error(function(a){h.show(a)})},a.$on("$ionicView.beforeLeave",function(){null!==l&&l.close()}),a.goMainPage=function(){c.go("tab.main")}};b.$inject=["$scope","$http","$state","$stateParams","$ionicPopup","$filter","$ionicHistory","toastService"];var c=function(a){a.state("registerConfirmToday",{url:"/register/registerConfirmToday/:doctorId/:date/:memberId",templateUrl:"modules/register/registerConfirmToday.html",controller:b})};c.$inject=["$stateProvider"],a.config(c)}(angular.module("isj")),function(a){var b=function(a,b,c,d,e,f,g,h,i,j){var k=["周日","周一","周二","周三","周四","周五","周六"],l=30;a.major=d.major,a.majorTmp=d.major,a.hasSearchStr=!angular.isUndefined(a.major)&&""!==a.major,a.appointmentMode="1",a.hideSearch=!0;var m=function(a,b){return a=+a+864e5*b,a=new Date(a)};b.get("/organization/districts").success(function(b){a.districtColor=j.getDistrictColor(b)});var n=function(c,d){var e=i.getPhoto(c);angular.isUndefined(e)||""===e?b.get("/doctors/photo",{params:{doctorId:c,index:d}}).success(function(b,d,e,f){a.doctors[f.params.index].photo=b,i.setPhoto(c,b)}).error(function(b,c,d,e){a.doctors[e.params.index].photo=""}):a.doctors[d].photo=e},o=function(c,f){var g="",i="";""===a.dateSelectParam.daySelected||a.hasSearchStr||"1"!==a.appointmentMode?(g=e("date")(m(new Date,1),"yyyy-MM-dd"),i=e("date")(m(new Date,l),"yyyy-MM-dd")):(g=a.dateSelectParam.daySelected,i=a.dateSelectParam.daySelected);var j={pageNo:c,districtId:d.districtId,subjectId:d.subjectId,major:a.major,startDate:g,endDate:i,isAppointment:"1",index:a.httpIndex.index};b.get("/schedule/doctors",{params:j}).success(function(b,c,d,e){if(angular.isUndefined(a.httpIndex[e.params.index])){a.spinnerShow=!1,b.length<10&&(a.vm.moreData=!1);var g=0;if(f)a.doctors=b;else{g=a.doctors.length;for(var h=0;h<b.length;h++)a.doctors.push(b[h])}for(var i=g;i<a.doctors.length;i++)a.doctors[i].district=a.doctors[i].district.substring(0,2),n(a.doctors[i].id,i)}else a.vm.moreData=!1;a.$broadcast("scroll.infiniteScrollComplete")}).error(function(b,c,d,e){angular.isUndefined(a.httpIndex[e.params.index])&&(a.spinnerShow=!1,a.doctors=[],h.show(b))})["finally"](function(){a.$broadcast("scroll.refreshComplete")})},p=function(a){return{date:e("date")(a,"yyyy-MM-dd"),month:a.getMonth()+1,day:a.getDate(),week:k[a.getDay()]}},q=function(a){for(var b=a,c=[],d=0;;){if(b.getTime()>m(new Date,l).getTime())break;c[d]=p(b),b=m(b,1),d++}return c};a.vm={moreData:!0,pageNo:1,init:function(){a.spinnerShow=!0,a.doctors=null,a.vm.pageNo=1,a.vm.moreData=!0,g.$getByHandle("registerDateScroll").scrollTop(),o(a.vm.pageNo,!0)},loadMore:function(){a.vm.pageNo++,o(a.vm.pageNo,!1)}},a.dateSelectParam={selectDays:q(m(new Date,1)),daySelected:e("date")(m(new Date,1),"yyyy-MM-dd")},a.$on("$ionicView.beforeEnter",function(){a.httpIndex={index:1},a.vm.init()}),a.dateSelectFun=function(){a.httpIndex.index++,a.vm.init()},a.appointmentModeClk=function(b){a.appointmentMode=b,a.httpIndex.index++,a.vm.init()},a.searchClk=function(){a.hideSearch=!a.hideSearch,a.hideSearch||f(function(){document.getElementById("registerDoctorDateSelect_search").focus()},50)},a.doSearch=function(){!angular.isUndefined(d.subjectId)&&""!==d.subjectId||!angular.isUndefined(a.major)&&""!==a.major?(a.hasSearchStr=!angular.isUndefined(a.major)&&""!==a.major,a.majorTmp=a.major,a.httpIndex.index++,a.vm.init()):(a.major=a.majorTmp,h.show("必须输入查询条件"))},a.photoClk=function(b,d){d.stopPropagation(),a.vm.moreData=!1,c.go("doctorIntroductionView",{doctorId:b,type:"0"})},a.doctorClk=function(b,e,f){if((angular.isUndefined(f)||null===f||""===f)&&e>0){var g=a.dateSelectParam.daySelected;("2"===a.appointmentMode||a.hasSearchStr)&&(g=""),a.vm.moreData=!1,c.go("registerDoctorTimeSelect",{doctorId:b,date:g,districtId:d.districtId,subjectId:d.subjectId,type:"2"})}},a.spinnerCancel=function(){a.httpIndex[a.httpIndex.index]="CANCEL",a.$broadcast("scroll.refreshComplete")},a.doRefresh=function(){a.httpIndex.index++,a.vm.init()},a.contentMarginTop=function(){return a.hasSearchStr?"":"1"===a.appointmentMode?"registerDoctorDateSelect-top1":"registerDoctorDateSelect-top2"}};b.$inject=["$scope","$http","$state","$stateParams","$filter","$timeout","$ionicScrollDelegate","toastService","doctorPhotoService","utilsService"];var c=function(a){a.state("registerDoctorDateSelect",{url:"/register/registerDoctorDateSelect/:districtId/:subjectId/:major",templateUrl:"modules/register/registerDoctorDateSelect.html",controller:b})};c.$inject=["$stateProvider"],a.config(c)}(angular.module("isj")),function(a){var b=function(a,b,c,d,e,f,g,h,i,j,k){var l=["周日","周一","周二","周三","周四","周五","周六"],m="1";"1"===d.type&&(m="0"),b.get("/organization/districts").success(function(b){a.districtColor=k.getDistrictColor(b)});var n=function(a){return{date:e("date")(a,"yyyy-MM-dd"),month:a.getMonth()+1,day:a.getDate(),week:l[a.getDay()]}},o=function(c){a.times=[],g.$getByHandle("registerTimeScroll").scrollTop(),b.get("/schedule/times",{params:{doctorId:d.doctorId,date:c,districtId:d.districtId,isAppointment:m,index:a.httpIndex.index}}).success(function(b,c,d,e){if(angular.isUndefined(a.httpIndex[e.params.index])){if(b.length%3!==0)for(var f=3-b.length%3,g=0;f>g;g++)b.push({time:""});a.times=b}}).error(function(b,c,d,e){angular.isUndefined(a.httpIndex[e.params.index])&&h.show(b)})["finally"](function(){a.$broadcast("scroll.refreshComplete")})};a.doctorId=d.doctorId;var p=j.getPhoto(d.doctorId);angular.isUndefined(p)||""===p?b.get("/doctors/photo",{params:{doctorId:d.doctorId}}).success(function(b){a.photo=b,j.setPhoto(d.doctorId,b)}).error(function(){a.photo=""}):a.photo=p,a.dateSelectParam={selectDays:[],daySelected:d.date},a.dataInfos={},b.get("/schedule/dates",{params:{doctorId:d.doctorId,date:a.dateSelectParam.daySelected,districtId:d.districtId,subjectId:d.subjectId,isAppointment:m}}).success(function(b){if(b.length>0){for(var c=[],d=0;d<b.length;d++)c.push(n(new Date(b[d].date))),a.dataInfos[b[d].date]=b[d];a.dateSelectParam={selectDays:c,daySelected:b[0].date},o(a.dateSelectParam.daySelected),a.dataInfo=b[0],a.dataInfo.district.length>2&&(a.dataInfo.district=a.dataInfo.district.substring(0,2))}}).error(function(a){h.show(a)}),a.$on("$ionicView.beforeEnter",function(){a.httpIndex={index:1},a.dateSelectParam.selectDays.length>0&&o(a.dateSelectParam.daySelected)}),a.photoClk=function(a){c.go("doctorIntroductionView",{doctorId:a,type:"0"})},a.dateSelectFun=function(){a.httpIndex.index++,o(a.dateSelectParam.daySelected),a.dataInfo=a.dataInfos[a.dateSelectParam.daySelected],a.dataInfo.district.length>2&&(a.dataInfo.district=a.dataInfo.district.substring(0,2))},a.timeClk=function(e,f){if(null!==a.dateSelectParam.daySelected&&""!==a.dateSelectParam.daySelected&&f>0){var g=i.hasToken();g?b.get("/user/tokenVal").success(function(){"1"===d.type?c.go("registerConfirmToday",{doctorId:d.doctorId,date:a.dateSelectParam.daySelected+" "+e}):c.go("registerConfirmAppt",{doctorId:d.doctorId,date:a.dateSelectParam.daySelected+" "+e})}).error(function(a,b){401!==b?h.show(a):(i.clearToken(),c.go("login"))}):c.go("login")}},a.spinnerCancel=function(){a.httpIndex[a.httpIndex.index]="CANCEL",a.$broadcast("scroll.refreshComplete")},a.doRefresh=function(){a.httpIndex.index++,o(a.dateSelectParam.daySelected)},a.goMainPage=function(){c.go("tab.main")}};b.$inject=["$scope","$http","$state","$stateParams","$filter","$timeout","$ionicScrollDelegate","toastService","userService","doctorPhotoService","utilsService"];var c=function(a){a.state("registerDoctorTimeSelect",{url:"/register/registerDoctorTimeSelect/:doctorId/:date/:districtId/:subjectId/:type",templateUrl:"modules/register/registerDoctorTimeSelect.html",controller:b})};c.$inject=["$stateProvider"],a.config(c)}(angular.module("isj")),function(a){var b=function(a,b,c,d,e,f,g,h,i,j){a.hideSearch=!0;var k=function(c,d){var e=i.getPhoto(c);angular.isUndefined(e)||""===e?b.get("/doctors/photo",{params:{doctorId:c,index:d}}).success(function(b,d,e,f){a.doctors[f.params.index].photo=b,i.setPhoto(c,b)}).error(function(b,c,d,e){a.doctors[e.params.index].photo=""}):a.doctors[d].photo=e};b.get("/organization/districts").success(function(b){a.districtColor=j.getDistrictColor(b)});var l=e("date")(new Date,"yyyy-MM-dd");a.major=d.major,a.majorTmp=d.major;var m=function(c,e){var f={pageNo:c,districtId:d.districtId,subjectId:d.subjectId,major:a.major,startDate:l,endDate:l,isAppointment:"0",index:a.httpIndex.index};b.get("/schedule/doctors",{params:f}).success(function(b,c,d,f){if(angular.isUndefined(a.httpIndex[f.params.index])){a.spinnerShow=!1,b.length<10&&(a.vm.moreData=!1);var g=0;if(e)a.doctors=b;else{g=a.doctors.length;for(var h=0;h<b.length;h++)a.doctors.push(b[h])}for(var i=g;i<a.doctors.length;i++)a.doctors[i].district=a.doctors[i].district.substring(0,2),k(a.doctors[i].id,i)}else a.vm.moreData=!1;a.$broadcast("scroll.infiniteScrollComplete")}).error(function(b,c,d,e){angular.isUndefined(a.httpIndex[e.params.index])&&(a.spinnerShow=!1,a.doctors=[],h.show(b))})["finally"](function(){a.$broadcast("scroll.refreshComplete")})};a.vm={moreData:!0,pageNo:1,init:function(){a.spinnerShow=!0,a.doctors=null,a.vm.pageNo=1,a.vm.moreData=!0,g.scrollTop(),m(a.vm.pageNo,!0)},loadMore:function(){a.vm.pageNo++,m(a.vm.pageNo,!1)}},a.$on("$ionicView.beforeEnter",function(){a.httpIndex={index:1},a.vm.init()}),a.searchClk=function(){a.hideSearch=!a.hideSearch,a.hideSearch||f(function(){document.getElementById("registerTodayDoctorList_search").focus()},50)},a.doSearch=function(){!angular.isUndefined(d.subjectId)&&""!==d.subjectId||!angular.isUndefined(a.major)&&""!==a.major?(a.majorTmp=a.major,a.httpIndex.index++,a.vm.init()):(a.major=a.majorTmp,h.show("必须输入查询条件"))},a.photoClk=function(a,b){b.stopPropagation(),c.go("doctorIntroductionView",{doctorId:a,type:"0"})},a.doctorClk=function(a,b,e){(angular.isUndefined(e)||null===e||""===e)&&b>0&&c.go("registerDoctorTimeSelect",{doctorId:a,date:l,districtId:d.districtId,subjectId:d.subjectId,type:"1"})},a.spinnerCancel=function(){a.httpIndex[a.httpIndex.index]="CANCEL",a.$broadcast("scroll.refreshComplete")},a.doRefresh=function(){a.httpIndex.index++,a.vm.init()}};b.$inject=["$scope","$http","$state","$stateParams","$filter","$timeout","$ionicScrollDelegate","toastService","doctorPhotoService","utilsService"];var c=function(a){a.state("registerTodayDoctorList",{url:"/register/registerTodayDoctorList/:districtId/:subjectId/:major",templateUrl:"modules/register/registerTodayDoctorList.html",controller:b})};c.$inject=["$stateProvider"],a.config(c)}(angular.module("isj")),function(a){var b=function(a,b,c,d){cordova.getAppVersion.getVersionNumber(function(b){a.versionNumber=b}),cordova.getAppVersion.getVersionCode(function(c){a.versionCode=c,b.get("/app/versions/"+c).success(function(b){a.description=b.note})});var e=function(){b.get("/service/phone").success(function(b){a.servicePhone=b})};a.$on("$ionicView.beforeEnter",function(){a.isLogin=d.hasToken(),a.isLogin&&b.get("/user/tokenVal").error(function(b,c){401===c&&(d.clearToken(),a.isLogin=!1)}),(angular.isUndefined(a.servicePhone)||""===a.servicePhone)&&e()}),a.itemRouter=function(a){c.go(a)}};b.$inject=["$scope","$http","$state","userService"];var c=function(a){a.state("settingAppAbout",{url:"/setting/appAbout",templateUrl:"modules/setting/appAbout.html",controller:b})};c.$inject=["$stateProvider"],a.config(c)}(angular.module("isj")),function(a){var b=function(a,b,c,d,e){a.$on("$ionicView.beforeEnter",function(){a.isSubmit=!1,a.input={nowPassword:"",newPassword:"",confirmPassword:""}});var f=function(){if(""===a.input.nowPassword)return e.show("当前密码不能为空"),!1;if(""===a.input.newPassword)return e.show("新密码不能为空"),!1;if(""===a.input.confirmPassword)return e.show("确认新密码不能为空"),!1;if(a.input.newPassword!==a.input.confirmPassword)return e.show("新密码和确认新密码不一致"),!1;if(a.input.nowPassword.length<6||a.input.nowPassword.length>20)return e.show("当前密码必须6-20个字符"),!1;if(a.input.newPassword.length<6||a.input.newPassword.length>20)return e.show("新密码必须6-20个字符"),!1;if(a.input.confirmPassword.length<6||a.input.confirmPassword.length>20)return e.show("确认新密码必须6-20个字符"),
!1;var b=/^[0-9a-zA-Z_]+$/;return b.test(a.input.nowPassword)?b.test(a.input.newPassword)?b.test(a.input.confirmPassword)?!0:(e.show("确认新密码必须由英文字母、数字、下划线组成"),!1):(e.show("新密码必须由英文字母、数字、下划线组成"),!1):(e.show("当前密码必须由英文字母、数字、下划线组成"),!1)};a.change=function(){a.isSubmit=!0,f()?(a.input.category="1",c.put("/permission/account",a.input).success(function(){d.goBack(),e.show("密码修改成功")}).error(function(b){a.isSubmit=!1,e.show(b)})):a.isSubmit=!1}};b.$inject=["$scope","$state","$http","$ionicHistory","toastService"];var c=function(a){a.state("settingChangePassword",{url:"/setting/changePassword",templateUrl:"modules/setting/changePassword.html",controller:b})};c.$inject=["$stateProvider"],a.config(c)}(angular.module("isj")),function(a){var b=function(a,b,c,d){a.$on("$ionicView.beforeEnter",function(){a.isSubmit=!1,a.input={opinion:""}}),a.opinionSubmit=function(){""===a.input.opinion?d.show("请填写反馈内容"):(a.isSubmit=!0,b.post("/service/userOpinion",{opinion:a.input.opinion}).success(function(){c.goBack(),d.show("意见提交成功，谢谢您的支持")}).error(function(b){a.isSubmit=!1,d.show(b)}))}};b.$inject=["$scope","$http","$ionicHistory","toastService"];var c=function(a){a.state("settingFeedback",{url:"/setting/feedback",templateUrl:"modules/setting/feedback.html",controller:b})};c.$inject=["$stateProvider"],a.config(c)}(angular.module("isj")),function(a){var b=function(a,b,c,d,e){a.searchStr={feedbackStatus:""},a.feedbackStatusTypes=[],a.feedbackStatusTypes.push({code:"",name:"全部"}),b.get("/dataBase/feedbackTypes").success(function(b){for(var c=0;c<b.length;c++)a.feedbackStatusTypes.push(b[c])}).error(function(a){d.show(a)});var f=function(c){a.feedbacks=null,c.index=a.httpIndex.index,b.get("/service/userOpinion",{params:c}).success(function(b,c,d,e){angular.isUndefined(a.httpIndex[e.params.index])&&(a.feedbacks=b)}).error(function(b,c,e,f){angular.isUndefined(a.httpIndex[f.params.index])&&(a.feedbacks=[],d.show(b))})["finally"](function(){a.$broadcast("scroll.refreshComplete")})};a.$on("$ionicView.beforeEnter",function(){a.httpIndex={index:1},f(a.searchStr)}),a.searchFeedback=function(){a.httpIndex.index++,e.scrollTop(),f(a.searchStr)},a.opinionAdd=function(){c.go("settingFeedback")},a.opinionView=function(a){c.go("settingFeedbackView",{opinionId:a})},a.spinnerCancel=function(){a.httpIndex[a.httpIndex.index]="CANCEL",a.$broadcast("scroll.refreshComplete")},a.doRefresh=function(){a.httpIndex.index++,f(a.searchStr)}};b.$inject=["$scope","$http","$state","toastService","$ionicScrollDelegate"];var c=function(a){a.state("settingFeedbackList",{url:"/setting/feedbackList",templateUrl:"modules/setting/feedbackList.html",controller:b})};c.$inject=["$stateProvider"],a.config(c)}(angular.module("isj")),function(a){var b=function(a,b,c,d,e){var f=function(){a.feedbacks=[];var c={};c.index=a.httpIndex.index,b.get("/service/userOpinion",{params:c}).success(function(b,c,d,f){if(angular.isUndefined(a.httpIndex[f.params.index]))for(var g=0;g<b.length;g++)a.feedbacks.push(b[b.length-1-g]);e.scrollBottom()}).error(function(b,c,e,f){angular.isUndefined(a.httpIndex[f.params.index])&&(a.feedbacks=[],d.show(b))})["finally"](function(){a.$broadcast("scroll.refreshComplete")})};a.$on("$ionicView.beforeEnter",function(){a.httpIndex={index:1},f(),g(),e.scrollBottom()}),a.inputOpinion=void 0;var g=function(){a.$watch("inputOpinion",function(b){a.inputOpinion=b,angular.isUndefined(a.inputOpinion)||""===a.inputOpinion?a.isSubmit=!1:a.isSubmit=!0})};a.submitOpinion=function(){b.post("/service/userOpinion",{opinion:a.inputOpinion}).success(function(){a.doRefresh(),e.scrollBottom(),a.inputOpinion=""}).error(function(b){a.isSubmit=!1,d.show(b)})},a.doRefresh=function(){a.httpIndex.index++,f()}};b.$inject=["$scope","$http","$state","toastService","$ionicScrollDelegate"];var c=function(a){a.state("settingFeedbackListNew",{url:"/setting/feedbackListNew",templateUrl:"modules/setting/feedbackListNew.html",controller:b})};c.$inject=["$stateProvider"],a.config(c)}(angular.module("isj")),function(a){var b=function(a,b,c,d){var e=function(){b.get("/service/userOpinion/"+c.opinionId).success(function(b){a.feedback=b}).error(function(a){d.show(a)})};a.$on("$ionicView.beforeEnter",function(){(angular.isUndefined(a.feedback)||null===a.feedback)&&e()})};b.$inject=["$scope","$http","$stateParams","toastService"];var c=function(a){a.state("settingFeedbackView",{url:"/setting/feedbackView/:opinionId",templateUrl:"modules/setting/feedbackView.html",controller:b})};c.$inject=["$stateProvider"],a.config(c)}(angular.module("isj")),function(a){var b=function(a,b,c,d,e){a.$on("$ionicView.beforeEnter",function(){a.isLogin=e.hasToken(),a.isLogin&&c.get("/user/tokenVal").error(function(b,c){401===c&&(e.clearToken(),a.isLogin=!1)})}),a.$on("$ionicView.beforeLeave",function(){null!==f&&f.close()}),a.itemRouter=function(a){b.go(a)};var f=null;a.quit=function(){f=d.confirm({title:"提示",template:"您确定要退出当前账户?",cssClass:"confirm-popup",cancelText:"取消",okText:"确定"}),f.then(function(a){a&&(e.clearToken(),b.go("login",{skipId:"tab.personal"}))})}};b.$inject=["$scope","$state","$http","$ionicPopup","userService"];var c=function(a){a.state("settingIndex",{url:"/setting/settingIndex",templateUrl:"modules/setting/settingIndex.html",controller:b})};c.$inject=["$stateProvider"],a.config(c)}(angular.module("isj")),function(a){var b=function(a,b){a.title=b.title};b.$inject=["$scope","$stateParams"];var c=function(a){a.state("upgrading",{url:"/setting/upgrading/:title",templateUrl:"modules/setting/upgrading.html",controller:b})};c.$inject=["$stateProvider"],a.config(c)}(angular.module("isj")),function(a){var b=function(a,b,c,d,e,f,g,h,i,j){a.hideSearch=!0,a.type=e.type,a.subjectId="";var k={};a.$on("$ionicView.beforeEnter",function(){k={},a.httpIndex={index:1},("1"===a.type||"2"===a.type)&&c.get("/register/agreement").success(function(c){(angular.isUndefined(b.agreement)||""===b.agreement||b.agreement!==c)&&(b.agreement=c,a.showAgreement())}).error(function(a){g.show(a)}),(angular.isUndefined(a.districts)||0===a.districts.length)&&m();var d=i.currentView().forwardViewId;(angular.isUndefined(d)||null===d||""===d)&&(a.hideSearch=!0,a.major="",angular.isUndefined(a.districts)||0===a.districts.length||l())}),a.$on("$ionicView.beforeLeave",function(){null!==n&&n.close()});var l=function(){j.scrollTop(),a.subjects=[],a.subjectRights="",c.get("/subjects",{params:{districtId:a.districtId,type:e.type,index:a.httpIndex.index}}).success(function(b,c,d,e){angular.isUndefined(a.httpIndex[e.params.index])&&(a.subjects=b,k[a.districtId]=b,a.subjectId=b[0].id,angular.isUndefined(b[0].subjects)||0===b[0].subjects.length?a.subjectRights=[b[0]]:a.subjectRights=b[0].subjects)}).error(function(b,c,d,e){angular.isUndefined(a.httpIndex[e.params.index])&&g.show(b)})},m=function(){c.get("/organization/districts").success(function(b){a.districts=[];for(var c=0;c<b.length;c++)a.districts.push(b[c]);a.districtId=b[0].id,l()}).error(function(a){g.show(a)})};a.searchClk=function(){a.hideSearch=!a.hideSearch,a.hideSearch||f(function(){document.getElementById("subjectSelect_search_"+a.type).focus()},50)},a.doSearch=function(){angular.isUndefined(a.major)||""===a.major||("1"===e.type?d.go("registerTodayDoctorList",{districtId:a.districtId,major:a.major}):"2"===e.type&&d.go("registerDoctorDateSelect",{districtId:a.districtId,major:a.major}))},a.districtClk=function(b){a.districtId!==b&&(a.districtId=b,a.httpIndex.index++,angular.isUndefined(k[b])?l():(a.subjectId=k[b][0].id,a.subjects=k[b],a.subjectRights=k[b][0].subjects))},a.subjectLeftClk=function(b){if(a.subjectId!==b){a.subjectId=b;for(var c=0;c<a.subjects.length;c++)if(a.subjects[c].id===b){angular.isUndefined(a.subjects[c].subjects)||0===a.subjects[c].subjects.length?a.subjectRights=[a.subjects[c]]:a.subjectRights=a.subjects[c].subjects;break}}};var n=null;a.showAgreement=function(){n=h.show({template:'<div style="padding: 3px;font-size:15px">'+b.agreement+"</div>",title:"挂号须知",cssClass:"agreement-popup",buttons:[{text:"我知道了",type:"button-positive",onTap:function(a){a.preventDefault(),n.close()}}]})},a.subjectRightClk=function(b){"1"===e.type?d.go("registerTodayDoctorList",{districtId:a.districtId,subjectId:b}):"2"===e.type&&d.go("registerDoctorDateSelect",{districtId:a.districtId,subjectId:b})},a.spinnerCancel=function(){a.httpIndex[a.httpIndex.index]="CANCEL"}};b.$inject=["$scope","$rootScope","$http","$state","$stateParams","$timeout","toastService","$ionicPopup","$ionicHistory","$ionicScrollDelegate"];var c=function(a){a.state("subjectSelect",{url:"/subject/subjectSelect/:type",templateUrl:"modules/subject/subjectSelect.html",controller:b})};c.$inject=["$stateProvider"],a.config(c)}(angular.module("isj")),function(a){var b=function(a,b,c,d,e,f){a.appName=e.localStorage.appName,(angular.isUndefined(a.appName)||""===a.appName)&&(a.appName="掌上盛京医院"),d.get("/service/appName").success(function(b){a.appName=b,e.localStorage.appName=b});var g=function(a){return!(angular.isUndefined(a)||""===a)},h=function(){a.carouselImages=[{name:"预约挂号",img:"./assets/images/ad1.png"},{name:"在线缴费",img:"./assets/images/ad2.png"},{name:"查看报告",img:"./assets/images/ad3.png"}]},i=function(){a.carouselImages=[];for(var b=0,c=!0;;){b++;var d=e.localStorage["carousel_"+b+"_name"],f=e.localStorage["carousel_"+b+"_img"];if(g(d)&&!g(f)||!g(d)&&g(f)){c=!1;break}if(!g(d))break;a.carouselImages.push({name:d,img:f})}return 0!==a.carouselImages.length&&c?!0:!1},j=function(){for(var a=0;;){a++;var b=e.localStorage["carousel_"+a+"_name"];if(angular.isUndefined(b)||""===b)break;e.localStorage.removeItem("carousel_"+a+"_name"),e.localStorage.removeItem("carousel_"+a+"_img")}},k=function(b){d.get("/service/carouselPhoto").success(function(c){a.carouselImages=[],j();for(var d=0;d<c.length;d++){a.carouselImages.push({name:c[d].name,img:c[d].img});var f=d+1;e.localStorage["carousel_"+f+"_name"]=c[d].name,e.localStorage["carousel_"+f+"_img"]=c[d].img}e.localStorage.carouselVersion=b})},l=i();l||h();var m=e.localStorage.carouselVersion;d.get("/service/carouselPhoto/version").success(function(a){(angular.isUndefined(m)||""===m||m!==a||!l)&&k(a)}),a.$on("$ionicView.beforeEnter",function(){b.clearHistory()});var n=function(a,b){"subjectSelect"===a?c.go(a,{type:b}):"medicalReportList"===a?c.go("medicalReportList",{title:"查看报告"}):c.go(a)};a.itemRouter=function(a,b){var e=!0;"medicalReportList"===a||"onlinePaymentList"===a?(e=f.hasToken(),e?d.get("/user/tokenVal").success(function(){n(a,b)}).error(function(d,e){401!==e?n(a,b):(f.clearToken(),c.go("login"))}):c.go("login")):n(a,b)}};b.$inject=["$scope","$ionicHistory","$state","$http","$window","userService"];var c=function(a){a.state("tab.main",{url:"/main",views:{"tab-main":{templateUrl:"modules/tab/main/main.html",controller:b}}})};c.$inject=["$stateProvider"],a.config(c)}(angular.module("isj")),function(a){var b=function(a,b,c,d){var e=function(){a.messages=null,b.get("/messages",{params:{index:a.httpIndex.index}}).success(function(b,c,d,e){if(angular.isUndefined(a.httpIndex[e.params.index])){for(var f=0;f<b.length;f++)b[f].content=b[f].content.replaceAll("\n","<br/>");a.messages=b}}).error(function(b,d,e,f){angular.isUndefined(a.httpIndex[f.params.index])&&(a.messages=[],c.show(b))})["finally"](function(){a.$broadcast("scroll.refreshComplete")})};a.$on("$ionicView.beforeEnter",function(){a.httpIndex={index:1},e(),d.clearHistory()}),a.spinnerCancel=function(){a.httpIndex[a.httpIndex.index]="CANCEL",a.$broadcast("scroll.refreshComplete")},a.doRefresh=function(){a.httpIndex.index++,e()}};b.$inject=["$scope","$http","toastService","$ionicHistory"];var c=function(a){a.state("tab.message",{url:"/message",views:{"tab-message":{templateUrl:"modules/tab/message/message.html",controller:b}}})};c.$inject=["$stateProvider"],a.config(c)}(angular.module("isj")),function(a){var b=function(a,b,c,d,e,f){a.$on("$ionicView.beforeEnter",function(){a.isLogin=e.hasToken(),b.get("/user/userInfo").success(function(b){a.isLogin=!0,a.user=b,null!==a.user.phone&&""!==a.user.phone&&(a.user.phone=a.user.phone.substring(0,3)+"****"+a.user.phone.substring(7,11))}).error(function(b,c){401!==c?d.show(b):(a.user={},e.clearToken(),a.isLogin=!1)}),b.get("/user/familyMembers/count").success(function(b){a.memberCount=b}).error(function(b){401!==status?d.show(b):a.memberCount=""}),b.get("/user/collectionDoctors/count").success(function(b){a.doctorCount=b}).error(function(b){401!==status?d.show(b):a.doctorCount=""}),f.clearHistory()}),a.itemRouter=function(a){var d=!0;"settingIndex"!==a&&"settingAppAbout"!==a?(d=e.hasToken(),d?b.get("/user/tokenVal").success(function(){c.go(a)}).error(function(b,d){401!==d?c.go(a):(e.clearToken(),c.go("login"))}):c.go("login")):c.go(a)},a.login=function(){a.isLogin||c.go("login")}};b.$inject=["$scope","$http","$state","toastService","userService","$ionicHistory"];var c=function(a){a.state("tab.personal",{url:"/personal",views:{"tab-personal":{templateUrl:"modules/tab/personal/personal.html",controller:b}}})};c.$inject=["$stateProvider"],a.config(c)}(angular.module("isj")),function(a){var b=function(a,b,c,d,e,f){var g=function(){a.registrations=null,d.get("/register/registrations",{params:{viewTypeId:a.viewTypeId,memberId:c.memberId,index:a.httpIndex.index}}).success(function(b,c,d,e){if(angular.isUndefined(a.httpIndex[e.params.index])){a.registrations=b,h[a.viewTypeId]=b;for(var f=0;f<a.registrations.length;f++)a.registrations[f].district.length>2&&(a.registrations[f].district=a.registrations[f].district.substring(0,2))}}).error(function(b,c,d,f){angular.isUndefined(a.httpIndex[f.params.index])&&(a.registrations=[],e.show(b))})["finally"](function(){a.$broadcast("scroll.refreshComplete")})},h={};a.viewTypeId="1",a.viewTypes=[{id:"1",name:"未完成"},{id:"2",name:"已完成"}],a.$on("$ionicView.beforeEnter",function(){for(var b in f.viewHistory().views){var i=f.viewHistory().views[b];("registerConfirmAppt"===i.stateName||"paymentResult"===i.stateName)&&(a.viewTypeId="1")}a.httpIndex={index:1},h={},a.patient={},d.get("/user/familyMembers/familyMember",{params:{memberId:c.memberId}}).success(function(b){a.patient=b}).error(function(a){e.show(a)}),d.get("/dataBase/familyMenberTypes").success(function(b){a.memberTypes=b}).error(function(b){a.memberTypes={},e.show(b)}),g(),f.clearHistory()}),a.selectMember=function(){b.go("familyMemberSelect",{skipId:"tab.registration",memberId:a.patient.id})},a.registrationClk=function(c){b.go("registrationView",{registrationId:c,memberId:a.patient.id})},a.spinnerCancel=function(){a.httpIndex[a.httpIndex.index]="CANCEL",a.$broadcast("scroll.refreshComplete")},a.doRefresh=function(){a.httpIndex.index++,g()},a.registrationBtnClk=function(b){a.viewTypeId!==b&&(a.viewTypeId=b,a.httpIndex.index++,angular.isUndefined(h[b])?g():a.registrations=h[b])}};b.$inject=["$scope","$state","$stateParams","$http","toastService","$ionicHistory"];var c=function(a){a.state("tab.registration",{url:"/registration/:memberId",views:{"tab-registration":{templateUrl:"modules/tab/registration/registration.html",controller:b}}})};c.$inject=["$stateProvider"],a.config(c)}(angular.module("isj")),function(a){var b=function(a,b,c,d){var e=function(){c.get("/register/visitAndBacknumDesc").success(function(b){a.description=b}).error(function(a){d.show(a)})};a.$on("$ionicView.beforeEnter",function(){(angular.isUndefined(a.description)||null===a.description)&&e()}),a.medicalGuideClk=function(){b.go("medicalGuide")}};b.$inject=["$scope","$state","$http","toastService"];var c=function(a){a.state("registrationIllustration",{url:"/registration/registrationIllustration",templateUrl:"modules/tab/registration/registrationIllustration.html",controller:b})};c.$inject=["$stateProvider"],a.config(c)}(angular.module("isj")),function(a){var b=function(a,b,c,d,e,f,g){var h=function(){b.get("/register/registrations/registration",{params:{id:d.registrationId}}).success(function(b){a.registration=b,a.registration.apptDate.length<=11?a.visitTime="请到分诊台咨询":a.visitTime=a.registration.apptDate,a.registration.district.length>2&&(a.registration.district=a.registration.district.substring(0,2))}).error(function(a){g.show(a)})["finally"](function(){a.$broadcast("scroll.refreshComplete")})};a.$on("$ionicView.beforeEnter",function(){a.registration={},a.patient={},b.get("/user/familyMembers/familyMember",{params:{memberId:d.memberId}}).success(function(b){a.patient=b}).error(function(a){g.show(a)}),b.get("/dataBase/familyMenberTypes").success(function(b){a.memberTypes=b}).error(function(b){a.memberTypes={},g.show(b)}),h()}),a.$on("$ionicView.beforeLeave",function(){null!==i&&i.close()}),a.illustrationClk=function(){c.go("registrationIllustration")},a.registrationPay=function(){c.go("paymentSelect",{orderNum:a.registration.orderNum})};var i=null;a.registrationBack=function(){i=e.confirm({title:"提示",template:"您确定要退号吗?",cssClass:"confirm-popup",cancelText:"取消",okText:"确定"}),i.then(function(c){c&&b.put("/register/registrations/registration/back",{registrationId:a.registration.id}).success(function(){f.goBack(),g.show("退号成功")}).error(function(a){g.show(a)})})},a.doRefresh=function(){h()}};b.$inject=["$scope","$http","$state","$stateParams","$ionicPopup","$ionicHistory","toastService"];var c=function(a){a.state("registrationView",{url:"/registration/registrationView/:registrationId/:memberId",templateUrl:"modules/tab/registration/registrationView.html",controller:b})};c.$inject=["$stateProvider"],a.config(c)}(angular.module("isj")),function(a){a.config(["$ionicConfigProvider",function(a){a.platform.ios.tabs.style("standard"),a.platform.ios.tabs.position("bottom"),a.platform.android.tabs.style("standard"),a.platform.android.tabs.position("bottom"),a.platform.ios.navBar.alignTitle("center"),a.platform.android.navBar.alignTitle("center"),a.platform.ios.backButton.previousTitleText("").icon("ion-ios-arrow-thin-left"),a.platform.android.backButton.previousTitleText("").icon("ion-android-arrow-back"),a.platform.ios.views.transition("ios"),a.platform.android.views.transition("android"),a.form.checkbox("circle")}]);var b=function(a,b,c,d){a.tabRouter=function(a){var e=!0;"tab.message"===a||"tab.registration"===a?(e=d.hasToken(),e?b.get("/user/tokenVal").success(function(){c.go(a)}).error(function(b,e){401!==e?c.go(a):(d.clearToken(),c.go("login"))}):c.go("login")):c.go(a)}};b.$inject=["$scope","$http","$state","userService"];var c=function(a){a.state("tab",{url:"/tab","abstract":!0,templateUrl:"modules/tab/tabs.html",controller:b})};c.$inject=["$stateProvider"],a.config(c)}(angular.module("isj")),angular.module("isj").run(["$templateCache",function(a){a.put("app/components/date-select.html",'<div class="isj-date-select"> <div class="month positive"> {{month}}月 </div> <div class="date-nav"> <span class="date-move date-move-left" style="width: {{width.left}}" ng-click="leftSlide()"> <i class="icon ion-ios-arrow-left positive" ng-show="leftIconIsShow"></i> </span> <ion-scroll delegate-handle="dateScroll" has-bouncing="false" class="date-scroll" style="width: {{width.scroll}}" direction="x" scrollbar-y="false" on-scroll="scroll()"> <table> <tr> <td ng-repeat="oneDay in dateSelectParam.selectDays" class="week" style="min-width: {{width.td}}" ng-click="dateClk(oneDay.date)"> {{oneDay.week}} </td> </tr> <tr> <td ng-repeat="oneDay in dateSelectParam.selectDays" class="day"> <div ng-class="{true: \'positive day-selected\'}[oneDay.date == dateSelectParam.daySelected]" ng-click="dateClk(oneDay.date)">{{oneDay.day}}</div> </td> </tr> </table> </ion-scroll> <span class="date-move date-move-right" style="width: {{width.right}}" ng-click="rightSlide()"> <i class="icon ion-ios-arrow-right positive" ng-show="rightIconIsShow"></i> </span> </div> </div>'),a.put("modules/doctorIntroduction/doctorIntroductionList.html",'<ion-view> <isj-spinner is-show="spinnerShow" callback="spinnerCancel()"></isj-spinner> <ion-header-bar class="bar-light"> <isj-back-button></isj-back-button> <div class="title">{{title}}</div> </ion-header-bar> <ion-header-bar class="bar-subheader bar-light doctorIntroductionList-subheader"> <div ng-if="searchName == null || searchName == \'\'" class="search-placeholder"> <i class="icon ion-ios-search-strong positive"></i> <span>搜索医生</span> </div> <form ng-submit="doSearch()"> <label class="item-input-wrapper"> <input type="search" id="doctorIntroduction_search" ng-model="searchName"> </label> </form> </ion-header-bar> <ion-content class="has-header has-subheader content-fill doctorIntroductionList-content"> <ion-refresher refreshing-icon="" on-refresh="doRefresh()"></ion-refresher> <div ng-if="introductions.length == 0" class="no-content-center"> <span ng-if="searchNameTmp == null || searchNameTmp == \'\'">暂无医生列表</span> <span ng-if="searchNameTmp != null && searchNameTmp != \'\'">暂无结果，请重新输入关键字</span> </div> <ul ng-if="introductions.length > 0" class="list"> <li class="item item-avatar-left" ng-repeat="introduction in introductions" ng-class="{true: \'li-first\'}[$index == 0]" ng-click="viewIntroduction(introduction.id)"> <div class="photo"> <img ng-if="(introduction.photo == null || introduction.photo == \'\') && introduction.sexCode == \'1\'" src="./assets/images/doctor_man.png"> <img ng-if="(introduction.photo == null || introduction.photo == \'\') && introduction.sexCode == \'0\'" src="./assets/images/doctor_woman.png"> <img ng-if="introduction.photo != null && introduction.photo != \'\'" ng-src="{{introduction.photo}}"> </div> <div class="authenticate"> <img src="./assets/images/isapprove.png"> </div> <div> <h2 class="name">{{introduction.name}}</h2> <p class="professional">{{introduction.title}}</p> </div> <p>科室：{{introduction.dept}}</p> <p class="dept">擅长：{{introduction.skill===\'\'?\'暂无\':introduction.skill}}</p> </li> </ul> <ion-infinite-scroll ng-if="vm.moreData" on-infinite="vm.loadMore()" distance="2%"></ion-infinite-scroll> </ion-content> </ion-view>'),a.put("modules/doctorIntroduction/doctorIntroductionView.html",'<ion-view> <isj-spinner is-show="$root.inProcess"></isj-spinner> <ion-header-bar class="bar-light doctorIntroductionView-title"> <isj-back-button></isj-back-button> <div class="title"> 医生主页 </div> <a ng-class="{false:\'ion-ios-star-outline\',true:\'ion-ios-star\'}[isCollection]" class="button button-clear icon positive" ng-click="collectionDoctor()"></a> </ion-header-bar> <ion-content ng-class="{false: \'no-footer\'}[type]" class="has-header has-footer doctorIntroductionView-content"> <ul class="list"> <li class="item item-avatar-left"> <div class="photo"> <img ng-if="(introduction.photo == null || introduction.photo == \'\') && introduction.sexCode == \'1\'" src="./assets/images/doctor_man.png"> <img ng-if="(introduction.photo == null || introduction.photo == \'\') && introduction.sexCode == \'0\'" src="./assets/images/doctor_woman.png"> <img ng-if="introduction.photo != null && introduction.photo != \'\'" ng-src="{{introduction.photo}}"> </div> <div> <h2 class="name">{{introduction.name}}</h2> <p class="professional">{{introduction.title}}</p> </div> <p>{{introduction.hospital}}</p> <p class="dept">{{introduction.dept}}</p> </li> <li class="item introduction-content item-splitLine"> <h2> <i class="icon ion-ios-medkit-outline positive"></i> 擅长 </h2> <p>{{introduction.skill}}</p> </li> <li class="item introduction-content"> <h2> <i class="icon ion-ios-chatboxes-outline positive"></i> 简介 </h2> <p>{{introduction.summary}}</p> </li> </ul> </ion-content> <ion-footer-bar ng-class="{false: \'no-operation\'}[type]" class="doctorIntroductionView-footer"> <button class="button positive-bg doctorIntroduction-register" ng-click="register()">挂号</button> </ion-footer-bar> </ion-view>'),a.put("modules/familyMember/familyMemberAdd.html",'<ion-view> <isj-spinner is-show="$root.inProcess"></isj-spinner> <ion-header-bar class="bar-light"> <isj-back-button></isj-back-button> <div class="title">选择关系</div> </ion-header-bar> <ion-content class="has-header content-gray familyMemberAdd-content"> <ul> <li ng-repeat="memberType in memberTypes"> <div ng-click="medicalCardEdit(memberType.code)"> <span><img ng-src="{{memberType.img}}"></span> <span class="name">{{memberType.name}}</span> </div> </li> </ul> </ion-content> </ion-view>'),a.put("modules/familyMember/familyMemberEdit.html",'<ion-view> <isj-spinner is-show="$root.inProcess"></isj-spinner> <ion-header-bar class="bar-light"> <isj-back-button></isj-back-button> <div class="title">健康卡</div> <button class="button button-clear button-positive" ng-click="saveMember()" ng-disabled="isSubmit">保存</button> </ion-header-bar> <ion-content class="has-header content-gray familyMemberEdit-content"> <div class="list"> <label class="item item-input"> <span class="input-label photo-label"> <img ng-src="{{member.img}}" class="photo"> </span> {{member.member}} </label> <label class="item item-input"> <span class="input-label">姓名</span> <input type="text" placeholder="请实名，以免无法就诊" ng-model="member.name"> </label> <label class="item item-input"> <span class="input-label">性别</span> <span ng-if="hasSex">{{member.sex}}</span> <select ng-if="!hasSex" ng-model="member.sexCode" ng-options="node.code as node.name for node in sexs"></select> </label> <label class="item item-input"> <span class="input-label">身份证号</span> <input type="text" placeholder="必填" ng-model="member.idCard" ng-disabled="!isAdd"> </label> <label class="item item-input"> <span class="input-label">手机号</span> <input type="text" placeholder="必填" ng-model="member.phone"> </label> </div> <div ng-if="!isAdd && member.memberCode != \'00\' && member.memberCode != null" class="operation"> <button class="button button-assertive" ng-disabled="isSubmit" ng-click="deleteMember()">删除该成员</button> </div> <div class="visits" ng-if="isAdd || (member.patientVisits != null && !member.patientVisitsInit)"> <ion-checkbox class="positive" ng-model="member.patientVisits">设为默认就诊人</ion-checkbox> </div> </ion-content> </ion-view>'),a.put("modules/familyMember/familyMemberList.html",'<ion-view> <isj-spinner is-show="$root.inProcess" callback="spinnerCancel()"></isj-spinner> <ion-header-bar class="bar-light"> <isj-back-button></isj-back-button> <div class="title">家庭成员</div> <button class="button button-clear button-positive" ng-click="familyMemberAdd()" ng-disabled="!canAdd">添加</button> </ion-header-bar> <ion-header-bar class="bar-subheader bar-light familyMemberList-subheader"> <div class="title">已添加{{members.length}}位家庭成员，还可以添加{{9-members.length}}位</div> </ion-header-bar> <ion-content class="has-header has-subheader content-gray familyMemberList-content"> <ion-refresher refreshing-icon="" on-refresh="doRefresh()"></ion-refresher> <ul class="list"> <li ng-repeat="member in members" class="item item-avatar-left" ng-click="medicalCardEdit(member.id)"> <img ng-if="member.memberCode == \'00\' && member.sexCode == \'1\'" src="./assets/images/pic_man.png" class="photo"> <img ng-if="member.memberCode == \'00\' && member.sexCode == \'0\'" src="./assets/images/pic_woman.png" class="photo"> <img ng-if="member.memberCode != \'00\'" ng-src="{{memberTypes[member.memberCode].img}}" class="photo"> <div class="relationship-name"> <span ng-if="member.memberCode == \'00\'">我</span> <span ng-if="member.memberCode != \'00\'">{{memberTypes[member.memberCode].name}}</span> </div> <div class="name-sex-age"> <h2 class="name">{{member.name}}</h2> <img ng-if="member.sexCode == \'1\'" src="./assets/images/man.png" class="sex"> <img ng-if="member.sexCode == \'0\'" src="./assets/images/woman.png" class="sex"> <p class="age">{{member.age}}</p> </div> <p> <img ng-if="member.patientVisits == \'1\'" src="./assets/images/id_s.png" class="photo-card"> <img ng-if="member.patientVisits == \'0\'" src="./assets/images/id_d.png" class="photo-card"> <span>{{member.idCard}}</span> </p> <p> <img ng-if="member.patientVisits == \'1\'" src="./assets/images/telephone_s.png" class="photo-tel"> <img ng-if="member.patientVisits == \'0\'" src="./assets/images/telephone_d.png" class="photo-tel"> <span>{{member.phone}}</span> </p> <img ng-if="member.patientVisits == \'1\'" src="./assets/images/client.png" class="patient-visits"> </li> </ul> </ion-content> </ion-view>'),a.put("modules/familyMember/familyMemberSelect.html",'<ion-view> <isj-spinner is-show="$root.inProcess"></isj-spinner> <ion-header-bar class="bar-light"> <isj-back-button></isj-back-button> <div class="title">选择就诊人</div> <a class="button button-clear positive" ng-click="memberManage()">管理</a> </ion-header-bar> <ion-content class="has-header content-gray familyMemberSelect-content"> <ul> <li ng-repeat="member in members" ng-click="memberSelect(member.id)"> <div> <span> <img ng-if="member.memberCode == \'00\' && member.sexCode == \'1\'" src="./assets/images/pic_man.png"> <img ng-if="member.memberCode == \'00\' && member.sexCode == \'0\'" src="./assets/images/pic_woman.png"> <img ng-if="member.memberCode != \'00\'" ng-src="{{memberTypes[member.memberCode].img}}"> </span> <span class="name"> {{member.member}}-{{member.name}} </span> <i ng-if="memberId == member.id" class="icon ion-checkmark-circled positive selected"></i> </div> </li> <li ng-if="canAdd" ng-click="addMember()"> <div><i class="icon ion-android-add add-member"></i></div> </li> </ul> </ion-content> </ion-view>'),a.put("modules/hospitalIntroduce/hospitalIntroduce.html",'<ion-view> <isj-spinner is-show="$root.inProcess"></isj-spinner> <ion-header-bar class="bar-light"> <isj-back-button></isj-back-button> <div class="title">医院简介</div> </ion-header-bar> <ion-content class="content-fill has-header no-padding" scroll="true" overflow-scroll="true"> <iframe sandbox="allow-scripts allow-same-origin" ng-src="{{myURL}}" frameborder="1" style="width:100%; height:100%"></iframe> </ion-content> </ion-view>'),a.put("modules/hospitalNavigation/floorList.html",'<ion-view> <isj-spinner is-show="$root.inProcess"></isj-spinner> <ion-header-bar class="bar-light"> <isj-back-button></isj-back-button> <div class="title">楼层索引</div> </ion-header-bar> <ion-content class="has-header content-gray floorList-content"> <ul class="list list-inset"> <li ng-repeat="floor in floorList" class="item"> <div class="floor positive-bg">{{floor.name}}</div> <div class="floor-introduce"> <span ng-repeat="dept in floor.depts">{{dept}}</span> </div> </li> </ul> </ion-content> </ion-view>'),a.put("modules/hospitalNavigation/hospitalNavigation.html",'<ion-view> <isj-spinner is-show="$root.inProcess"></isj-spinner> <ion-header-bar class="bar-light"> <isj-back-button></isj-back-button> <div class="title">医院导航</div> </ion-header-bar> <ion-content class="has-header content-gray hospitalNavigation-content"> <ul ng-repeat="district in districtBuilds" class="list list-inset"> <li class="item item-positive">{{district.name}}</li> <li ng-repeat="build in district.builds" class="item" ng-click="buildingClk(\'{{build.id}}\')"> {{build.name}} <span ng-if="build.function != \'\'">（{{build.function}}）</span> </li> </ul> </ion-content> </ion-view>'),a.put("modules/login/forgetPassword.html",'<ion-view> <isj-spinner is-show="$root.inProcess"></isj-spinner> <ion-header-bar class="bar-light"> <isj-back-button></isj-back-button> <div class="title">忘记密码</div> </ion-header-bar> <ion-content class="has-header content-gray forget-password-content" scroll="false" has-bouncing="false"> <div class="list"> <label class="item item-input"> 手机号 <input class="forget-password-input" type="number" placeholder="11位数字" ng-model="input.phone"> </label> </div> <div class="div-button"> <button class="button button-positive" ng-click="getCode()" ng-disabled="!(input.phone.toString().length == 11) && !isSubmit">获取验证码</button> </div> </ion-content> </ion-view>'),a.put("modules/login/forgetPasswordSetting.html",'<ion-view> <isj-spinner is-show="$root.inProcess"></isj-spinner> <ion-header-bar class="bar-light"> <isj-back-button go-back="goBack()"></isj-back-button> <div class="title">忘记密码</div> </ion-header-bar> <ion-content class="has-header content-gray forgetPasswordSetting-content" scroll="false" has-bouncing="false"> <div class="prompt"> <p ng-bind="\'验证码已发送到\'+phone"></p> </div> <div class="list"> <div class="item item-input"> 验证码 <input id="registSetting-code" class="code-input" type="text" placeholder="6位数字" ng-model="input.verificationCode"> <button class="button button-positive button-resend" ng-disabled="!isResend" ng-click="resendCode()">重新发送{{secondString}}</button> </div> </div> <div class="prompt"> 密码需要填写6-20个字符，可由英文字母、数字、下划线组成 </div> <div class="list"> <label class="item item-input"> 密码 <input id="registSetting-password" class="password-input" type="password" placeholder="6-20个字符" ng-model="input.newPassword"> </label> </div> <div class="div-button"> <button class="button button-positive" ng-click="changePassword()" ng-disabled="isSubmit">修改密码</button> </div> </ion-content> </ion-view>'),
a.put("modules/login/login.html",'<ion-view> <isj-spinner is-show="$root.inProcess"></isj-spinner> <ion-header-bar class="bar-light"> <isj-back-button go-back="goBack()"></isj-back-button> <div class="title">登录</div> </ion-header-bar> <ion-content class="has-header content-gray login-content" scroll="false" has-bouncing="false"> <div class="warm-prompt"> <i class="ion-ios-information-outline"></i> 温馨提示：<div ng-bind-html="loginPrompt" style="font-size: 14px"></div> </div> <div class="list"> <label class="item item-input item-icon-left"> <i class="icon ion-ios-person-outline list-icon-left"></i> <input id="login-phone" class="login-input" type="number" placeholder="请输入手机号" ng-model="input.phone"> </label> <label class="item item-input item-icon-left"> <i class="icon ion-ios-unlocked-outline list-icon-left"></i> <input id="login-password" class="login-input" type="password" placeholder="请输入密码" ng-model="input.password"> </label> </div> <div class="div-button"> <button class="button button-positive" ng-click="login()">登录</button> </div> <div class="div-a"> <a href="#/regist" class="positive">注册</a> <a href="#/forgetPassword" class="positive forget-password">忘记密码</a> </div> </ion-content> </ion-view>'),a.put("modules/login/regist.html",'<ion-view> <isj-spinner is-show="$root.inProcess"></isj-spinner> <ion-header-bar class="bar-light"> <isj-back-button></isj-back-button> <div class="title">注册</div> </ion-header-bar> <ion-content class="has-header content-gray regist-content" scroll="false" has-bouncing="false"> <div class="list"> <label class="item item-input"> 手机号 <input id="regist-phone" class="regist-input" type="number" placeholder="11位数字" ng-model="input.phone"> </label> </div> <div class="div-button"> <button ng-disabled="!(input.phone.toString().length == 11) && !isSubmit" class="button button-positive" ng-click="getCode()">获取验证码</button> </div> </ion-content> </ion-view>'),a.put("modules/login/registSetting.html",'<ion-view> <isj-spinner is-show="$root.inProcess"></isj-spinner> <ion-header-bar class="bar-light"> <isj-back-button go-back="goBack()"></isj-back-button> <div class="title">注册</div> </ion-header-bar> <ion-content class="has-header content-gray registSetting-content"> <div class="prompt"> <p ng-bind="\'验证码已发送到\'+phone"></p> </div> <div class="list"> <div class="item item-input"> 验证码 <input id="registSetting-code" class="code-input" type="text" placeholder="6位数字" ng-model="input.verificationCode"> <button class="button button-resend button-positive" ng-disabled="!isResend" ng-click="resendCode()">重新发送{{secondString}}</button> </div> </div> <div class="prompt"> 密码需要填写6-20个字符，可由英文字母、数字、下划线组成 </div> <div class="list"> <label class="item item-input"> 密码 <input id="registSetting-password" class="password-input" type="password" placeholder="6-20个字符" ng-model="input.password"> </label> </div> <div class="prompt"> 体验快速预约挂号，请填写您的信息 </div> <div class="list"> <label class="item item-input"> 姓名 <input class="name-input" type="text" placeholder="请实名，以免无法就诊" ng-model="input.name"> </label> <label class="item item-input"> 身份证号 <input class="idCard-input" type="text" placeholder="必填" ng-model="input.idCard"> </label> </div> <div class="div-button"> <button class="button button-positive" ng-click="regist()" ng-disabled="isSubmit">注册</button> </div> </ion-content> </ion-view>'),a.put("modules/medicalCard/medicalCardEdit.html",'<ion-view> <isj-spinner is-show="$root.inProcess"></isj-spinner> <ion-header-bar class="bar-light"> <isj-back-button></isj-back-button> <div class="title">绑卡</div> </ion-header-bar> <ion-content scroll="false" class="has-header content-gray medicalCardEdit-content"> <div class="list list-inset"> <label class="item item-input"> <span class="input-label"> <img src="./assets/images/card_picture.png"> </span> 病历号 </label> </div> <div class="list list-inset"> <label class="item item-input"> <span class="input-label"> <img src="./assets/images/show_complete.png"> </span> <input type="text" ng-model="input.medicalNum"> </label> </div> <div class="operation"> <button class="button button-positive" ng-click="changeNum()" ng-disabled="isSubmit">更新</button> </div> <div class="create"> <button class="button button-clear button-positive" ng-click="createNum()" ng-disabled="isSubmit">在线建档</button> </div> </ion-content> </ion-view>'),a.put("modules/medicalCard/medicalCardList.html",'<ion-view> <isj-spinner is-show="$root.inProcess" callback="spinnerCancel()"></isj-spinner> <ion-header-bar class="bar-light"> <isj-back-button></isj-back-button> <div class="title">就诊卡管理</div> </ion-header-bar> <ion-content class="has-header medicalCardList-content"> <ion-refresher refreshing-icon="" on-refresh="doRefresh()"></ion-refresher> <ul class="list"> <li ng-repeat="member in members" class="item item-avatar-left" ng-click="medicalCardEdit(member.id)"> <img ng-if="member.memberCode == \'00\' && member.sexCode == \'1\'" src="./assets/images/pic_man.png" class="photo"> <img ng-if="member.memberCode == \'00\' && member.sexCode == \'0\'" src="./assets/images/pic_woman.png" class="photo"> <img ng-if="member.memberCode != \'00\'" ng-src="{{memberTypes[member.memberCode].img}}" class="photo"> <div class="relationship-name"> <span ng-if="member.memberCode == \'00\'">我</span> <span ng-if="member.memberCode != \'00\'">{{memberTypes[member.memberCode].name}}</span> </div> <div class="name-sex-age"> <h2 class="name">{{member.name}}</h2> <img ng-if="member.sexCode == \'1\'" src="./assets/images/man.png" class="sex"> <img ng-if="member.sexCode == \'0\'" src="./assets/images/woman.png" class="sex"> <p class="age">{{member.age}}</p> </div> <p class="idCard"> <img ng-if="member.patientVisits == \'1\'" src="./assets/images/id_s.png"> <img ng-if="member.patientVisits == \'0\'" src="./assets/images/id_d.png"> {{member.idCard}} </p> <p class="medicalNum"> 病历号：{{member.medicalNum}} </p> <img ng-if="member.patientVisits == \'1\'" src="./assets/images/client.png" class="patient-visits"> </li> </ul> </ion-content> </ion-view>'),a.put("modules/medicalGuide/medicalGuide.html",'<ion-view> <isj-spinner is-show="$root.inProcess"></isj-spinner> <ion-header-bar class="bar-light"> <isj-back-button></isj-back-button> <div class="title">就医指南</div> </ion-header-bar> <ion-content class="has-header content-introduce content-gray"> <div ng-bind-html="medicalGuide"></div> </ion-content> </ion-view>'),a.put("modules/medicalReport/medicalReportList.html",'<ion-view> <isj-spinner is-show="$root.inProcess" callback="spinnerCancel()"></isj-spinner> <ion-header-bar class="bar-light medicalReportList_head"> <isj-back-button go-back="goBack()"></isj-back-button> <div class="title" ng-click="selectMember()"> {{patient.name}}的报告单 <i class="icon ion-ios-arrow-down positive operation-down"></i> </div> <a class="button button-clear icon ion-ios-information-outline positive prompt" ng-click="promptClk()"></a> </ion-header-bar> <div class="medicalReportList_select has-header"> <div class="button-bar"> <button ng-class="{false: \'button-outline\'}[category == \'1\']" class="button button-positive" ng-click="categoryClk(\'1\')"> 检验报告 </button> <button ng-class="{false: \'button-outline\'}[category == \'2\']" class="button button-positive" ng-click="categoryClk(\'2\')"> 检查报告 </button> </div> <div class="reportSearch-form"> <div> <label class="item-input item-select"> <select ng-model="searchStr.searchTime" ng-change="searchReport()" ng-options="node.code as node.name for node in searchTimeTypes"></select> <i class="icon ion-ios-arrow-down positive"></i> </label> </div> <div> <label class="item-input item-select"> <select ng-model="searchStr.searchStatus" ng-change="searchReport()" ng-options="node.code as node.name for node in searchStatusTypes"></select> <i class="icon ion-ios-arrow-down positive"></i> </label> </div> </div> </div> <ion-content class="has-header medicalReportList-content"> <ion-refresher refreshing-icon="" on-refresh="doRefresh()"></ion-refresher> <ul ng-if="reports.length > 0" class="list"> <li class="item item-icon-right" ng-repeat="report in reports" ng-click="viewReport(report.id, report.status)"> <h2>{{report.name}}</h2> <p>检查时间：{{report.examinationDate}}</p> <i ng-if="report.status == \'0\'" class="badge assertive">未出</i> <i ng-if="report.status == \'1\'" class="badge positive">已出</i> <i class="icon ion-ios-arrow-right icon-right"></i> </li> </ul> <div ng-if="reports.length == 0" class="no-content-padding">暂时没有报告</div> </ion-content> </ion-view>'),a.put("modules/medicalReport/medicalReportView1.html",'<ion-view> <isj-spinner is-show="$root.inProcess"></isj-spinner> <ion-header-bar class="bar-light"> <isj-back-button></isj-back-button> <div class="title"> 检验报告单 </div> </ion-header-bar> <ion-content class="has-header medicalReportView1-content"> <div class="report-content"> <table class="report-table"> <tr> <td class="form-label">检验项目</td> <td>{{report.name}}</td> </tr> <tr> <td class="form-label">就诊人</td> <td>{{report.patient}}</td> </tr> <tr> <td class="form-label">检验时间</td> <td>{{report.examinationDate}}</td> </tr> <tr> <td colspan="2"> <table class="report-item-table"> <tr> <th><div>项目</div></th> <th><div>结果</div></th> <th><div>参考值</div></th> </tr> <tr ng-repeat="item in report.items"> <td>{{item.name}}</td> <td align="center">{{item.result}}</td> <td align="center" align="center">{{item.reference}}</td> </tr> </table> </td> </tr> <tr> <td class="form-label">检验医生</td> <td>{{report.inspectionDoctor}}</td> </tr> <tr> <td class="form-label">审核医生</td> <td>{{report.examineDoctor}}</td> </tr> </table> </div> <div class="report-prompt"> 指标仅供参考，请以医院纸质报告为准 </div> </ion-content> </ion-view>'),a.put("modules/medicalReport/medicalReportView2.html",'<ion-view> <isj-spinner is-show="$root.inProcess"></isj-spinner> <ion-header-bar class="bar-light"> <isj-back-button></isj-back-button> <div class="title"> 检验报告单 </div> </ion-header-bar> <ion-content class="has-header content-fill medicalReportView2-content"> <ion-scroll zooming="true" overflow-scroll="false" direction="xy" style="width: 100%;height: 100%"> <img ng-src="{{image}}"> </ion-scroll> </ion-content> </ion-view>'),a.put("modules/onlinePayment/onlinePaymentList.html",'<ion-view> <isj-spinner is-show="$root.inProcess" callback="spinnerCancel()"></isj-spinner> <ion-header-bar class="bar-light"> <isj-back-button go-back="goBack()"></isj-back-button> <div class="title" ng-click="selectMember()"> {{patient.name}}的缴费 <i class="icon ion-ios-arrow-down positive operation-down"></i> </div> </ion-header-bar> <ion-header-bar class="bar-subheader onlinePaymentList-subheader"> <label class="item-input item-select payStatus-select"> <select ng-model="searchStr.searchStatus" ng-change="searchPay()" ng-options="node.code as node.name for node in searchStatusTypes"></select> <i class="icon ion-ios-arrow-down positive"></i> </label> </ion-header-bar> <ion-content class="has-header has-subheader has-footer content-fill onlinePaymentList-content"> <ion-refresher refreshing-icon="" on-refresh="doRefresh()"></ion-refresher> <div ng-if="recipes.length > 0" class="recipes"> <div ng-repeat="recipe in recipes"> <div class="recipes-flex-row recipes-border-bottom recipe-title"> <span class="column-check"> <ion-checkbox ng-if="recipe.canCheck" ng-model="recipe.isCheck" ng-change="checkClk(recipe.outpatientNum)"></ion-checkbox> <img ng-if="!recipe.canCheck" class="checkbox-disable" src="./assets/images/btn_check_off_disable.png"> </span> <span class="column-content font-major">门诊流水号：{{recipe.outpatientNum}}</span> <span class="column-other font-default">{{recipe.outpatientDate.substring(5,11)}}</span> </div> <div ng-repeat="recipeOne in recipe.recipes"> <div class="recipes-flex-row-stretch recipes-border-bottom"> <span class="column-check recipe-check"> <ion-checkbox ng-if="recipeOne.statusCode == \'0\'" ng-model="recipeOne.isCheck" ng-disabled="true"></ion-checkbox> <img ng-if="recipeOne.statusCode != \'0\'" class="checkbox-disable" src="./assets/images/btn_check_off_disable.png"> </span> <span class="column-content recipe"> <div class="recipes-flex-row"> <span class="column-content font-default">处方号：{{recipeOne.recipeNum}}</span> <span class="column-other font-default positive">{{recipeOne.status}}</span></div> <div class="items"> <div ng-repeat="item in recipeOne.items" class="recipes-flex-row column-margin-top"> <span class="column-content font-major">{{item.name}}</span> <span class="column-other font-money">{{item.amount}}×{{item.number}}</span> </div> </div> <div class="font-default column-margin-top">执行科室：{{recipeOne.dept}}</div> <div class="recipes-flex-row column-margin-top"> <span class="column-content font-default">执行地点：{{recipeOne.location==\'\'?\'请在院内咨询\':recipeOne.location}}</span> <span class="column-other font-major">￥{{recipeOne.total}}</span> </div> </span> </div> </div> </div> </div> <div ng-if="recipes.length == 0" class="no-content-center">暂时没有缴费信息</div> </ion-content> <ion-footer-bar align-title="left" class="bar-light onlinePaymentList-footer"> <h1 class="title">合计：&nbsp;<span class="positive">￥{{amount}}元</span></h1> <button class="button button-positive pay-button" ng-disabled="isSubmit || recipeNums.length == 0" ng-click="payClk()">支付</button> </ion-footer-bar> </ion-view>'),a.put("modules/onlinePayment/paymentResult.html",'<ion-view> <isj-spinner is-show="$root.inProcess"></isj-spinner> <ion-header-bar class="bar-light"> <isj-back-button go-back="goBack()"></isj-back-button> <div class="title">支付成功</div> </ion-header-bar> <ion-content class="has-header content-gray paymentResult-content"> <div class="payResult-info"> <div><img ng-src="{{resultImgSrc}}"></div> <div class="positive payResult-font">{{resultText}}</div> </div> <div class="payResult-link"> <button class="button button-positive" ng-click="viewRegistration()"> <span ng-if="fromPage == \'pay\'">查看缴费单</span> <span ng-if="fromPage == \'register\'">查看挂号单</span> </button> </div> </ion-content> </ion-view>'),a.put("modules/onlinePayment/paymentSelect.html",'<ion-view> <isj-spinner is-show="$root.inProcess"></isj-spinner> <ion-header-bar class="bar-light"> <isj-back-button></isj-back-button> <div class="title"> 支付 </div> </ion-header-bar> <ion-content class="has-header paymentSelect-content"> <ul class="list"> <li class="item item-divider"> 请选择支付方式 </li> <li class="item item-avatar-left item-icon-right" ng-click="paymentSelect(\'1\')"> <img src="./assets/images/CMB_icon.jpg"> 一网通银行卡支付 <!--<i class="icon ion-minus-circled select-grey" style="color: #d0d0d0"></i>--> <i id="select_no_1" class="icon ion-ios-circle-outline positive select-no"></i> <i id="select_yes_1" class="icon ion-ios-checkmark positive select-yes select-none"></i> </li> <li class="item item-avatar-left item-icon-right" ng-click="paymentSelect(\'2\')"> <img src="./assets/images/alipay_icon.png"> 支付宝移动支付 <i id="select_no_2" class="icon ion-ios-circle-outline positive select-no"></i> <i id="select_yes_2" class="icon ion-ios-checkmark positive select-yes select-none"></i> </li> <li class="item item-avatar-left item-icon-right" ng-click="paymentSelect(\'3\')"> <img src="./assets/images/weixin.png"> 微信移动支付 <i id="select_no_3" class="icon ion-ios-circle-outline positive select-no"></i> <i id="select_yes_3" class="icon ion-ios-checkmark positive select-yes select-none"></i> </li> <li class="item"> 总额 <span class="money">￥{{order.amount}}元</span> </li> </ul> <div ng-if="needTime" class="countDown"> 请在<span id="payment_countDown"><span ng-bind="time.minute"></span>分<span ng-bind="time.second"></span>秒</span>内完成支付 </div> <div class="confirm"> <button class="button button-positive" ng-click="pay()" ng-disabled="paySelectValue == null || paySelectValue == \'\'">支付</button> </div> </ion-content> </ion-view>'),a.put("modules/register/registerConfirmAppt.html",'<ion-view> <isj-spinner is-show="$root.inProcess"></isj-spinner> <ion-header-bar class="bar-light"> <isj-back-button go-back="goBack()"></isj-back-button> <div class="title"></div> <a class="button button-clear icon ion-ios-home-outline positive return-home-icon" ng-click="goMainPage()"></a> </ion-header-bar> <ion-content class="has-header registerConfirmAppt-content"> <div class="patient"> <img ng-if="patient.memberCode == \'00\' && patient.sexCode == \'1\'" src="./assets/images/pic_man.png" class="photo"> <img ng-if="patient.memberCode == \'00\' && patient.sexCode == \'0\'" src="./assets/images/pic_woman.png" class="photo"> <img ng-if="patient.memberCode != \'00\'" ng-src="{{memberTypes[patient.memberCode].img}}" class="photo"> <span>就诊人：{{patient.name}}</span> <span> <a class="positive" ng-click="selectMember()"> 换人 <i class="icon ion-ios-loop-strong"></i> </a> </span> <p>身份证号：{{patient.idCard}}</p> </div> <div class="register-info"> <table> <tr> <td class="label">就诊时间：</td> <td width="100%">{{dateDisplay}}</td> </tr> <tr> <td class="label">就诊地点：</td> <td width="100%">{{doctor.dept}}（{{doctor.district}}）</td> </tr> <tr> <td class="label">看诊医生：</td> <td width="100%">{{doctor.name}}</td> </tr> <tr> <td class="label positive">温馨提示：</td> <td width="100%" class="positive"> <div ng-bind-html="prompt"></div> </td> </tr> </table> </div> <div class="visits"> <h4 class="agreement" ng-click="showAgreement()"> 我已了解并同意挂号规则（点击查看详细） </h4> <ion-checkbox class="item-checkbox" ng-model="isChecked"> </ion-checkbox> </div> <div class="amount"> 合计：{{doctor.amount}}元 </div> <div class="confirm"> <button class="button button-positive" ng-click="registerConfirm()" ng-disabled="!isChecked">确定</button> </div> </ion-content> </ion-view>'),a.put("modules/register/registerConfirmToday.html",'<ion-view> <isj-spinner is-show="$root.inProcess"></isj-spinner> <ion-header-bar class="bar-light"> <isj-back-button go-back="goBack()"></isj-back-button> <div class="title"></div> <a class="button button-clear icon ion-ios-home-outline positive return-home-icon" ng-click="goMainPage()"></a> </ion-header-bar> <ion-content class="has-header registerConfirmToday-content"> <div class="patient"> <img ng-if="patient.memberCode == \'00\' && patient.sexCode == \'1\'" src="./assets/images/pic_man.png" class="photo"> <img ng-if="patient.memberCode == \'00\' && patient.sexCode == \'0\'" src="./assets/images/pic_woman.png" class="photo"> <img ng-if="patient.memberCode != \'00\'" ng-src="{{memberTypes[patient.memberCode].img}}" class="photo"> <span>就诊人：{{patient.name}}</span> <span> <a class="positive" ng-click="selectMember()"> 换人 <i class="icon ion-ios-loop-strong"></i> </a> </span> </div> <div class="register-info"> <table> <tr> <td class="label">就诊时间：</td> <td width="100%">{{todayDisplay}}</td> </tr> <tr> <td class="label">就诊地点：</td> <td width="100%">{{doctor.dept}}（{{doctor.district}}）</td> </tr> <tr> <td class="label">看诊医生：</td> <td width="100%">{{doctor.name}}</td> </tr> <tr> <td class="label positive">温馨提示：</td> <td width="100%" class="positive"> <div ng-bind-html="prompt"></div> </td> </tr> </table> </div> <div class="visits"> <ion-checkbox class="item-checkbox" ng-model="isChecked"> </ion-checkbox> <h4 class="agreement" ng-click="showAgreement()"> 我已了解并同意挂号规则（点击查看详细） </h4> </div> <div class="amount"> 合计：{{doctor.amount}}元 </div> <div class="confirm"> <button class="button button-positive" ng-click="registerConfirm()" ng-disabled="!isChecked">确定</button> </div> </ion-content> </ion-view>'),a.put("modules/register/registerDoctorDateSelect.html",'<ion-view> <isj-spinner is-show="spinnerShow" callback="spinnerCancel()"></isj-spinner> <ion-header-bar class="bar-light registerDoctorDateSelect-title"> <isj-back-button></isj-back-button> <div class="title"></div> <a class="button button-clear icon ion-ios-search-strong positive" ng-click="searchClk()"></a> </ion-header-bar> <ion-header-bar ng-class="{true: \'search-none\'}[hideSearch]" class="head-search"> <form ng-submit="doSearch()"> <input id="registerDoctorDateSelect_search" type="search" ng-model="major" placeholder="姓名或专长"> </form> <div class="search-icon"> <a class="button button-clear icon ion-ios-close-empty positive" ng-click="searchClk()"></a> </div> </ion-header-bar> <div class="district-select has-header" ng-show="!hasSearchStr"> <div class="button-bar"> <button ng-class="{false: \'button-outline\'}[appointmentMode == \'1\']" class="button button-positive district-button" ng-click="appointmentModeClk(\'1\')"> 预约时间 </button> <button ng-class="{false: \'button-outline\'}[appointmentMode == \'2\']" class="button button-positive district-button" ng-click="appointmentModeClk(\'2\')"> 预约医生 </button> </div> </div> <isj-date-select date-select-param="dateSelectParam" callback="dateSelectFun()" class="has-header-district has-header registerDoctorDateSelect-date" ng-show="appointmentMode == \'1\' && !hasSearchStr"></isj-date-select> <ion-content delegate-handle="registerDateScroll" class="has-header content-fill registerDoctorDateSelect-content" ng-class="contentMarginTop()"> <ion-refresher refreshing-icon="" on-refresh="doRefresh()"></ion-refresher> <ul ng-if="doctors.length > 0" class="list"> <li ng-repeat="doctor in doctors" class="item item-avatar-left" ng-click="doctorClk(doctor.id, doctor.overCount, doctor.unallowed)"> <div class="photo"> <img ng-if="(doctor.photo == null || doctor.photo == \'\') && doctor.sexCode == \'1\'" src="./assets/images/doctor_man.png" onerror="this.src=\'./assets/images/doctor_man.png\'" ng-click="photoClk(doctor.id, $event)"> <img ng-if="(doctor.photo == null || doctor.photo == \'\') && doctor.sexCode == \'0\'" src="./assets/images/doctor_woman.png" onerror="this.src=\'./assets/images/doctor_man.png\'" ng-click="photoClk(doctor.id, $event)"> <img ng-if="doctor.photo != null && doctor.photo != \'\'" ng-src="{{doctor.photo}}" ng-click="photoClk(doctor.id, $event)"> </div> <div class="name"> <h2>{{doctor.name}}</h2> <p>{{doctor.title}}</p> <div ng-if="doctor.unallowed != null && doctor.unallowed != \'\'" class="dark-bg can-register">{{doctor.unallowed}}</div> <div ng-if="(doctor.unallowed == null || doctor.unallowed == \'\') && doctor.overCount > 0" class="positive-bg can-register">有号</div> <div ng-if="(doctor.unallowed == null || doctor.unallowed == \'\') && doctor.overCount == 0" class="assertive-bg can-register">号满</div> </div> <p>出诊地点：{{doctor.dept}}</p> <p>擅长：{{doctor.skill===\'\'?\'暂无\':doctor.skill}}</p> <div ng-if="doctor.districtId != null && doctor.districtId != \'\'" class="positive-border district-icon" ng-class="districtColor[doctor.districtId]"></div> <div class="district-icon-font balanced">{{doctor.district}}</div> </li> </ul> <div ng-if="doctors.length == 0" class="no-content-center"> <span ng-if="majorTmp == null || majorTmp == \'\'">暂无医生排班信息</span> <span ng-if="majorTmp != null && majorTmp != \'\'">暂无结果，请重新输入关键字</span> </div> <ion-infinite-scroll ng-if="vm.moreData" on-infinite="vm.loadMore()" distance="2%"></ion-infinite-scroll> </ion-content> </ion-view>'),a.put("modules/register/registerDoctorTimeSelect.html",'<ion-view> <isj-spinner is-show="$root.inProcess" callback="spinnerCancel()"></isj-spinner> <ion-header-bar class="bar-light"> <isj-back-button></isj-back-button> <div class="title">{{dataInfo.name}}</div> <a class="button button-clear icon ion-ios-home-outline positive return-home-icon" ng-click="goMainPage()"></a> </ion-header-bar> <isj-date-select date-select-param="dateSelectParam" callback="dateSelectFun()" class="has-header registerDoctorTimeSelect-date" ng-if="dateSelectParam.selectDays.length > 0"></isj-date-select> <div class="has-header registerDoctorTimeSelect-doctor" ng-if="dateSelectParam.selectDays.length > 0"> <ul class="list"> <li class="item item-avatar-left"> <div class="photo"> <img ng-if="(photo == null || photo == \'\') && dataInfo.sexCode == \'1\'" src="./assets/images/doctor_man.png" ng-click="photoClk(doctorId)"> <img ng-if="(photo == null || photo == \'\') && dataInfo.sexCode == \'0\'" src="./assets/images/doctor_woman.png" ng-click="photoClk(doctorId)"> <img ng-if="photo != null && photo != \'\'" ng-src="{{photo}}" ng-click="photoClk(doctorId)"> </div> <div class="name"> <h2>{{dataInfo.name}}</h2> <p>{{dataInfo.title}}</p> </div> <p>出诊地点：{{dataInfo.dept}}</p> <p>挂号费：<span class="positive" style="font-weight: 600;font-size: 15px">￥{{dataInfo.amount}}</span></p> <div class="positive-border district-icon" ng-class="districtColor[dataInfo.districtId]"></div> <div class="district-icon-font">{{dataInfo.district}}</div> </li> <li class="item item-divider"> 预约时间 </li> </ul> </div> <ion-content delegate-handle="registerTimeScroll" ng-class="{true: \'no-dates\'}[dateSelectParam.selectDays.length == 0]" class="has-header content-fill registerDoctorTimeSelect-content"> <ion-refresher refreshing-icon="" on-refresh="doRefresh()"></ion-refresher> <div ng-if="dataInfo.overCount == 0" class="no-count"> <span>号满</span> </div> <div ng-if="dateSelectParam.selectDays.length > 0" class="time-select"> <div ng-repeat="time in times" ng-class="{true: \'time-disable\'}[time.overCount==0]" ng-click="timeClk(time.time, time.overCount)"> <i ng-if="time.time != \'\'" class="icon ion-ios-clock-outline"></i> <span>{{time.time}}</span> </div> </div> <div ng-if="dateSelectParam.selectDays.length == 0 && !$root.inProcess" class="no-content-center">暂无医生号点信息</div> </ion-content> </ion-view>'),a.put("modules/register/registerTodayDoctorList.html",'<ion-view> <isj-spinner is-show="spinnerShow" callback="spinnerCancel()"></isj-spinner> <ion-header-bar class="bar-light registerTodayDoctorList-title"> <isj-back-button></isj-back-button> <div class="title"></div> <a class="button button-clear icon ion-ios-search-strong positive" ng-click="searchClk()"></a> </ion-header-bar> <ion-header-bar ng-class="{true: \'search-none\'}[hideSearch]" class="head-search"> <form ng-submit="doSearch()"> <input id="registerTodayDoctorList_search" type="search" ng-model="major" placeholder="姓名或专长"> </form> <div class="search-icon"> <a class="button button-clear icon ion-ios-close-empty positive" ng-click="searchClk()"></a> </div> </ion-header-bar> <ion-content class="has-header content-fill registerTodayDoctorList-content"> <ion-refresher refreshing-icon="" on-refresh="doRefresh()"></ion-refresher> <div ng-if="doctors.length == 0" class="no-content-center"> <span ng-if="majorTmp == null || majorTmp == \'\'">暂无医生排班信息</span> <span ng-if="majorTmp != null && majorTmp != \'\'">暂无结果，请重新输入关键字</span> </div> <ul ng-if="doctors.length > 0" class="list"> <li class="item item-avatar-left" collection-repeat="doctor in doctors" ng-click="doctorClk(doctor.id, doctor.overCount, doctor.unallowed)"> <div class="photo"> <img ng-if="(doctor.photo == null || doctor.photo == \'\') && doctor.sexCode == \'1\'" src="./assets/images/doctor_man.png" ng-click="photoClk(doctor.id, $event)"> <img ng-if="(doctor.photo == null || doctor.photo == \'\') && doctor.sexCode == \'0\'" src="./assets/images/doctor_woman.png" ng-click="photoClk(doctor.id, $event)"> <img ng-if="doctor.photo != null && doctor.photo != \'\'" ng-src="{{doctor.photo}}" ng-click="photoClk(doctor.id, $event)"> </div> <div class="name"> <h2>{{doctor.name}}</h2> <p>{{doctor.title}}</p> <div ng-if="doctor.unallowed != null && doctor.unallowed != \'\'" class="dark-bg can-register">{{doctor.unallowed}}</div> <div ng-if="(doctor.unallowed == null || doctor.unallowed == \'\') && doctor.overCount > 0" class="positive-bg can-register">有号</div> <div ng-if="(doctor.unallowed == null || doctor.unallowed == \'\') && doctor.overCount == 0" class="assertive-bg can-register">号满</div> </div> <p>出诊地点：{{doctor.dept}}</p> <p>擅长：{{doctor.skill===\'\'?\'暂无\':doctor.skill}}</p> <div ng-if="doctor.districtId != null && doctor.districtId != \'\'" class="positive-border district-icon" ng-class="districtColor[doctor.districtId]"></div> <div class="district-icon-font balanced">{{doctor.district}}</div> </li> </ul> <ion-infinite-scroll ng-if="vm.moreData" on-infinite="vm.loadMore()" distance="2%"></ion-infinite-scroll> </ion-content> </ion-view>'),a.put("modules/setting/appAbout.html",'<ion-view> <ion-header-bar class="bar-light"> <isj-back-button></isj-back-button> <div class="title">关于掌上盛京</div> </ion-header-bar> <ion-content class="has-header content-fill appAbout-content"> <div class="logo"> <img src="./assets/images/logoy.png"> </div> <div class="version"> V{{ versionNumber }}({{ versionCode }}) </div> <div ng-bind-html="description" style="margin: 25px"></div> <!-- <div class="service-phone">\n      客服电话：<span class="positive">{{servicePhone}}</span>\n    </div> --> <div class="appAbout-foot">沈阳普日软件技术有限公司技术支持</div> </ion-content> </ion-view>'),a.put("modules/setting/changePassword.html",'<ion-view> <isj-spinner is-show="$root.inProcess"></isj-spinner> <ion-header-bar class="bar-light"> <isj-back-button></isj-back-button> <div class="title">修改密码</div> </ion-header-bar> <ion-content class="has-header content-gray changePassword-content"> <form> <div class="prompt"> 密码需要填写6-20个字符，可由英文字母、数字、下划线组成 </div> <div class="list"> <label class="item item-input"> <span class="input-label">当前密码</span> <input type="password" placeholder="6-20个字符" ng-model="input.nowPassword" maxlength="20"> </label> </div> <div class="list interval"> <label class="item item-input"> <span class="input-label">新密码</span> <input type="password" placeholder="6-20个字符" ng-model="input.newPassword" maxlength="20"> </label> <label class="item item-input"> <span class="input-label">确认新密码</span> <input type="password" placeholder="6-20个字符" ng-model="input.confirmPassword" maxlength="20"> </label> </div> <div class="operation"> <button class="button button-positive" ng-click="change()" ng-disabled="isSubmit">确认修改</button> </div> </form> </ion-content> </ion-view>'),a.put("modules/setting/feedback.html",'<ion-view> <isj-spinner is-show="$root.inProcess"></isj-spinner> <ion-header-bar class="bar-light"> <isj-back-button></isj-back-button> <div class="title">用户意见</div> </ion-header-bar> <ion-content class="has-header content-gray feedback-content"> <div class="inputs"> <div> <textarea placeholder="对掌上盛京有什么意见，请告诉我们" ng-model="input.opinion"></textarea> </div> </div> <div class="operation"> <button class="button button-positive" ng-click="opinionSubmit()" ng-disabled="isSubmit">提交</button> </div> </ion-content> </ion-view>'),a.put("modules/setting/feedbackList.html",'<ion-view> <isj-spinner is-show="$root.inProcess" callback="spinnerCancel()"></isj-spinner> <ion-header-bar class="bar-light"> <isj-back-button></isj-back-button> <div class="title">意见列表</div> <button class="button button-clear button-positive" ng-click="opinionAdd()">提意</button> </ion-header-bar> <ion-header-bar class="bar-subheader feedbackList-subheader"> <label class="item-input item-select feedbackStatus-select"> <select ng-model="searchStr.feedbackStatus" ng-change="searchFeedback()" ng-options="node.code as node.name for node in feedbackStatusTypes"></select> <i class="icon ion-ios-arrow-down positive"></i> </label> </ion-header-bar> <ion-content class="has-header has-subheader content-gray feedbackList-content"> <ion-refresher refreshing-icon="" on-refresh="doRefresh()"></ion-refresher> <ul class="list"> <li ng-repeat="feedback in feedbacks" class="item" ng-click="opinionView(feedback.id)"> <p class="opinion-time"> <span>{{feedback.opinionTime}}</span> <span class="positive opinion-status">{{feedback.status}}</span> </p> <p class="opinion"> {{feedback.opinion}} </p> <p class="feedback"> <i class="icon ion-ios-chatboxes-outline positive"></i> <span>{{feedback.feedback}}</span> </p> </li> </ul> </ion-content> </ion-view>'),a.put("modules/setting/feedbackListNew.html",'<ion-view class="feedbackListNew"> <isj-spinner is-show="$root.inProcess" callback="spinnerCancel()"></isj-spinner> <ion-header-bar class="bar-light"> <isj-back-button></isj-back-button> <div class="title">意见反馈</div> </ion-header-bar> <ion-content class="has-header content-gray feedbackListNew-content has-footer" id="message-detail-content" delegate-handle="messageDetailsScroll"> <div ng-repeat="ophis in feedbacks" class="feedbackListNew-content-div"> <div class="feedbackListNew-content-space"> <div class="send">{{ophis.opinion}}</div> <div class="content-opinion-time">{{ophis.opinionTime}}</div> </div> <div class="feedbackListNew-content-space" ng-if="ophis.feedback !== undefined && ophis.feedback !== \'\' && ophis.feedback !== null"> <div ng-if="ophis.feedback !== undefined && ophis.feedback !== \'\' && ophis.feedback !== null" class="replay">{{ophis.feedback}}</div> <div ng-if="ophis.feedback !== undefined && ophis.feedback !== \'\' && ophis.feedback !== null" class="content-feedback-time">{{ophis.feedbackTime}}</div> </div> </div> </ion-content> <ion-footer-bar class="feedbackListNew-footer" resize-foot-bar> <textarea msd-elastic class="feedback-new-textarea" placeholder="对掌上盛京有什么意见，请告诉我们" ng-model="inputOpinion"></textarea> <button class="button feedback-new-submit" ng-click="submitOpinion()" ng-disabled="!isSubmit" ng-class="{\'button-positive\':isSubmit}">提交</button> </ion-footer-bar> </ion-view>'),
a.put("modules/setting/feedbackView.html",'<ion-view> <isj-spinner is-show="$root.inProcess"></isj-spinner> <ion-header-bar class="bar-light"> <isj-back-button></isj-back-button> <div class="title">用户意见</div> </ion-header-bar> <ion-content class="has-header content-gray feedbackView-content"> <ul class="list list-first"> <li class="item"> <p class="title positive"> <i class="icon ion-ios-compose-outline positive"></i> <span>用户意见</span> </p> <p class="content">{{feedback.opinion}}</p> <p class="time">{{feedback.opinionTime}}</p> </li> </ul> <ul class="list"> <li class="item"> <p class="title positive"> <i class="icon ion-ios-chatboxes-outline positive"></i> <span>医院反馈</span> </p> <p class="content">{{feedback.feedback}}</p> <p class="time">{{feedback.feedbackTime}}</p> </li> </ul> </ion-content> </ion-view>'),a.put("modules/setting/settingIndex.html",'<ion-view> <ion-header-bar class="bar-light"> <isj-back-button></isj-back-button> <div class="title">设置</div> </ion-header-bar> <ion-content class="has-header content-gray settingIndex-content"> <ul ng-if="isLogin" class="list list-inset"> <li class="item item-icon-left item-icon-right" ng-click="itemRouter(\'settingChangePassword\')"> <i class="icon ion-ios-unlocked-outline icon-left"></i> 修改登录密码 <i class="icon ion-ios-arrow-right icon-right"></i> </li> </ul> <div ng-if="isLogin" class="operation"> <button class="button button-assertive" ng-click="quit()">退出登录</button> </div> </ion-content> </ion-view>'),a.put("modules/setting/upgrading.html",'<ion-view> <ion-header-bar class="bar-light"> <isj-back-button></isj-back-button> <div class="title">{{title}}</div> </ion-header-bar> <ion-content class="has-header content-fill"> <div class="no-content-center">功能升级维护中...</div> </ion-content> </ion-view>'),a.put("modules/subject/subjectSelect.html",'<ion-view> <isj-spinner is-show="$root.inProcess" callback="spinnerCancel()"></isj-spinner> <ion-header-bar class="bar-light subjectSelect-title"> <isj-back-button></isj-back-button> <div class="title">科室列表</div> <a class="button button-clear icon ion-ios-search-strong positive" ng-click="searchClk()"></a> </ion-header-bar> <ion-header-bar ng-class="{true: \'search-none\'}[hideSearch]" class="head-search"> <form ng-submit="doSearch()"> <input id="subjectSelect_search_{{type}}" type="search" ng-model="major" placeholder="姓名或专长"> </form> <div class="search-icon"> <a class="button button-clear icon ion-ios-close-empty positive" ng-click="searchClk()"></a> </div> </ion-header-bar> <div class="district-select has-header"> <div class="button-bar"> <button ng-repeat="district in districts" ng-class="{false: \'button-outline\'}[districtId == district.id]" class="button button-positive district-button" ng-click="districtClk(district.id)"> {{district.name}} </button> </div> </div> <ion-content class="has-header has-header-district content-fill subjectSelect-content"> <div class="subject-select"> <ion-scroll class="subject-scroll subject-scroll-left"> <div ng-repeat="subject in subjects" ng-class="{true: \'left-activated\'}[subjectId == subject.id]" class="subject-div subject-div-left" ng-click="subjectLeftClk(subject.id)"> <i class="icon ion-ios-play positive left-activated-icon"></i> {{subject.name}} </div> </ion-scroll> <ion-scroll class="subject-scroll subject-scroll-right"> <div ng-repeat="subjectRight in subjectRights" class="subject-div subject-div-right" ng-click="subjectRightClk(subjectRight.id)"> {{subjectRight.name}} </div> </ion-scroll> </div> </ion-content> </ion-view>'),a.put("modules/tab/main/main.html",'<ion-view> <ion-header-bar class="bar-light main-header"> <div class="title positive">{{appName}}</div> </ion-header-bar> <ion-content scroll="false" has-bouncing="false" class="has-header content-fill main-content"> <div class="row" style="height: 43%"> <div class="col grid-carousel"> <div class="carousel-footer"> <div>{{carouselImages[carouselIndex].name}}</div> <div rn-carousel-indicators ng-if="carouselImages.length > 1" slides="carouselImages" rn-carousel-index="carouselIndex"></div> </div> <ul rn-carousel rn-carousel-index="carouselIndex" rn-carousel-auto-slide=""> <li ng-repeat="carouselImage in carouselImages"> <img class="carousel-img" ng-src="{{carouselImage.img}}"> </li> </ul> </div> </div> <div class="row" style="height: 19%"> <div class="col grid-col grid-flex-column"> <a class="grid-flex-row" ng-click="itemRouter(\'subjectSelect\', \'2\')"> <span class="grid-icon assertive-border"> <i class="icon ion-ios-paper-outline assertive"></i> </span> <span class="grid-space"></span> <span class="grid-font">预约挂号</span> </a> </div> <div class="col grid-col grid-flex-column"> <a class="grid-flex-row" ng-click="itemRouter(\'subjectSelect\', \'1\')"> <span class="grid-icon assertive-border"> <i class="icon ion-ios-paper-outline assertive"></i> </span> <span class="grid-space"></span> <span class="grid-font">当日挂号</span> </a> </div> </div> <div class="row" style="height: 19%"> <div class="col grid-col grid-flex-column"> <a class="grid-flex-column" ng-click="itemRouter(\'medicalReportList\')"> <span class="grid-icon positive-border"> <i class="icon ion-ios-copy-outline positive"></i> </span> <span class="grid-space"></span> <span class="grid-font">查看报告</span> </a> </div> <div class="col grid-col grid-flex-column"> <a class="grid-flex-column" ng-click="itemRouter(\'onlinePaymentList\')"> <span class="grid-icon positive-border"> <i class="icon ion-ios-cart-outline positive"></i> </span> <span class="grid-space"></span> <span class="grid-font">缴费</span> </a> </div> <div class="col grid-col grid-flex-column"> <a class="grid-flex-column" ng-click="itemRouter(\'doctorIntroductionList\')"> <span class="grid-icon positive-border"> <i class="icon ion-ios-personadd-outline positive"></i> </span> <span class="grid-space"></span> <span class="grid-font">医生介绍</span> </a> </div> </div> <div class="row" style="height: 19%"> <div class="col grid-col grid-flex-column"> <a class="grid-flex-column" ng-click="itemRouter(\'hospitalNavigation\')"> <span class="grid-icon balanced-border"> <i class="icon ion-ios-location-outline balanced"></i> </span> <span class="grid-space"></span> <span class="grid-font">医院导航</span> </a> </div> <div class="col grid-col grid-flex-column"> <a class="grid-flex-column" ng-click="itemRouter(\'hospitalIntroduce\')"> <span class="grid-icon balanced-border"> <i class="icon ion-ios-home-outline balanced"></i> </span> <span class="grid-space"></span> <span class="grid-font">医院简介</span> </a> </div> <div class="col grid-col grid-flex-column"> <a class="grid-flex-column" ng-click="itemRouter(\'medicalGuide\')"> <span class="grid-icon balanced-border"> <i class="icon ion-ios-help-empty balanced"></i> </span> <span class="grid-space"></span> <span class="grid-font">就医指南</span> </a> </div> </div> </ion-content> </ion-view>'),a.put("modules/tab/message/message.html",'<ion-view> <isj-spinner is-show="$root.inProcess" callback="spinnerCancel()"></isj-spinner> <ion-header-bar class="bar-light"> <div class="title">消息</div> </ion-header-bar> <ion-content class="has-header content-gray message-content"> <ion-refresher refreshing-icon="" on-refresh="doRefresh()"></ion-refresher> <ul class="list"> <li ng-repeat="message in messages" class="item"> <div class="time">{{message.date}}</div> <div class="message"><span ng-bind-html="message.content"></span></div> </li> </ul> </ion-content> </ion-view>'),a.put("modules/tab/personal/personal.html",'<ion-view> <div class="personal-title positive-bg"> <div ng-click="login()"> <img ng-if="!isLogin || user.sexCode == \'1\'" src="./assets/images/pic_man.png" class="photo"> <img ng-if="user.sexCode == \'0\'" src="./assets/images/pic_woman.png" class="photo"> </div> <div class="name" ng-if="isLogin">{{user.name}}</div> <div class="phone" ng-if="isLogin">{{user.phone}}</div> <div class="name" ng-if="!isLogin" ng-click="login()">登录</div> </div> <ion-content has-bouncing="false" class="content-gray personal-content"> <div> <ul class="list personal-list"> <li class="item item-icon-left item-icon-right" ng-click="itemRouter(\'familyMemberList\')"> <i class="icon ion-ios-people-outline positive icon-left"></i> 家庭成员 <i class="badge">{{memberCount}}</i> <i class="icon ion-ios-arrow-right icon-right"></i> </li> <li class="item item-icon-left item-icon-right" ng-click="itemRouter(\'collectionDoctorList\')"> <i class="icon ion-ios-personadd-outline positive icon-left"></i> 收藏的医生 <i class="badge">{{doctorCount}}</i> <i class="icon ion-ios-arrow-right icon-right"></i> </li> <li class="item item-icon-left item-icon-right" ng-click="itemRouter(\'medicalCardList\')"> <i class="icon ion-ios-list-outline positive icon-left"></i> 绑定就诊卡 <i class="icon ion-ios-arrow-right icon-right"></i> </li> <li class="item item-icon-left item-icon-right" ng-click="itemRouter(\'settingFeedbackListNew\')"> <i class="icon ion-ios-chatboxes-outline positive icon-left"></i> 意见反馈 <i class="icon ion-ios-arrow-right icon-right"></i> </li> <li class="item item-icon-left item-icon-right" ng-click="itemRouter(\'settingAppAbout\')"> <i class="icon ion-ios-information-outline positive icon-left"></i> 关于我们 <i class="icon ion-ios-arrow-right icon-right"></i> </li> <li ng-if="isLogin" class="item item-icon-left item-icon-right" ng-click="itemRouter(\'settingIndex\')"> <i class="icon ion-ios-gear-outline positive list-icon-left"></i> 设置 <i class="icon ion-ios-arrow-right icon-right"></i> </li> </ul> </div> </ion-content> </ion-view>'),a.put("modules/tab/registration/registration.html",'<ion-view> <isj-spinner is-show="$root.inProcess" callback="spinnerCancel()"></isj-spinner> <ion-header-bar class="bar-light"> <div class="title" ng-click="selectMember()"> <img ng-if="patient.memberCode == \'00\' && patient.sexCode == \'1\'" src="./assets/images/pic_man.png" class="photo"> <img ng-if="patient.memberCode == \'00\' && patient.sexCode == \'0\'" src="./assets/images/pic_woman.png" class="photo"> <img ng-if="patient.memberCode != \'00\'" ng-src="{{memberTypes[patient.memberCode].img}}" class="photo"> {{patient.member}}-{{patient.name}} <i class="icon ion-ios-arrow-down positive operation-down"></i> </div> </ion-header-bar> <div class="district-select has-header"> <div class="button-bar"> <button ng-repeat="viewType in viewTypes" ng-class="{false: \'button-outline\'}[viewTypeId == viewType.id]" class="button button-positive district-button" ng-click="registrationBtnClk(viewType.id)"> {{viewType.name}} </button> </div> </div> <ion-content class="has-header has-header-district content-gray content-fill registration-content"> <ion-refresher refreshing-icon="" on-refresh="doRefresh()"></ion-refresher> <div ng-if="registrations.length > 0" ng-repeat="registration in registrations" class="time-line" ng-click="registrationClk(registration.id)"> <div class="time-line-left"> {{registration.apptDate.substring(5,11)}}<br>{{registration.apptDate.substring(12)}} <div class="time-line-mark positive-bg"></div> </div> <div class="time-line-right"> <div class="time-line-panel"> <div class="title"> 单号：<span class="positive">{{registration.clinicNum}}</span> </div> <div class="content content-hospital"> <span class="content-icon"><i class="icon ion-ios-home-outline"></i></span> <span class="content-name">{{registration.hospital}}</span> </div> <div class="content"> <span class="content-icon"><i class="icon ion-ios-location-outline"></i></span> <span class="content-name">{{registration.dept}}（{{registration.district}}）</span> </div> <div class="content"> <span class="content-icon"><i class="icon ion-ios-person-outline"></i></span> <span class="content-name">{{registration.doctor}}</span> </div> <div class="bottom"> 就诊时间：{{registration.apptDate}} </div> <div class="bottom"> 挂号费：{{registration.amount}}元 </div> </div> <div class="time-line-bottom"> <span>操作时间：{{registration.registerDate.substring(5,11)}}</span> <span class="pay-status">{{registration.status}}</span> </div> </div> </div> <div ng-if="registrations.length == 0" class="no-content-center">暂无挂号信息</div> </ion-content> </ion-view>'),a.put("modules/tab/registration/registrationIllustration.html",'<ion-view> <isj-spinner is-show="$root.inProcess"></isj-spinner> <ion-header-bar class="bar-light"> <isj-back-button></isj-back-button> <div class="title">就诊、退号说明</div> </ion-header-bar> <ion-content class="has-header content-gray registrationIllustration-content"> <div class="illustration"> <div class="head"><div class="title">就诊说明</div></div> <div class="content"> <table> <tr> <td class="label"><img src="./assets/images/registration_card.png"></td> <td> <span ng-bind-html="description.visit1"></span> </td> </tr> <tr> <td class="label"><img src="./assets/images/registration_hospital.png"></td> <td> <span ng-bind-html="description.visit2"></span> </td> </tr> <tr> <td colspan="2" class="medical-guide"> <a class="positive" ng-click="medicalGuideClk()">就医指南</a> </td> </tr> </table> </div> </div> <div class="illustration illustration-marge"> <div class="head"><div class="title">退号说明</div></div> <div class="content"> <span ng-bind-html="description.backnum"></span> </div> </div> </ion-content> </ion-view>'),a.put("modules/tab/registration/registrationView.html",'<ion-view> <isj-spinner is-show="$root.inProcess"></isj-spinner> <ion-header-bar class="bar-light registrationView-head"> <isj-back-button></isj-back-button> <div class="title">挂号单</div> <!-- <a class="button button-clear icon ion-ios-telephone-outline positive"></a> --> </ion-header-bar> <ion-content class="has-header content-gray registrationView-content" ng-class="{\'has-footer\':((registration.statusCode == \'0\') || (registration.canBack == \'1\')),\'has-footer-double\':((registration.statusCode == \'0\') && (registration.canBack == \'1\'))}"> <ion-refresher refreshing-icon="" on-refresh="doRefresh()"></ion-refresher> <ul class="list registration-card"> <li class="item item-card-head"> <h2 class="odd-number">单号：<span class="positive">{{registration.num}}</span></h2> <span class="positive status">{{registration.status}}</span> </li> <li class="item item-card-content"> <table> <tr> <td class="label"> <img ng-if="patient.memberCode == \'00\' && patient.sexCode == \'1\'" src="./assets/images/pic_man.png"> <img ng-if="patient.memberCode == \'00\' && patient.sexCode == \'0\'" src="./assets/images/pic_woman.png"> <img ng-if="patient.memberCode != \'00\'" ng-src="{{memberTypes[patient.memberCode].img}}"> </td> <td> <span class="name">{{registration.patientName}}</span><br> <span class="number">病历号：<span class="positive">{{registration.clinicNum}}</span></span> </td> </tr> <tr> <td class="label"><i class="icon ion-ios-location-outline"></i></td> <td>{{registration.dept}}（{{registration.district}}）</td> </tr> <tr> <td class="label"><i class="icon ion-ios-person-outline"></i></td> <td>{{registration.doctor}}</td> </tr> </table> </li> </ul> <ul class="list registration-other"> <li class="item item-other-head"> <h2>挂号</h2> </li> <li class="item item-other-content"> <table> <tr> <td class="label">就诊时间</td> <td>{{visitTime}}</td> </tr> <tr> <td class="label">排队序号</td> <td>看诊前查看就诊序号</td> </tr> <tr> <td class="label">就诊地点</td> <td>看诊前查看就诊地点</td> </tr> <tr> <td class="label">挂号费</td> <td>{{registration.amount}}元</td> </tr> </table> </li> <li class="item item-icon-right" ng-click="illustrationClk()"> <h2 class="positive">就诊、退号说明</h2> <i class="icon ion-ios-arrow-right icon-right"></i> </li> </ul> <ul ng-if="registration.orders != null" class="list registration-other"> <li class="item item-other-head"> <h2>订单状态</h2> </li> <li class="item item-other-content"> <div class="pay-status-parent"> <div class="pay-status-line"> <div class="pay-status-content" ng-repeat="regisorder in registration.orders"> <div class="pay-status-mark"> <img ng-src="./assets/images/{{regisorder.img}}" ng-class="{\'img-style\' : regisorder.status==\'0\'}"> </div> <div class="pay-status-content-head" ng-class="{ \'positive\' : regisorder.status==\'1\'}">{{regisorder.name}}</div> <div class="pay-status-content-content" ng-bind-html="regisorder.detail"></div> </div> </div> </div> </li> </ul> </ion-content> <ion-footer-bar ng-if="((registration.statusCode == \'0\') || (registration.canBack == \'1\'))" align-title="center" class="registrationView-footer operation" ng-class="{\'registrationView-footer-height\': ((registration.statusCode == \'0\') && (registration.canBack == \'1\'))}"> <div style="width:100%"> <button ng-if="registration.statusCode == \'0\'" class="button button-positive has-two-button has-two-button-up" ng-click="registrationPay()">支付</button> <button ng-if="registration.canBack == \'1\'" class="button button-outline button-positive has-two-button has-two-button-down" ng-click="registrationBack()">退号</button> </div> </ion-footer-bar> </ion-view>'),a.put("modules/tab/tabs.html",'<ion-tabs class="tabs-icon-top tabs-light tabs-color-active-positive"> <ion-tab title="首页" icon-on="ion-ios-medkit-outline" icon-off="ion-ios-medkit-outline" ng-click="tabRouter(\'tab.main\')"> <ion-nav-view name="tab-main"></ion-nav-view> </ion-tab> <ion-tab title="消息" icon-on="ion-ios-bell-outline" icon-off="ion-ios-bell-outline" ng-click="tabRouter(\'tab.message\')"> <ion-nav-view name="tab-message"></ion-nav-view> </ion-tab> <ion-tab title="挂号单" icon-on="ion-ios-paper-outline" icon-off="ion-ios-paper-outline" ng-click="tabRouter(\'tab.registration\')"> <ion-nav-view name="tab-registration"></ion-nav-view> </ion-tab> <ion-tab title="我的" icon-on="ion-ios-person-outline" icon-off="ion-ios-person-outline" ng-click="tabRouter(\'tab.personal\')"> <ion-nav-view name="tab-personal"></ion-nav-view> </ion-tab> </ion-tabs>')}]);